!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioSoundManager=e()}(function(){return function a(o,i,r){function s(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,a,o,i,r)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)s(r[e]);return s}({1:[function(e,n,t){!function(gt,yt){"use strict";if(!gt||!gt.document)throw new Error("SoundManager requires a browser with window and document objects.");var e=null;function t(t,A){this.setupOptions={url:t||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onerror:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,playbackRate:1,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={onfailure:null,isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1},flac:{type:["audio/flac"],required:!1}},this.movieID="sm2-container",this.id=A||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20170601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var H,m,U,B,j,y,_,v,n,w,W,V,q,o,a,i,Q,X,z,Y,g,G,r,K,$,J,Z,b,ee,te,ne,ae,oe,M,ie,D,O,re,se,le,P,T,ue,de,ce,fe,pe,he,me,ge,ye,s,_e,ve,we,S,be,l,Me,De,L,Oe,Pe,Te,Se,Le,Ce,C=this,Ee=null,E=null,u="soundManager",d=u+": ",xe="HTML5::",x=navigator.userAgent,Ie=gt.location.href.toString(),I=document,c=[],Ne=!0,Re=!1,ke=!1,f=!1,p=!1,Fe=!1,Ae=0,He=["log","info","warn","error"],Ue=8,Be=null,je=null,We=!1,Ve=!1,qe=0,Qe=null,N=[],h=null,Xe=Array.prototype.slice,R=!1,ze=0,k=1e3,Ye=x.match(/(ipad|iphone|ipod)/i),Ge=x.match(/android/i),F=x.match(/msie|trident/i),Ke=x.match(/webkit/i),$e=x.match(/safari/i)&&!x.match(/chrome/i),Je=x.match(/opera/i),Ze=x.match(/(mobile|pre\/|xoom)/i)||Ye||Ge,et=!Ie.match(/usehtml5audio/i)&&!Ie.match(/sm2-ignorebadua/i)&&$e&&!x.match(/silk/i)&&x.match(/OS\sX\s10_6_([3-7])/i),tt=gt.console!==yt&&console.log!==yt,nt=I.hasFocus!==yt?I.hasFocus():null,at=$e&&(I.hasFocus===yt||!I.hasFocus()),ot=!at,it=/(mp3|mp4|mpa|m4a|m4b)/i,rt="about:blank",st="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",lt=I.location?I.location.protocol.match(/http/i):null,ut=lt?"":"//",dt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ct=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ft=new RegExp("\\.("+ct.join("|")+")(\\?.*)?$","i");function pt(e){return C.preferFlash&&l&&!C.ignoreFlash&&C.flash[e]!==yt&&C.flash[e]}function ht(e){var e=Xe.call(e),t=e.length;return Le?(e[1]="on"+e[1],3<t&&e.pop()):3===t&&e.push(!1),e}function mt(e,t){var n=e.shift(),t=[Ce[t]];Le?n[t](e[0],e[1]):n[t].apply(n,e)}function e(n){return function(e){var t=this._s,t=t&&t._a?n.call(this,e):(t&&t.id?C._wD(t.id+": Ignoring "+e.type):C._wD(xe+"Ignoring "+e.type),null);return t}}this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!lt,O={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},ye=[null,"MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"],this.hasHTML5=function(){try{return Audio!==yt&&(Je&&opera!==yt&&opera.version()<10?new Audio(null):new Audio).canPlayType!==yt}catch(e){return!1}}(),this.setup=function(e){var t=!C.url;return e!==yt&&f&&h&&C.ok()&&(e.flashVersion!==yt||e.url!==yt||e.html5Test!==yt)&&P(M("setupLate")),W(e),R||(Ze?C.setupOptions.ignoreMobileRestrictions&&!C.setupOptions.forceUseGlobalHTML5Audio||(N.push(g.globalHTML5),R=!0):C.setupOptions.forceUseGlobalHTML5Audio&&(N.push(g.globalHTML5),R=!0)),!Se&&Ze&&(C.setupOptions.ignoreMobileRestrictions?N.push(g.ignoreMobile):(C.setupOptions.useHTML5Audio&&!C.setupOptions.preferFlash||C._wD(g.mobileUA),C.setupOptions.useHTML5Audio=!0,C.setupOptions.preferFlash=!1,Ye?C.ignoreFlash=!0:(!Ge||x.match(/android\s2\.3/i))&&Ge||(C._wD(g.globalHTML5),R=!0))),e&&(t&&$&&e.url!==yt&&C.beginDelayedInit(),$||e.url===yt||"complete"!==I.readyState||setTimeout(r,1)),Se=!0,C},this.ok=function(){return h?f&&!p:C.useHTML5Audio&&C.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return m(e)||I[e]||gt[e]},this.createSound=function(e,t){var n,a=null,o=u+".createSound(): ",i=o+M(f?"notOK":"notReady");if(!f||!C.ok())return P(i),!1;if((n=w(e=t!==yt?{id:e,url:t}:e)).url=fe(n.url),n.id===yt&&(n.id=C.setupOptions.idPrefix+ze++),n.id.toString().charAt(0).match(/^[0-9]$/)&&C._wD(o+M("badID",n.id),2),C._wD(o+n.id+(n.url?" ("+n.url+")":""),1),T(n.id,!0))return C._wD(o+n.id+" exists",1),C.sounds[n.id];function r(){return n=se(n),C.sounds[n.id]=new H(n),C.soundIDs.push(n.id),C.sounds[n.id]}if(me(n))a=r(),C.html5Only||C._wD(n.id+": Using HTML5"),a._setup_html5(n);else{if(C.html5Only)return C._wD(n.id+": No HTML5 support for this sound, and no Flash. Exiting."),r();if(C.html5.usingFlash&&n.url&&n.url.match(/data:/i))return C._wD(n.id+": data: URIs not supported via Flash. Exiting."),r();8<y&&(null===n.isMovieStar&&(n.isMovieStar=!!(n.serverURL||n.type&&n.type.match(dt)||n.url&&n.url.match(ft))),n.isMovieStar)&&(C._wD(o+"using MovieStar handling"),1<n.loops)&&v("noNSLoop"),n=le(n,o),a=r(),8===y?E._createSound(n.id,n.loops||1,n.usePolicyFile):(E._createSound(n.id,n.url,n.usePeakData,n.useWaveformData,n.useEQData,n.isMovieStar,!!n.isMovieStar&&n.bufferTime,n.loops||1,n.serverURL,n.duration||null,n.autoPlay,!0,n.autoLoad,n.usePolicyFile),n.serverURL||(a.connected=!0,n.onconnect&&n.onconnect.apply(a))),n.serverURL||!n.autoLoad&&!n.autoPlay||a.load(n)}return!n.serverURL&&n.autoPlay&&a.play(),a},this.destroySound=function(e,t){if(!T(e))return!1;var n,a=C.sounds[e];for(a.stop(),a._iO={},a.unload(),n=0;n<C.soundIDs.length;n++)if(C.soundIDs[n]===e){C.soundIDs.splice(n,1);break}return t||a.destruct(!0),a=null,delete C.sounds[e],!0},this.load=function(e,t){return!!T(e)&&C.sounds[e].load(t)},this.unload=function(e){return!!T(e)&&C.sounds[e].unload()},this.onPosition=function(e,t,n,a){return!!T(e)&&C.sounds[e].onposition(t,n,a)},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return!!T(e)&&C.sounds[e].clearOnPosition(t,n)},this.play=function(e,t){var n=null,a=t&&!(t instanceof Object);if(!f||!C.ok())return P(u+".play(): "+M(f?"notOK":"notReady")),!1;if(T(e,a))a&&(t={url:t});else{if(!a)return!1;(t=a?{url:t}:t)&&t.url&&(C._wD(u+'.play(): Attempting to create "'+e+'"',1),t.id=e,n=C.createSound(t).play())}return n=null===n?C.sounds[e].play(t):n},this.start=this.play,this.setPlaybackRate=function(e,t,n){return!!T(e)&&C.sounds[e].setPlaybackRate(t,n)},this.setPosition=function(e,t){return!!T(e)&&C.sounds[e].setPosition(t)},this.stop=function(e){return!!T(e)&&(C._wD(u+".stop("+e+")",1),C.sounds[e].stop())},this.stopAll=function(){for(var e in C._wD(u+".stopAll()",1),C.sounds)C.sounds.hasOwnProperty(e)&&C.sounds[e].stop()},this.pause=function(e){return!!T(e)&&C.sounds[e].pause()},this.pauseAll=function(){for(var e=C.soundIDs.length-1;0<=e;e--)C.sounds[C.soundIDs[e]].pause()},this.resume=function(e){return!!T(e)&&C.sounds[e].resume()},this.resumeAll=function(){for(var e=C.soundIDs.length-1;0<=e;e--)C.sounds[C.soundIDs[e]].resume()},this.togglePause=function(e){return!!T(e)&&C.sounds[e].togglePause()},this.setPan=function(e,t){return!!T(e)&&C.sounds[e].setPan(t)},this.setVolume=function(e,t){var n,a;if(e===yt||isNaN(e)||t!==yt)return!!T(e)&&C.sounds[e].setVolume(t);for(n=0,a=C.soundIDs.length;n<a;n++)C.sounds[C.soundIDs[n]].setVolume(e);return!1},this.mute=function(e){var t=0;if(e=e instanceof String?null:e)return!!T(e)&&(C._wD(u+'.mute(): Muting "'+e+'"'),C.sounds[e].mute());for(C._wD(u+".mute(): Muting all sounds"),t=C.soundIDs.length-1;0<=t;t--)C.sounds[C.soundIDs[t]].mute();return C.muted=!0},this.muteAll=function(){C.mute()},this.unmute=function(e){var t;if(e=e instanceof String?null:e)return!!T(e)&&(C._wD(u+'.unmute(): Unmuting "'+e+'"'),C.sounds[e].unmute());for(C._wD(u+".unmute(): Unmuting all sounds"),t=C.soundIDs.length-1;0<=t;t--)C.sounds[C.soundIDs[t]].unmute();return!(C.muted=!1)},this.unmuteAll=function(){C.unmute()},this.toggleMute=function(e){return!!T(e)&&C.sounds[e].toggleMute()},this.getMemoryUse=function(){var e=0;return e=E&&8!==y?parseInt(E._getMemoryUse(),10):e},this.disable=function(e){var t;if(e===yt&&(e=!1),p)return!1;for(p=!0,v("shutdown",1),t=C.soundIDs.length-1;0<=t;t--)ne(C.sounds[C.soundIDs[t]]);return ne(C),n(e),S.remove(gt,"load",a),!0},this.canPlayMIME=function(e){var t;return t=!(t=C.hasHTML5?ge({type:e}):t)&&h?e&&C.ok()?!!(8<y&&e.match(dt)||e.match(C.mimePattern)):null:t},this.canPlayURL=function(e){var t;return t=!(t=C.hasHTML5?ge({url:e}):t)&&h?e&&C.ok()?!!e.match(C.filePattern):null:t},this.canPlayLink=function(e){return!(e.type===yt||!e.type||!C.canPlayMIME(e.type))||C.canPlayURL(e.href)},this.getSoundById=function(e,t){var n;return e?((n=C.sounds[e])||t||C._wD(u+'.getSoundById(): Sound "'+e+'" not found.',2),n):null},this.onready=function(e,t){var n="onready";if("function"!=typeof e)throw M("needFunction",n);return f&&C._wD(M("queue",n)),q(n,e,t=t||gt),o(),!0},this.ontimeout=function(e,t){var n="ontimeout";if("function"!=typeof e)throw M("needFunction",n);return f&&C._wD(M("queue",n)),q(n,e,t=t||gt),o({type:n}),!0},this._writeDebug=function(e,t){var n,a;if(!C.setupOptions.debugMode)return!1;if(!(tt&&C.useConsole&&(t&&"object"==typeof t?console.log(e,t):He[t]!==yt?console[He[t]](e):console.log(e),C.consoleOnly))){if(!(n=m("soundmanager-debug")))return!1;a=I.createElement("div"),++Ae%2==0&&(a.className="sm2-alt"),t=t===yt?0:parseInt(t,10),a.appendChild(I.createTextNode(e)),t&&(2<=t&&(a.style.fontWeight="bold"),3===t)&&(a.style.color="#ff3333"),n.insertBefore(a,n.firstChild),n=null}return!0},-1!==Ie.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){gt.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(v("currentObj",1),e=0,t=C.soundIDs.length;e<t;e++)C.sounds[C.soundIDs[e]]._debug()},this.reboot=function(e,t){var n,a,o;for(C.soundIDs.length&&C._wD("Destroying "+C.soundIDs.length+" SMSound object"+(1!==C.soundIDs.length?"s":"")+"..."),n=C.soundIDs.length-1;0<=n;n--)C.sounds[C.soundIDs[n]].destruct();if(E)try{F&&(je=E.innerHTML),Be=E.parentNode.removeChild(E)}catch(e){v("badRemove",2)}if(je=Be=h=E=null,C.enabled=$=f=We=Ve=Re=ke=p=R=C.swfLoaded=!1,C.soundIDs=[],C.sounds={},ze=0,Se=!1,e)c=[];else for(n in c)if(c.hasOwnProperty(n))for(a=0,o=c[n].length;a<o;a++)c[n][a].fired=!1;return t||C._wD(u+": Rebooting..."),C.html5={usingFlash:null},C.flash={},C.html5Only=!1,C.ignoreFlash=!1,gt.setTimeout(function(){t||C.beginDelayedInit()},20),C},this.reset=function(){return v("reset"),C.reboot(!0,!0)},this.getMoviePercent=function(){return E&&"PercentLoaded"in E?E.PercentLoaded():null},this.beginDelayedInit=function(){Fe=!0,r(),setTimeout(function(){return!Ve&&(Z(),G(),Ve=!0)},20),i()},this.destruct=function(){C._wD(u+".destruct()"),C.disable(!0)},H=function(e){var o,i,t,a,s,l,r,u,d,c=this,f=!1,p=[],h=0,m=null,g={duration:null,time:null};this.id=e.id,this.sID=this.id,this.url=e.url,this.options=w(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,d=!this.url,this.id3={},this._debug=function(){C._wD(c.id+": Merged options:",c.options)},this.load=function(e){var t;if(e!==yt?c._iO=w(e,c.options):(e=c.options,c._iO=e,m&&m!==c.url&&(v("manURL"),c._iO.url=c.url,c.url=null)),c._iO.url||(c._iO.url=c.url),c._iO.url=fe(c._iO.url),c.instanceOptions=c._iO,t=c._iO,C._wD(c.id+": load ("+t.url+")"),t.url||c.url)if(c.isHTML5||8!==y||c.url||t.autoPlay||C._wD(c.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),t.url===c.url&&0!==c.readyState&&2!==c.readyState)v("onURL",1),3===c.readyState&&t.onload&&Te(c,function(){t.onload.apply(c,[!!c.duration])});else{if(c.loaded=!1,c.readyState=1,c.playState=0,c.id3={},me(t))c._setup_html5(t)._called_load?C._wD(c.id+": Ignoring request to load again"):(c._html5_canplay=!1,c.url!==t.url&&(C._wD(v("manURL")+": "+t.url),c._a.src=t.url,c.setPosition(0)),c._a.autobuffer="auto",c._a.preload="auto",c._a._called_load=!0);else{if(C.html5Only)return C._wD(c.id+": No flash support. Exiting."),c;if(c._iO.url&&c._iO.url.match(/data:/i))return C._wD(c.id+": data: URIs not supported via Flash. Exiting."),c;try{c.isHTML5=!1,c._iO=le(se(t)),c._iO.autoPlay&&(c._iO.position||c._iO.from)&&(C._wD(c.id+": Disabling autoPlay because of non-zero offset case"),c._iO.autoPlay=!1),t=c._iO,8===y?E._load(c.id,t.url,t.stream,t.autoPlay,t.usePolicyFile):E._load(c.id,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(e){v("smError",2),_("onload",!1),b({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}c.url=t.url}else C._wD(c.id+": load(): url is unassigned. Exiting.",2);return c},this.unload=function(){return 0!==c.readyState&&(C._wD(c.id+": unload()"),c.isHTML5?(a(),c._a&&(c._a.pause(),m=_e(c._a))):8===y?E._unload(c.id,rt):E._unload(c.id),o()),c},this.destruct=function(e){C._wD(c.id+": Destruct"),c.isHTML5?(a(),c._a&&(c._a.pause(),_e(c._a),R||t(),c._a._s=null,c._a=null)):(c._iO.onfailure=null,E._destroySound(c.id)),e||C.destroySound(c.id,!0)},this.play=function(e,t){var n,a,o,i,r=c.id+": play(): ";if(t=t===yt||t,e=e||{},c.url&&(c._iO.url=c.url),c._iO=w(c._iO,c.options),c._iO=w(e,c._iO),c._iO.url=fe(c._iO.url),c.instanceOptions=c._iO,c.isHTML5||!c._iO.serverURL||c.connected){if(me(c._iO)&&(c._setup_html5(c._iO),s()),1===c.playState&&!c.paused){if(!c._iO.multiShot)return C._wD(r+"Already playing (one-shot)",1),c.isHTML5&&c.setPosition(c._iO.position),c;C._wD(r+"Already playing (multi-shot)",1)}if(e.url&&e.url!==c.url&&(c.readyState||c.isHTML5||8!==y||!d?c.load(c._iO):d=!1),c.loaded)C._wD(r.substr(0,r.lastIndexOf(":")));else if(0===c.readyState){if(C._wD(r+"Attempting to load"),c.isHTML5||C.html5Only){if(!c.isHTML5)return C._wD(r+"Unsupported type. Exiting."),c}else c._iO.autoPlay=!0;c.load(c._iO),c.instanceOptions=c._iO}else{if(2===c.readyState)return C._wD(r+"Could not load - exiting",2),c;C._wD(r+"Loading - attempting to play...")}!c.isHTML5&&9===y&&0<c.position&&c.position===c.duration&&(C._wD(r+"Sound at end, resetting to position: 0"),e.position=0),c.paused&&0<=c.position&&(!c._iO.serverURL||0<c.position)?(C._wD(r+"Resuming from paused state",1),c.resume()):(c._iO=w(e,c._iO),(!c.isHTML5&&null!==c._iO.position&&0<c._iO.position||null!==c._iO.from&&0<c._iO.from||null!==c._iO.to)&&0===c.instanceCount&&0===c.playState&&!c._iO.serverURL&&(n=function(){c._iO=w(e,c._iO),c.play(c._iO)},c.isHTML5&&!c._html5_canplay?(C._wD(r+"Beginning load for non-zero offset case"),c.load({_oncanplay:n})):c.isHTML5||c.loaded||c.readyState&&2===c.readyState||(C._wD(r+"Preloading for non-zero offset case"),c.load({onload:n})),c._iO=u()),(!c.instanceCount||c._iO.multiShotEvents||c.isHTML5&&c._iO.multiShot&&!R||!c.isHTML5&&8<y&&!c.getAutoPlay())&&c.instanceCount++,c._iO.onposition&&0===c.playState&&l(c),c.playState=1,c.paused=!1,c.position=c._iO.position===yt||isNaN(c._iO.position)?0:c._iO.position,c.isHTML5||(c._iO=le(se(c._iO))),c._iO.onplay&&t&&(c._iO.onplay.apply(c),f=!0),c.setVolume(c._iO.volume,!0),c.setPan(c._iO.pan,!0),1!==c._iO.playbackRate&&c.setPlaybackRate(c._iO.playbackRate),c.isHTML5?c.instanceCount<2?(s(),n=c._setup_html5(),c.setPosition(c._iO.position),n.play()):(C._wD(c.id+": Cloning Audio() for instance #"+c.instanceCount+"..."),a=new Audio(c._iO.url),o=function(){S.remove(a,"ended",o),c._onfinish(c),_e(a),a=null},i=function(){S.remove(a,"canplay",i);try{a.currentTime=c._iO.position/k}catch(e){P(c.id+": multiShot play() failed to apply position of "+c._iO.position/k)}a.play()},S.add(a,"ended",o),c._iO.volume!==yt&&(a.volume=Math.max(0,Math.min(1,c._iO.volume/100))),c.muted&&(a.muted=!0),c._iO.position?S.add(a,"canplay",i):a.play()):(t=E._start(c.id,c._iO.loops||1,9===y?c.position:c.position/k,c._iO.multiShot||!1),9!==y||t||(C._wD(r+"No sound hardware, or 32-sound ceiling hit",2),c._iO.onplayerror&&c._iO.onplayerror.apply(c))))}else c.getAutoPlay()||(C._wD(r+" Netstream not connected yet - setting autoPlay"),c.setAutoPlay(!0));return c},this.start=this.play,this.stop=function(e){var t,n=c._iO;return 1===c.playState&&(C._wD(c.id+": stop()"),c._onbufferchange(0),c._resetOnPosition(0),c.paused=!1,c.isHTML5||(c.playState=0),r(),n.to&&c.clearOnPosition(n.to),c.isHTML5?c._a&&(t=c.position,c.setPosition(0),c.position=t,c._a.pause(),c.playState=0,c._onTimer(),a()):(E._stop(c.id,e),n.serverURL&&c.unload()),c.instanceCount=0,c._iO={},n.onstop)&&n.onstop.apply(c),c},this.setAutoPlay=function(e){C._wD(c.id+": Autoplay turned "+(e?"on":"off")),c._iO.autoPlay=e,c.isHTML5||(E._setAutoPlay(c.id,e),!e)||c.instanceCount||1!==c.readyState||(c.instanceCount++,C._wD(c.id+": Incremented instance count to "+c.instanceCount))},this.getAutoPlay=function(){return c._iO.autoPlay},this.setPlaybackRate=function(e){var t=Math.max(.5,Math.min(4,e));if(t!==e&&C._wD(c.id+": setPlaybackRate("+e+"): limiting rate to "+t,2),c.isHTML5)try{c._iO.playbackRate=t,c._a.playbackRate=t}catch(e){C._wD(c.id+": setPlaybackRate("+t+") failed: "+e.message,2)}return c},this.setPosition=function(e){e===yt&&(e=0);var t,e=c.isHTML5?Math.max(e,0):Math.min(c.duration||c._iO.duration,Math.max(e,0));if(c.position=e,t=c.position/k,c._resetOnPosition(c.position),c._iO.position=e,c.isHTML5){if(c._a){if(c._html5_canplay){if(c._a.currentTime.toFixed(3)!==t.toFixed(3)){C._wD(c.id+": setPosition("+t+")");try{c._a.currentTime=t,0!==c.playState&&!c.paused||c._a.pause()}catch(e){C._wD(c.id+": setPosition("+t+") failed: "+e.message,2)}}}else if(t)return C._wD(c.id+": setPosition("+t+"): Cannot seek yet, sound not ready",2),c;c.paused&&c._onTimer(!0)}}else e=9===y?c.position:t,c.readyState&&2!==c.readyState&&E._setPosition(c.id,e,c.paused||!c.playState,c._iO.multiShot);return c},this.pause=function(e){return c.paused||0===c.playState&&1!==c.readyState||(C._wD(c.id+": pause()"),c.paused=!0,c.isHTML5?(c._setup_html5().pause(),a()):!e&&e!==yt||E._pause(c.id,c._iO.multiShot),c._iO.onpause&&c._iO.onpause.apply(c)),c},this.resume=function(){var e=c._iO;return c.paused&&(C._wD(c.id+": resume()"),c.paused=!1,c.playState=1,c.isHTML5?(c._setup_html5().play(),s()):(e.isMovieStar&&!e.serverURL&&c.setPosition(c.position),E._pause(c.id,e.multiShot)),!f&&e.onplay?(e.onplay.apply(c),f=!0):e.onresume&&e.onresume.apply(c)),c},this.togglePause=function(){return C._wD(c.id+": togglePause()"),0===c.playState?c.play({position:9!==y||c.isHTML5?c.position/k:c.position}):c.paused?c.resume():c.pause(),c},this.setPan=function(e,t){return e===yt&&(e=0),t===yt&&(t=!1),c.isHTML5||E._setPan(c.id,e),c._iO.pan=e,t||(c.pan=e,c.options.pan=e),c},this.setVolume=function(e,t){return e===yt&&(e=100),t===yt&&(t=!1),c.isHTML5?c._a&&(C.muted&&!c.muted&&(c.muted=!0,c._a.muted=!0),c._a.volume=Math.max(0,Math.min(1,e/100))):E._setVolume(c.id,C.muted&&!c.muted||c.muted?0:e),c._iO.volume=e,t||(c.volume=e,c.options.volume=e),c},this.mute=function(){return c.muted=!0,c.isHTML5?c._a&&(c._a.muted=!0):E._setVolume(c.id,0),c},this.unmute=function(){c.muted=!1;var e=c._iO.volume!==yt;return c.isHTML5?c._a&&(c._a.muted=!1):E._setVolume(c.id,(e?c._iO:c.options).volume),c},this.toggleMute=function(){return c.muted?c.unmute():c.mute()},this.onPosition=function(e,t,n){return p.push({position:parseInt(e,10),method:t,scope:n!==yt?n:c,fired:!1}),c},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;if(e=parseInt(e,10),!isNaN(e))for(n=0;n<p.length;n++)e!==p[n].position||t&&t!==p[n].method||(p[n].fired&&h--,p.splice(n,1))},this._processOnPosition=function(){var e,t,n=p.length;if(!n||!c.playState||n<=h)return!1;for(e=n-1;0<=e;e--)!(t=p[e]).fired&&c.position>=t.position&&(t.fired=!0,h++,t.method.apply(t.scope,[t.position]),n=p.length);return!0},this._resetOnPosition=function(e){var t,n,a=p.length;if(!a)return!1;for(t=a-1;0<=t;t--)(n=p[t]).fired&&e<=n.position&&(n.fired=!1,h--);return!0},u=function(){var e=c._iO,t=e.from,n=e.to,a=function(){C._wD(c.id+': "To" time of '+n+" reached."),c.clearOnPosition(n,a),c.stop()},o=function(){C._wD(c.id+': Playing "from" '+t),null===n||isNaN(n)||c.onPosition(n,a)};return null===t||isNaN(t)||(e.position=t,e.multiShot=!1,o()),e},l=function(){var e,t=c._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&c.onPosition(parseInt(e,10),t[e])},r=function(){var e,t=c._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&c.clearOnPosition(parseInt(e,10))},s=function(){c.isHTML5&&ue(c)},a=function(){c.isHTML5&&de(c)},(o=function(e){e||(p=[],h=0),f=!1,c._hasTimer=null,c._a=null,c._html5_canplay=!1,c.bytesLoaded=null,c.bytesTotal=null,c.duration=c._iO&&c._iO.duration?c._iO.duration:null,c.durationEstimate=null,c.buffered=[],c.eqData=[],c.eqData.left=[],c.eqData.right=[],c.failures=0,c.isBuffering=!1,c.instanceOptions={},c.instanceCount=0,c.loaded=!1,c.metadata={},c.readyState=0,c.muted=!1,c.paused=!1,c.peakData={left:0,right:0},c.waveformData={left:[],right:[]},c.playState=0,c.position=null,c.id3={}})(),this._onTimer=function(e){var t,n=!1,a={};return(c._hasTimer||e)&&c._a&&(e||(0<c.playState||1===c.readyState)&&!c.paused)&&((t=c._get_html5_duration())!==g.duration&&(g.duration=t,c.duration=t,n=!0),c.durationEstimate=c.duration,(t=c._a.currentTime*k||0)!==g.time&&(g.time=t,n=!0),n||e)&&c._whileplaying(t,a,a,a,a),n},this._get_html5_duration=function(){var e=c._iO,e=c._a&&c._a.duration?c._a.duration*k:e&&e.duration?e.duration:null;return e&&!isNaN(e)&&e!==1/0?e:null},this._apply_loop=function(e,t){!e.loop&&1<t&&C._wD("Note: Native HTML5 looping is infinite.",1),e.loop=1<t?"loop":""},this._setup_html5=function(e){var t,e=w(c._iO,e),n=R?Ee:c._a,a=decodeURI(e.url);if(R?a===decodeURI(be)&&(t=!0):a===decodeURI(m)&&(t=!0),n){if(n._s)if(R)n._s&&n._s.playState&&!t&&n._s.stop();else if(!R&&a===decodeURI(m))return c._apply_loop(n,e.loops),n;t||(m&&o(!1),n.src=e.url,c.url=e.url,m=e.url,be=e.url,n._called_load=!1)}else e.autoLoad||e.autoPlay?(c._a=new Audio(e.url),c._a.load()):c._a=Je&&opera.version()<10?new Audio(null):new Audio,(n=c._a)._called_load=!1,R&&(Ee=n);return c.isHTML5=!0,(c._a=n)._s=c,i(),c._apply_loop(n,e.loops),e.autoLoad||e.autoPlay?c.load():(n.autobuffer=!1,n.preload="auto"),n},i=function(){if(c._a._added_events)return!1;var e,t,n,a;for(e in c._a._added_events=!0,L)L.hasOwnProperty(e)&&(n=L[t=e],a=void 0,c._a)&&c._a.addEventListener(t,n,a||!1);return!0},t=function(){var e,t,n,a;for(e in C._wD(c.id+": Removing event listeners"),c._a._added_events=!1,L)L.hasOwnProperty(e)&&(n=L[t=e],a=void 0,c._a)&&c._a.removeEventListener(t,n,a||!1)},this._onload=function(e){var t=!!e||!c.isHTML5&&8===y&&c.duration,e=c.id+": ";return C._wD(e+(t?"onload()":"Failed to load / invalid sound?"+(c.duration?" -":" Zero-length duration reported.")+" ("+c.url+")"),t?1:2),t||c.isHTML5||(!0===C.sandbox.noRemote&&C._wD(e+M("noNet"),1),!0===C.sandbox.noLocal&&C._wD(e+M("noLocal"),1)),c.loaded=t,c.readyState=t?3:2,c._onbufferchange(0),t||c.isHTML5||c._onerror(),c._iO.onload&&Te(c,function(){c._iO.onload.apply(c,[t])}),!0},this._onerror=function(e,t){c._iO.onerror&&Te(c,function(){c._iO.onerror.apply(c,[e,t])})},this._onbufferchange=function(e){return 0!==c.playState&&!(e&&c.isBuffering||!e&&!c.isBuffering||(c.isBuffering=1===e,c._iO.onbufferchange&&(C._wD(c.id+": Buffer state change: "+e),c._iO.onbufferchange.apply(c,[e])),0))},this._onsuspend=function(){return c._iO.onsuspend&&(C._wD(c.id+": Playback suspended"),c._iO.onsuspend.apply(c)),!0},this._onfailure=function(e,t,n){c.failures++,C._wD(c.id+": Failure ("+c.failures+"): "+e),c._iO.onfailure&&1===c.failures?c._iO.onfailure(e,t,n):C._wD(c.id+": Ignoring failure")},this._onwarning=function(e,t,n){c._iO.onwarning&&c._iO.onwarning(e,t,n)},this._onfinish=function(){var e=c._iO.onfinish;c._onbufferchange(0),c._resetOnPosition(0),c.instanceCount&&(c.instanceCount--,c.instanceCount||(r(),c.playState=0,c.paused=!1,c.instanceCount=0,c.instanceOptions={},c._iO={},a(),c.isHTML5&&(c.position=0)),c.instanceCount&&!c._iO.multiShotEvents||e&&(C._wD(c.id+": onfinish()"),Te(c,function(){e.apply(c)})))},this._whileloading=function(e,t,n,a){var o=c._iO;c.bytesLoaded=e,c.bytesTotal=t,c.duration=Math.floor(n),c.bufferLength=a,c.isHTML5||o.isMovieStar?c.durationEstimate=c.duration:o.duration?c.durationEstimate=(c.duration>o.duration?c:o).duration:c.durationEstimate=parseInt(c.bytesTotal/c.bytesLoaded*c.duration,10),c.isHTML5||(c.buffered=[{start:0,end:c.duration}]),(3!==c.readyState||c.isHTML5)&&o.whileloading&&o.whileloading.apply(c)},this._whileplaying=function(e,t,n,a,o){var i=c._iO;return!isNaN(e)&&null!==e&&(c.position=Math.max(0,e),c._processOnPosition(),!c.isHTML5&&8<y&&(i.usePeakData&&t!==yt&&t&&(c.peakData={left:t.leftPeak,right:t.rightPeak}),i.useWaveformData&&n!==yt&&n&&(c.waveformData={left:n.split(","),right:a.split(",")}),i.useEQData)&&o!==yt&&o&&o.leftEQ&&(e=o.leftEQ.split(","),c.eqData=e,c.eqData.left=e,o.rightEQ!==yt)&&o.rightEQ&&(c.eqData.right=o.rightEQ.split(",")),1===c.playState&&(c.isHTML5||8!==y||c.position||!c.isBuffering||c._onbufferchange(0),i.whileplaying)&&i.whileplaying.apply(c),!0)},this._oncaptiondata=function(e){C._wD(c.id+": Caption data received."),c.captiondata=e,c._iO.oncaptiondata&&c._iO.oncaptiondata.apply(c,[e])},this._onmetadata=function(e,t){C._wD(c.id+": Metadata received.");for(var n={},a=0,o=e.length;a<o;a++)n[e[a]]=t[a];c.metadata=n,c._iO.onmetadata&&c._iO.onmetadata.call(c,c.metadata)},this._onid3=function(e,t){C._wD(c.id+": ID3 data received.");for(var n=[],a=0,o=e.length;a<o;a++)n[e[a]]=t[a];c.id3=w(c.id3,n),c._iO.onid3&&c._iO.onid3.apply(c)},this._onconnect=function(e){C._wD(c.id+": "+((e=1===e)?"Connected.":"Failed to connect? - "+c.url),e?1:2),(c.connected=e)&&(c.failures=0,T(c.id)&&(c.getAutoPlay()?c.play(yt,c.getAutoPlay()):c._iO.autoLoad&&c.load()),c._iO.onconnect)&&c._iO.onconnect.apply(c,[e])},this._ondataerror=function(e){0<c.playState&&(C._wD(c.id+": Data error: "+e),c._iO.ondataerror)&&c._iO.ondataerror.apply(c)},this._debug()},J=function(){return I.body||I.getElementsByTagName("div")[0]},m=function(e){return I.getElementById(e)},w=function(e,t){var n,a=e||{},o=t===yt?C.defaultOptions:t;for(n in o)o.hasOwnProperty(n)&&a[n]===yt&&("object"!=typeof o[n]||null===o[n]?a[n]=o[n]:a[n]=w(a[n],o[n]));return a},Te=function(e,t){e.isHTML5||8!==y?t():gt.setTimeout(t,0)},V={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},W=function(e,t){var n,a=!0,o=t!==yt,i=C.setupOptions,r=V;if(e===yt){for(n in a=[],i)i.hasOwnProperty(n)&&a.push(n);for(n in r)r.hasOwnProperty(n)&&("object"==typeof C[n]?a.push(n+": {...}"):C[n]instanceof Function?a.push(n+": function() {...}"):a.push(n));return C._wD(M("setup",a.join(", "))),!1}for(n in e)if(e.hasOwnProperty(n))if("object"!=typeof e[n]||null===e[n]||e[n]instanceof Array||e[n]instanceof RegExp)o&&r[t]!==yt?C[t][n]=e[n]:i[n]!==yt?(C.setupOptions[n]=e[n],C[n]=e[n]):r[n]===yt?(P(M(C[n]===yt?"setupUndef":"setupError",n),2),a=!1):C[n]instanceof Function?C[n].apply(C,e[n]instanceof Array?e[n]:[e[n]]):C[n]=e[n];else{if(r[n]!==yt)return W(e[n],n);P(M(C[n]===yt?"setupUndef":"setupError",n),2),a=!1}return a},Le=gt.attachEvent,Ce={add:Le?"attachEvent":"addEventListener",remove:Le?"detachEvent":"removeEventListener"},S={add:function(){mt(ht(arguments),"add")},remove:function(){mt(ht(arguments),"remove")}},L={abort:e(function(){C._wD(this._s.id+": abort")}),canplay:e(function(){var t,n=this._s;if(!n._html5_canplay){if(n._html5_canplay=!0,C._wD(n.id+": canplay"),n._onbufferchange(0),t=n._iO.position===yt||isNaN(n._iO.position)?null:n._iO.position/k,this.currentTime!==t){C._wD(n.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(e){C._wD(n.id+": canplay: Setting position of "+t+" failed: "+e.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}}),canplaythrough:e(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),durationchange:e(function(){var e=this._s,t=e._get_html5_duration();isNaN(t)||t===e.duration||(C._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:"")),e.durationEstimate=e.duration=t)}),ended:e(function(){var e=this._s;C._wD(e.id+": ended"),e._onfinish()}),error:e(function(){var e=ye[this.error.code]||null;C._wD(this._s.id+": HTML5 error, code "+this.error.code+(e?" ("+e+")":"")),this._s._onload(!1),this._s._onerror(this.error.code,e)}),loadeddata:e(function(){var e=this._s;C._wD(e.id+": loadeddata"),e._loaded||$e||(e.duration=e._get_html5_duration())}),loadedmetadata:e(function(){C._wD(this._s.id+": loadedmetadata")}),loadstart:e(function(){C._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:e(function(){this._s._onbufferchange(0)}),playing:e(function(){C._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:e(function(e){var t,n,a,o,i=this._s,r="progress"===e.type,s=e.target.buffered,l=e.loaded||0,u=e.total||1;if(i.buffered=[],s&&s.length){for(t=0,n=s.length;t<n;t++)i.buffered.push({start:s.start(t)*k,end:s.end(t)*k});if(o=(s.end(0)-s.start(0))*k,l=Math.min(1,o/(e.target.duration*k)),r&&1<s.length){for(a=[],n=s.length,t=0;t<n;t++)a.push(e.target.buffered.start(t)*k+"-"+e.target.buffered.end(t)*k);C._wD(this._s.id+": progress, timeRanges: "+a.join(", "))}r&&!isNaN(l)&&C._wD(this._s.id+": progress, "+Math.floor(100*l)+"% loaded")}isNaN(l)||(i._whileloading(l,u,i._get_html5_duration()),l&&u&&l===u&&L.canplaythrough.call(this,e))}),ratechange:e(function(){C._wD(this._s.id+": ratechange")}),suspend:e(function(e){var t=this._s;C._wD(this._s.id+": suspend"),L.progress.call(this,e),t._onsuspend()}),stalled:e(function(){C._wD(this._s.id+": stalled")}),timeupdate:e(function(){this._s._onTimer()}),waiting:e(function(){var e=this._s;C._wD(this._s.id+": waiting"),e._onbufferchange(1)})},me=function(e){e=!(!e||!(e.type||e.url||e.serverURL)||e.serverURL||e.type&&pt(e.type))&&(e.type?ge({type:e.type}):ge({url:e.url})||C.html5Only||e.url.match(/data:/i));return e},_e=function(e){var t;return e&&(t=!$e&&C.html5.canPlayType("audio/wav")?st:rt,e.src=t,e._called_unload!==yt)&&(e._called_load=!1),R&&(be=null),t},ge=function(e){if(!C.useHTML5Audio||!C.hasHTML5)return!1;var t,n,a,o=e.url||null,e=e.type||null,i=C.audioFormats;if(e&&C.html5[e]!==yt)return C.html5[e]&&!pt(e);if(!s){for(a in s=[],i)i.hasOwnProperty(a)&&(s.push(a),i[a].related)&&(s=s.concat(i[a].related));s=new RegExp("\\.("+s.join("|")+")(\\?.*)?$","i")}return(o=o?o.toLowerCase().match(s):null)&&o.length?o=o[1]:e?o=(-1!==(n=e.indexOf(";"))?e.substr(0,n):e).substr(6):t=!1,t=o&&C.html5[o]!==yt?C.html5[o]&&!pt(o):(t=C.html5.canPlayType({type:e="audio/"+o}),(C.html5[o]=t)&&C.html5[e]&&!pt(e))},we=function(){if(!C.useHTML5Audio||!C.hasHTML5)return C.html5.usingFlash=!0,!(h=!0);var e,t,n,i,r=Audio!==yt?Je&&opera.version()<10?new Audio(null):new Audio:null,a={};function o(e){var t,n,a=!1,o=!1;if(r&&"function"==typeof r.canPlayType)if(e instanceof Array){for(i=0,n=e.length;i<n;i++)(C.html5[e[i]]||r.canPlayType(e[i]).match(C.html5Test))&&(C.html5[e[i]]=o=!0,C.flash[e[i]]=!!e[i].match(it));a=o}else a=!(!(t=!(!r||"function"!=typeof r.canPlayType)&&r.canPlayType(e))||!t.match(C.html5Test));return a}for(e in n=C.audioFormats)if(n.hasOwnProperty(e)&&(t="audio/"+e,a[e]=o(n[e].type),a[t]=a[e],e.match(it)?(C.flash[e]=!0,C.flash[t]=!0):(C.flash[e]=!1,C.flash[t]=!1),n[e])&&n[e].related)for(i=n[e].related.length-1;0<=i;i--)a["audio/"+n[e].related[i]]=a[e],C.html5[n[e].related[i]]=a[e],C.flash[n[e].related[i]]=a[e];return a.canPlayType=r?o:null,C.html5=w(C.html5,a),C.html5.usingFlash=he(),h=C.html5.usingFlash,!0},g={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:u+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:d+"Verify that %s is a valid path.",tryDebug:"Try "+u+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:d+"Non-HTTP page ("+I.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:d+"Special case: Waiting for SWF to load with window focus...",waitForever:d+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:d+"Waiting for 100% SWF load...",needFunction:d+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:d+"_debug(): Current sound objects",waitOnload:d+"Waiting for window.onload()",docLoaded:d+"Document already loaded",onload:d+"initComplete(): calling soundManager.onload()",onloadOK:u+".onload() complete",didInit:d+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:d+"Failed to remove Flash node.",shutdown:u+".disable(): Shutting down",queue:d+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+O.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:d+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:u+".load(): current URL already assigned.",badFV:u+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:d+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:d+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:u+".setup(): allowed parameters: %s",setupError:u+'.setup(): "%s" cannot be assigned with this method.',setupUndef:u+'.setup(): Could not find option "%s"',setupLate:u+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:d+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:u+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},M=function(){var e,t,n=Xe.call(arguments),a=n.shift(),o=g&&g[a]?g[a]:"";if(o&&n&&n.length)for(e=0,t=n.length;e<t;e++)o=o.replace("%s",n[e]);return o},se=function(e){return 8===y&&1<e.loops&&e.stream&&(v("as2loop"),e.stream=!1),e},le=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(C._wD((t||"")+M("policy")),e.usePolicyFile=!0),e},P=function(e){tt&&console.warn!==yt?console.warn(e):C._wD(e)},U=function(){return!1},ne=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=U)},ae=function(e){e===yt&&(e=!1),(p||e)&&C.disable(e)},oe=function(e){if(e)if(e.match(/\.swf(\?.*)?$/i)){if(e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+C.movieURL,C.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},z=function(){8!==(y=parseInt(C.flashVersion,10))&&9!==y&&(C._wD(M("badFV",y,Ue)),C.flashVersion=y=Ue);var e=C.debugMode||C.debugFlash?"_debug.swf":".swf";C.useHTML5Audio&&!C.html5Only&&C.audioFormats.mp4.required&&y<9&&(C._wD(M("needfl9")),C.flashVersion=y=9),C.version=C.versionNumber+(C.html5Only?" (HTML5-only mode)":9===y?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<y?(C.defaultOptions=w(C.defaultOptions,C.flash9Options),C.features.buffering=!0,C.defaultOptions=w(C.defaultOptions,C.movieStarOptions),C.filePatterns.flash9=new RegExp("\\.(mp3|"+ct.join("|")+")(\\?.*)?$","i"),C.features.movieStar=!0):C.features.movieStar=!1,C.filePattern=C.filePatterns[8!==y?"flash9":"flash8"],C.movieURL=(8===y?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),C.features.peakData=C.features.waveformData=C.features.eqData=8<y},ee=function(e,t){E&&E._setPolling(e,t)},te=function(){var e,t,n,a,o;if((C.debugURLParam.test(Ie)&&(C.setupOptions.debugMode=C.debugMode=!0),!m(C.debugID))&&(C.debugMode&&!m(C.debugID)&&(!tt||!C.useConsole||!C.consoleOnly))){for(o in(e=I.createElement("div")).id=C.debugID+"-toggle",a={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(I.createTextNode("-")),e.onclick=re,e.title="Toggle SM2 debug console",x.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand"),a)a.hasOwnProperty(o)&&(e.style[o]=a[o]);if((t=I.createElement("div")).id=C.debugID,t.style.display=C.debugMode?"block":"none",C.debugMode&&!m(e.id)){try{(n=J()).appendChild(e)}catch(e){throw new Error(M("domError")+" \n"+e.toString())}n.appendChild(t)}}},T=this.getSoundById,v=function(e,t){return e?C._wD(M(e),t):""},re=function(){var e=m(C.debugID),t=m(C.debugID+"-toggle");e&&(Ne?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),Ne=!Ne)},_=function(e,t,n){if(gt.sm2Debugger!==yt)try{sm2Debugger.handleEvent(e,t,n)}catch(e){return!1}return!0},D=function(){var e=[];return C.debugMode&&e.push(O.sm2Debug),C.debugFlash&&e.push(O.flashDebug),C.useHighPerformance&&e.push(O.highPerf),e.join(" ")},ie=function(){var e=M("fbHandler"),t=C.getMoviePercent(),n=O,a={type:"FLASHBLOCK"};C.html5Only||(C.ok()?(C.didFlashBlock&&C._wD(e+": Unblocked"),C.oMC&&(C.oMC.className=[D(),n.swfDefault,n.swfLoaded+(C.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(h&&(C.oMC.className=D()+" "+n.swfDefault+" "+(null===t?n.swfTimedout:n.swfError),C._wD(e+": "+M("fbTimeout")+(t?" ("+M("fbLoaded")+")":""))),C.didFlashBlock=!0,o({type:"ontimeout",ignoreInit:!0,error:a}),b(a)))},q=function(e,t,n){c[e]===yt&&(c[e]=[]),c[e].push({method:t,scope:n||null,fired:!1})},o=function(e){if(e=e||{type:C.ok()?"onready":"ontimeout"},!f&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(C.ok()||p&&!e.ignoreInit))return!1;var t,n,a={success:e&&e.ignoreInit?C.ok():!p},o=e&&e.type&&c[e.type]||[],i=[],r=[a],s=h&&!C.ok();for(e.error&&(r[0].error=e.error),t=0,n=o.length;t<n;t++)!0!==o[t].fired&&i.push(o[t]);if(i.length)for(t=0,n=i.length;t<n;t++)i[t].scope?i[t].method.apply(i[t].scope,r):i[t].method.apply(this,r),s||(i[t].fired=!0);return!0},a=function(){gt.setTimeout(function(){C.useFlashBlock&&ie(),o(),"function"==typeof C.onload&&(v("onload",1),C.onload.apply(gt),v("onloadOK",1)),C.waitForWindowLoad&&S.add(gt,"load",a)},1)},Me=function(){if(l!==yt)return l;var t,n,e=!1,a=navigator,o=gt.ActiveXObject;try{n=a.plugins}catch(e){n=void 0}if(n&&n.length)n="application/x-shockwave-flash",(a=a.mimeTypes)&&a[n]&&a[n].enabledPlugin&&a[n].enabledPlugin.description&&(e=!0);else if(o!==yt&&!x.match(/MSAppHost/i)){try{t=new o("ShockwaveFlash.ShockwaveFlash")}catch(e){t=null}e=!!t,t=null}return l=e},he=function(){var e,t,n=C.audioFormats;if(Ye&&!!x.match(/os (1|2|3_0|3_1)\s/i)?(C.hasHTML5=!1,C.html5Only=!0,C.oMC&&(C.oMC.style.display="none")):C.useHTML5Audio&&(C.html5&&C.html5.canPlayType||(C._wD("SoundManager: No HTML5 Audio() support detected."),C.hasHTML5=!1),et)&&C._wD(d+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(l?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1),C.useHTML5Audio&&C.hasHTML5)for(t in pe=!0,n)n.hasOwnProperty(t)&&n[t].required&&(C.html5.canPlayType(n[t].type)?C.preferFlash&&(C.flash[t]||C.flash[n[t].type])&&(e=!0):e=!(pe=!1));return C.ignoreFlash&&(pe=!(e=!1)),C.html5Only=C.hasHTML5&&C.useHTML5Audio&&!e,!C.html5Only},fe=function(e){var t,n,a,o=0;if(e instanceof Array){for(t=0,n=e.length;t<n;t++)if(e[t]instanceof Object){if(C.canPlayMIME(e[t].type)){o=t;break}}else if(C.canPlayURL(e[t])){o=t;break}e[o].url&&(e[o]=e[o].url),a=e[o]}else a=e;return a},ue=function(e){e._hasTimer||(e._hasTimer=!0,!Ze&&C.html5PollingInterval&&(null===Qe&&0===qe&&(Qe=setInterval(ce,C.html5PollingInterval)),qe++))},de=function(e){e._hasTimer&&(e._hasTimer=!1,!Ze)&&C.html5PollingInterval&&qe--},ce=function(){var e;if(null===Qe||qe)for(e=C.soundIDs.length-1;0<=e;e--)C.sounds[C.soundIDs[e]].isHTML5&&C.sounds[C.soundIDs[e]]._hasTimer&&C.sounds[C.soundIDs[e]]._onTimer();else clearInterval(Qe),Qe=null},b=function(e){e=e!==yt?e:{},"function"==typeof C.onerror&&C.onerror.apply(gt,[{type:e.type!==yt?e.type:null}]),e.fatal!==yt&&e.fatal&&C.disable()},De=function(){if(et&&Me()){var e,t,n=C.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(C._wD(u+": Using flash fallback for "+t+" format"),C.html5[t]=!1,n[t])&&n[t].related)for(e=n[t].related.length-1;0<=e;e--)C.html5[n[t].related[e]]=!1}},this._setSandboxType=function(e){var t=C.sandbox;t.type=e,t.description=t.types[t.types[e]!==yt?e:"unknown"],"localWithFile"===t.type?(t.noRemote=!0,t.noLocal=!1,v("secNote",2)):"localWithNetwork"===t.type?(t.noRemote=!1,t.noLocal=!0):"localTrusted"===t.type&&(t.noRemote=!1,t.noLocal=!1)},this._externalInterfaceOK=function(e){var t;C.swfLoaded||(_("swf",!0),_("flashtojs",!0),C.swfLoaded=!0,at=!1,et&&De(),e&&e.replace(/\+dev/i,"")===C.versionNumber.replace(/\+dev/i,"")?setTimeout(j,F?100:1):(t=u+': Fatal: JavaScript file build "'+C.versionNumber+'" does not match Flash SWF build "'+e+'" at '+C.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(t)},0)))},Z=function(e,t){if(Re&&ke)return!1;function n(){var e=[],t=[],n="SoundManager "+C.version+(!C.html5Only&&C.useHTML5Audio?C.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");C.html5Only?C.html5PollingInterval&&e.push("html5PollingInterval ("+C.html5PollingInterval+"ms)"):(C.preferFlash&&e.push("preferFlash"),C.useHighPerformance&&e.push("useHighPerformance"),C.flashPollingInterval&&e.push("flashPollingInterval ("+C.flashPollingInterval+"ms)"),C.html5PollingInterval&&e.push("html5PollingInterval ("+C.html5PollingInterval+"ms)"),C.wmode&&e.push("wmode ("+C.wmode+")"),C.debugFlash&&e.push("debugFlash"),C.useFlashBlock&&e.push("flashBlock")),e.length&&(t=t.concat([e.join(" + ")])),C._wD(n+(t.length?" + "+t.join(", "):""),1),Oe()}if(C.html5Only)return z(),n(),C.oMC=m(C.movieID),j(),!(ke=Re=!0);var a,o,i,r,s,l,u,d=t||C.url,c=C.altURL||d,f=J(),p=(D(),I.getElementsByTagName("html")[0]);function h(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(p=p&&p.dir&&p.dir.match(/rtl/i),e=e===yt?C.id:e,z(),C.url=oe(lt?d:c),t=C.url,C.wmode=!C.wmode&&C.useHighPerformance?"transparent":C.wmode,null!==C.wmode&&(x.match(/msie 8/i)||!F&&!C.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(N.push(g.spcWmode),C.wmode=null),a={name:e,id:e,src:t,quality:"high",allowScriptAccess:C.allowScriptAccess,bgcolor:C.bgColor,pluginspage:ut+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:C.wmode,hasPriority:"true"},C.debugFlash&&(a.FlashVars="debug=1"),C.wmode||delete a.wmode,F)o=I.createElement("div"),r=['<object id="'+e+'" data="'+t+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',h("movie",t),h("AllowScriptAccess",C.allowScriptAccess),h("quality",a.quality),C.wmode?h("wmode",C.wmode):"",h("bgcolor",C.bgColor),h("hasPriority","true"),C.debugFlash?h("FlashVars",a.FlashVars):"","</object>"].join("");else for(i in o=I.createElement("embed"),a)a.hasOwnProperty(i)&&o.setAttribute(i,a[i]);if(te(),d=D(),f=J())if(C.oMC=m(C.movieID)||I.createElement("div"),C.oMC.id)c=C.oMC.className,C.oMC.className=(c?c+" ":O.swfDefault)+(d?" "+d:""),C.oMC.appendChild(o),F&&((s=C.oMC.appendChild(I.createElement("div"))).className=O.swfBox,s.innerHTML=r),ke=!0;else{if(C.oMC.id=C.movieID,C.oMC.className=O.swfDefault+" "+d,s=l=null,C.useFlashBlock||(C.useHighPerformance?l={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(l={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},p&&(l.left=Math.abs(parseInt(l.left,10))+"px"))),Ke&&(C.oMC.style.zIndex=1e4),!C.debugFlash)for(u in l)l.hasOwnProperty(u)&&(C.oMC.style[u]=l[u]);try{F||C.oMC.appendChild(o),f.appendChild(C.oMC),F&&((s=C.oMC.appendChild(I.createElement("div"))).className=O.swfBox,s.innerHTML=r),ke=!0}catch(e){throw new Error(M("domError")+" \n"+e.toString())}}return Re=!0,n(),!0},G=function(){return C.html5Only?(Z(),!1):!E&&(C.url?((E=C.getMovie(C.id))||(Be?(F?C.oMC.innerHTML=je:C.oMC.appendChild(Be),Re=!(Be=null)):Z(C.id,C.url),E=C.getMovie(C.id)),"function"==typeof C.oninitmovie&&setTimeout(C.oninitmovie,1),Pe(),!0):(v("noURL"),!1))},i=function(){setTimeout(Q,1e3)},X=function(){gt.setTimeout(function(){P(d+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),C.setup({preferFlash:!1}).reboot(),C.didFlashBlock=!0,C.beginDelayedInit()},1)},Q=function(){var e,t=!1;C.url&&!We&&(We=!0,S.remove(gt,"load",i),l&&at&&!nt?v("waitFocus"):(f||0<(e=C.getMoviePercent())&&e<100&&(t=!0),setTimeout(function(){e=C.getMoviePercent(),t?(We=!1,C._wD(M("waitSWF")),gt.setTimeout(i,1)):(f||(C._wD(u+": No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(C.debugFlash?" "+M("checkSWF"):""),2),!lt&&e&&(v("localFail",2),C.debugFlash||v("tryDebug",2)),0===e&&C._wD(M("swf404",C.url),1),_("flashtojs",!1,": Timed out"+(lt?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!f&&ot&&(null===e?C.useFlashBlock||0===C.flashLoadTimeout?(C.useFlashBlock&&ie(),v("waitForever")):!C.useFlashBlock&&pe?X():(v("waitForever"),o({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===C.flashLoadTimeout?v("waitForever"):!C.useFlashBlock&&pe?X():ae(!0)))},C.flashLoadTimeout)))},Y=function(){function e(){S.remove(gt,"focus",Y)}return nt||!at?e():(nt=ot=!0,v("gotFocus"),We=!1,i(),e()),!0},Pe=function(){N.length&&(C._wD("SoundManager 2: "+N.join(" "),1),N=[])},Oe=function(){Pe();var e,t=[];if(C.useHTML5Audio&&C.hasHTML5){for(e in C.audioFormats)C.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+C.html5[e]+(!C.html5[e]&&h&&C.flash[e]?" (using flash)":C.preferFlash&&C.flash[e]&&h?" (preferring flash)":C.html5[e]?"":" ("+(C.audioFormats[e].required?"required, ":"")+"and no flash support)"));C._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},n=function(e){var t,n;return!f&&(C.html5Only?(v("sm2Loaded",1),f=!0,a(),_("onload",!0),!0):(t=!0,C.useFlashBlock&&C.flashLoadTimeout&&!C.getMoviePercent()||(f=!0),n={type:!l&&h?"NO_FLASH":"INIT_TIMEOUT"},C._wD("SoundManager 2 "+(p?"failed to load":"loaded")+" ("+(p?"Flash security/load error":"OK")+") "+String.fromCharCode(p?10006:10003),p?2:1),p||e?(C.useFlashBlock&&C.oMC&&(C.oMC.className=D()+" "+(null===C.getMoviePercent()?O.swfTimedout:O.swfError)),o({type:"ontimeout",error:n,ignoreInit:!0}),_("onload",!1),b(n),t=!1):_("onload",!0),p||(C.waitForWindowLoad&&!Fe?(v("waitOnload"),S.add(gt,"load",a)):(C.waitForWindowLoad&&Fe&&v("docLoaded"),a())),t))},B=function(){var e,t=C.setupOptions;for(e in t)t.hasOwnProperty(e)&&(C[e]===yt?C[e]=t[e]:C[e]!==t[e]&&(C.setupOptions[e]=C[e]))},j=function(){if(f)return v("didInit"),!1;function e(){S.remove(gt,"load",C.beginDelayedInit)}if(C.html5Only)f||(e(),C.enabled=!0,n());else{G();try{E._externalInterfaceTest(!1),ee(!0,C.flashPollingInterval||(C.useHighPerformance?10:50)),C.debugMode||E._disableDebug(),C.enabled=!0,_("jstoflash",!0),C.html5Only||S.add(gt,"unload",U)}catch(e){return C._wD("js/flash exception: "+e.toString()),_("jstoflash",!1),b({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),ae(!0),n(),!1}n(),e()}return!0},r=function(){return!$&&($=!0,B(),te(),!l&&C.hasHTML5&&(C._wD("SoundManager 2: No Flash detected"+(C.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),C.setup({useHTML5Audio:!0,preferFlash:!1})),we(),!l&&h&&(N.push(g.needFlash),C.setup({flashLoadTimeout:1})),I.removeEventListener&&I.removeEventListener("DOMContentLoaded",r,!1),G(),!0)},ve=function(){return"complete"===I.readyState&&(r(),I.detachEvent("onreadystatechange",ve)),!0},K=function(){Fe=!0,r(),S.remove(gt,"load",K)},Me(),S.add(gt,"focus",Y),S.add(gt,"load",i),S.add(gt,"load",K),I.addEventListener?I.addEventListener("DOMContentLoaded",r,!1):I.attachEvent?I.attachEvent("onreadystatechange",ve):(_("onload",!1),b({type:"NO_DOM2_EVENTS",fatal:!0}))}gt.SM2_DEFER!==yt&&SM2_DEFER||(e=new t),"object"==typeof n&&n&&"object"==typeof n.exports&&(n.exports.SoundManager=t,n.exports.soundManager=e),gt.SoundManager=t,gt.soundManager=e}(window)},{}],2:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=l(e("react")),a=l(e("prop-types")),r=e("soundmanager2"),s=e("../../../sm/360-player/script/360player");function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n),t=(e=a?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.soundManager.setup({url:"plugins/editor.soundmanager/sm/swf/",debugMode:!0});e=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n,a=c(o);function o(e){var t;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");t=a.call(this,e),s.threeSixtyPlayer.config.autoPlay=e.autoPlay,s.threeSixtyPlayer.config.scaleFont=!navigator.userAgent.match(/msie/i),s.threeSixtyPlayer.config.showHMSTime=!0,s.threeSixtyPlayer.config.useWaveformData=!0,s.threeSixtyPlayer.config.useEQData=!0;e=e.onFinish;return e&&(s.threeSixtyPlayer.config.onfinish=e),s.threeSixtyPlayer.config.useWaveformData&&(r.soundManager.flash9Options.useWaveformData=!0),s.threeSixtyPlayer.config.useEQData&&(r.soundManager.flash9Options.useEQData=!0),s.threeSixtyPlayer.config.usePeakData&&(r.soundManager.flash9Options.usePeakData=!0),(s.threeSixtyPlayer.config.useWaveformData||s.threeSixtyPlayer.flash9Options.useEQData||s.threeSixtyPlayer.flash9Options.usePeakData)&&(r.soundManager.preferFlash=!0),window.location.href.match(/hifi/i)&&(s.threeSixtyPlayer.config.useFavIcon=!0),window.location.href.match(/html5/i)&&(r.soundManager.useHTML5Audio=!0),t}return t=o,(e=[{key:"componentDidMount",value:function(){r.soundManager.onready(s.threeSixtyPlayer.init)}},{key:"componentWillUnmount",value:function(){this.props.onFinish&&(s.threeSixtyPlayer.config.onfinish=null),r.soundManager.stopAll()}},{key:"componentWillReceiveProps",value:function(e){this.props.onFinish&&(s.threeSixtyPlayer.config.onfinish=this.props.onFinish),r.soundManager.onready(s.threeSixtyPlayer.init)}},{key:"render",value:function(){var e="ui360";return this.props.rich&&(e+=" ui360-vis"),i.default.createElement("div",{className:e,style:this.props.style},this.props.children)}}])&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.default.Component);e.propTypes={threeSixtyPlayer:a.default.object,autoPlay:a.default.bool,rich:a.default.bool.isRequired,onReady:a.default.func},e.defaultProps={autoPlay:!1,rich:!0},n.default=e,t.exports=n.default},{"../../../sm/360-player/script/360player":7,"prop-types":"prop-types",react:"react",soundmanager2:1}],3:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(a,n,i):a[n]=e[n])}a.default=e,t&&t.set(e,a);return a}(e("react")),s=a(e("./Player")),l=a(e("pydio/http/api"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(u=function(e){return e?n:t})(e))}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(n),t=(e=a?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=new ThreeSixtyPlayer,e=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e);var n,a=f(o);function o(){var e=this,t=o;if(e instanceof t)return a.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"componentDidMount",value:function(){this.loadNode(this.props),p.init()}},{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this,n=e.node;l.default.getClient().buildPresignedGetUrl(n,function(e){t.setState({url:e,mimeType:"audio/"+n.getAjxpMime()})},"audio/"+n.getAjxpMime())}},{key:"render",value:function(){var e=this.state||{},t=e.mimeType,e=e.url;return e?i.default.createElement(s.default,{rich:!1,style:{width:40,height:40,margin:"auto"},onReady:function(){}},i.default.createElement("a",{type:t,href:e})):null}}])&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.Component);n.default=e,t.exports=n.default},{"./Player":2,"pydio/http/api":"pydio/http/api",react:"react"}],4:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=d(e("pydio")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(a,n,i):a[n]=e[n])}a.default=e,t&&t.set(e,a);return a}(e("react")),o=e("react-redux"),s=(e("redux"),e("material-ui")),l=d(e("./Player"));function u(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(u=function(e){return e?n:t})(e))}function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=h(n),t=(e=a?(e=h(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){return-1<v.mimes.indexOf(e.getAjxpMime())}var g=e("pydio/http/api"),e=a.default.requireLib("hoc"),y=e.withSelection,_=e.EditorActions,v=(e.withMenu,e.withLoader,e.withErrors,e.withControls,a.default.getInstance().Registry.getActiveExtensionByType("editor").filter(function(e){return"editor.soundmanager"===e.id})[0]),w={container:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1},player:{margin:"auto"},table:{width:320}},a=y(function(a){return new Promise(function(e,t){var n=[];a.getParent().getChildren().forEach(function(e){return n.push(e)}),e({selection:n=n.filter(m).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel(),void 0,{numeric:!0})}),currentIndex:n.reduce(function(e,t,n){return t===a&&n||e},0)})})})(e=(0,o.connect)(null,_)(e=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var n,a=p(o);function o(){var e=this,t=o;if(e instanceof t)return a.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"componentDidMount",value:function(){this.loadNode(this.props);var e=this.props.editorModify;this.props.isActive&&e({fixedToolbar:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.editorModify;e.isActive&&n({fixedToolbar:!1}),e.node!==this.props.node&&this.setState({url:""},function(){t.loadNode(e)})}},{key:"loadNode",value:function(e){var t=this,n=e.node;g.getClient().buildPresignedGetUrl(n,function(e){t.setState({node:n,url:e,mimeType:"audio/"+n.getAjxpMime()})},"audio/"+n.getAjxpMime())}},{key:"playNext",value:function(){var e=this.props.selection,t=this.state.node,t=e.selection.indexOf(t);t<e.selection.length-1&&this.onRowSelection([t+1])}},{key:"onRowSelection",value:function(e){var t,n=this;e.length&&(t=this.props.selection)&&this.setState({url:null},function(){n.loadNode({node:t.selection[e[0]]})})}},{key:"render",value:function(){var t=this,e=this.state||{},n=e.mimeType,a=e.url,o=e.node;return i.default.createElement("div",{style:w.container},i.default.createElement(s.Paper,{zDepth:3,style:w.player},i.default.createElement("div",{style:{padding:"0 60px"}},a&&i.default.createElement(l.default,{autoPlay:!0,rich:!this.props.icon&&this.props.rich,onReady:this.props.onLoad,onFinish:function(){t.playNext()}},i.default.createElement("a",{type:n,href:a}))),i.default.createElement("div",{style:{clear:"both"}},i.default.createElement(s.Table,{style:w.table,selectable:!0,multiSelectable:!1,height:250,onRowSelection:function(e){t.onRowSelection(e)}},i.default.createElement(s.TableBody,{displayRowCheckbox:!1,stripedRows:!1,deselectOnClickaway:!1},this.props.selection&&this.props.selection.selection.map(function(e,t){return i.default.createElement(s.TableRow,{key:t},i.default.createElement(s.TableRowColumn,{style:{width:16,backgroundColor:"white"}},o&&e.getPath()===o.getPath()?i.default.createElement("span",{className:"mdi mdi-play"}):t),i.default.createElement(s.TableRowColumn,{style:{backgroundColor:"white"}},e.getLabel()))}))))))}}])&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.Component))||e)||e;n.default=a,t.exports=n.default},{"./Player":2,"material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react","react-redux":"react-redux",redux:"redux"}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Badge",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"Editor",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"Panel",{enumerable:!0,get:function(){return o.default}});var a=r(e("./badge")),o=r(e("./preview")),i=r(e("./editor"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./badge":3,"./editor":4,"./preview":6}],6:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(a,n,i):a[n]=e[n])}a.default=e,t&&t.set(e,a);return a}(e("react")),s=(a=e("./Player"))&&a.__esModule?a:{default:a};function l(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(l=function(e){return e?n:t})(e))}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(n),t=(e=a?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("pydio/http/api"),a=(new ThreeSixtyPlayer,function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var n,a=c(o);function o(){var e=this,t=o;if(e instanceof t)return a.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"componentDidMount",value:function(){this.loadNode(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.loadNode(e)}},{key:"loadNode",value:function(e){var t=this,e=e.node,n="audio/"+e.getAjxpMime();f.getClient().buildPresignedGetUrl(e,function(e){t.setState({url:e,mimeType:n})},n),this.setState({url:e.getPath(),mimeType:"audio/"+e.getAjxpMime()})}},{key:"render",value:function(){var e=this.state||{},t=e.mimeType,e=e.url;return e?i.default.createElement(s.default,{rich:!0,style:{margin:"auto"},onReady:function(){}},i.default.createElement("a",{type:t,href:e})):null}}])&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.Component));n.default=a,t.exports=n.default},{"./Player":2,"pydio/http/api":"pydio/http/api",react:"react"}],7:[function(e,t,n){var a,h;function o(){var m=this,t=this,g=soundManager,e=navigator.userAgent,f=e.match(/msie/i),u=e.match(/opera/i),d=e.match(/safari/i),n=e.match(/chrome/i),p=(e.match(/firefox/i),e.match(/ipad|iphone/i)),a=void 0===h.G_vmlCanvasManager&&void 0!==document.createElement("canvas").getContext("2d"),o=u||n?359.9:360;this.excludeClass="threesixty-exclude",this.links=[],this.sounds=[],this.soundsByURL={},this.indexByURL={},this.lastSound=null,this.lastTouchedSound=null,this.soundCount=0,this.oUITemplate=null,this.oUIImageMap=null,this.vuMeter=null,this.callbackCount=0,this.peakDataHistory=[],this.config={playNext:!1,autoPlay:!1,allowMultiple:!1,loadRingColor:"#ccc",playRingColor:"#000",backgroundRingColor:"#eee",segmentRingColor:"rgba(255,255,255,0.33)",segmentRingColorAlt:"rgba(0,0,0,0.1)",loadRingColorMetadata:"#ddd",playRingColorMetadata:"rgba(128,192,256,0.9)",circleDiameter:null,circleRadius:null,animDuration:500,animTransition:h.Animator.tx.bouncy,showHMSTime:!1,scaleFont:!0,useWaveformData:!1,waveformDataColor:"#0099ff",waveformDataDownsample:3,waveformDataOutside:!1,waveformDataConstrain:!1,waveformDataLineRatio:.64,useEQData:!1,eqDataColor:"#339933",eqDataDownsample:4,eqDataOutside:!0,eqDataLineRatio:.54,usePeakData:!0,peakDataColor:"#ff33ff",peakDataOutside:!0,peakDataLineRatio:.5,useAmplifier:!0,fontSizeMax:null,useFavIcon:!1},this.css={sDefault:"sm2_link",sBuffering:"sm2_buffering",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler=void 0!==h.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},this.removeEventHandler=void 0!==h.removeEventListener?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)},this.hasClass=function(e,t){return void 0!==e.className&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},this.addClass=function(e,t){if(!e||!t||m.hasClass(e,t))return!1;e.className=(e.className?e.className+" ":"")+t},this.removeClass=function(e,t){if(!e||!t||!m.hasClass(e,t))return!1;e.className=e.className.replace(new RegExp("( "+t+")|("+t+")","g"),"")},this.getElementsByClassName=function(e,t,n){var a,o,i=n||document,r=[],s=[];if(void 0!==t&&"string"!=typeof t)for(a=t.length;a--;)s&&s[t[a]]||(s[t[a]]=i.getElementsByTagName(t[a]));else s=t?i.getElementsByTagName(t):i.all||i.getElementsByTagName("*");if("string"!=typeof t)for(a=t.length;a--;)for(o=s[t[a]].length;o--;)m.hasClass(s[t[a]][o],e)&&r.push(s[t[a]][o]);else for(a=0;a<s.length;a++)m.hasClass(s[a],e)&&r.push(s[a]);return r},this.getParentByNodeName=function(e,t){if(!e||!t)return!1;for(t=t.toLowerCase();e.parentNode&&t!==e.parentNode.nodeName.toLowerCase();)e=e.parentNode;return e.parentNode&&t===e.parentNode.nodeName.toLowerCase()?e.parentNode:null},this.getParentByClassName=function(e,t){if(!e||!t)return!1;for(;e.parentNode&&!m.hasClass(e.parentNode,t);)e=e.parentNode;return e.parentNode&&m.hasClass(e.parentNode,t)?e.parentNode:null},this.getSoundByURL=function(e){return void 0!==m.soundsByURL[e]?m.soundsByURL[e]:null},this.isChildOfNode=function(e,t){if(!e||!e.parentNode)return!1;for(t=t.toLowerCase();(e=e.parentNode)&&e.parentNode&&e.nodeName.toLowerCase()!==t;);return e&&e.nodeName.toLowerCase()===t?e:null},this.isChildOfClass=function(e,t){if(!e||!t)return!1;for(;e.parentNode&&!m.hasClass(e,t);)e=m.findParent(e);return m.hasClass(e,t)},this.findParent=function(e){if(!e||!e.parentNode)return!1;if(2===(e=e.parentNode).nodeType)for(;e&&e.parentNode&&2===e.parentNode.nodeType;)e=e.parentNode;return e},this.getStyle=function(e,t){try{if(e.currentStyle)return e.currentStyle[t];if(h.getComputedStyle)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(e){}return null},this.findXY=function(e){for(var t=0,n=0;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);return[t,n]},this.getMouseXY=function(e){return e=e||h.event,(e=p&&e.touches?e.touches[0]:e).pageX||e.pageY?[e.pageX,e.pageY]:e.clientX||e.clientY?[e.clientX+m.getScrollLeft(),e.clientY+m.getScrollTop()]:void 0},this.getScrollLeft=function(){return document.body.scrollLeft+document.documentElement.scrollLeft},this.getScrollTop=function(){return document.body.scrollTop+document.documentElement.scrollTop},this.events={play:function(){t.config.onplay&&t.config.onplay(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=t.css.sPlaying,t.addClass(this._360data.oUIBox,this._360data.className),m.fanOut(this)},stop:function(){t.config.onstop&&t.config.onstop(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",m.fanIn(this)},pause:function(){t.config.onpause&&t.config.onpause(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=t.css.sPaused,t.addClass(this._360data.oUIBox,this._360data.className)},resume:function(){t.config.onresume&&t.config.onresume(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=t.css.sPlaying,t.addClass(this._360data.oUIBox,this._360data.className)},finish:function(){var e;t.config.onfinish&&t.config.onfinish(this),t.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",this._360data.didFinish=!0,m.fanIn(this),t.config.playNext&&(e=t.indexByURL[this._360data.oLink.href]+1)<t.links.length&&t.handleClick({target:t.links[e]})},whileloading:function(){this.paused&&m.updatePlaying.apply(this)},whileplaying:function(){m.updatePlaying.apply(this),this._360data.fps++},bufferchange:function(){this.isBuffering?t.addClass(this._360data.oUIBox,t.css.sBuffering):t.removeClass(this._360data.oUIBox,t.css.sBuffering)}},this.stopEvent=function(e){return void 0!==e&&void 0!==e.preventDefault?e.preventDefault():void 0!==h.event&&void 0!==h.event.returnValue&&(h.event.returnValue=!1),!1},this.getTheDamnLink=f?function(e){return e&&e.target?e.target:h.event.srcElement}:function(e){return e.target},this.handleClick=function(e){var t,n,a,o,i,r;return 1<e.button||"a"!==(t=m.getTheDamnLink(e)).nodeName.toLowerCase()&&!(t=m.isChildOfNode(t,"a"))||!(m.isChildOfClass(t,"ui360")&&(t.getAttribute("href"),t.href)&&g.canPlayLink(t)&&!m.hasClass(t,m.excludeClass)&&(g._writeDebug("handleClick()"),n=t.href,(a=m.getSoundByURL(n))?a===m.lastSound?a.togglePause():(a.togglePause(),g._writeDebug("sound different than last sound: "+m.lastSound.sID),!m.config.allowMultiple&&m.lastSound&&m.stopSound(m.lastSound)):(o=t.parentNode,i=m.getElementsByClassName("ui360-vis","div",o.parentNode).length,a=g.createSound({id:"ui360Sound_"+parseInt(1e7*Math.random()),url:n,onplay:m.events.play,onstop:m.events.stop,onpause:m.events.pause,onresume:m.events.resume,onfinish:m.events.finish,onbufferchange:m.events.bufferchange,whileloading:m.events.whileloading,whileplaying:m.events.whileplaying,useWaveformData:i&&m.config.useWaveformData,useEQData:i&&m.config.useEQData,usePeakData:i&&m.config.usePeakData}),r=parseInt(m.getElementsByClassName("sm2-360ui","div",o)[0].offsetWidth,10),a._360data={oUI360:m.getParentByClassName(t,"ui360"),oLink:t,className:m.css.sPlaying,oUIBox:m.getElementsByClassName("sm2-360ui","div",o)[0],oCanvas:m.getElementsByClassName("sm2-canvas","canvas",o)[0],oButton:m.getElementsByClassName("sm2-360btn","span",o)[0],oTiming:m.getElementsByClassName("sm2-timing","div",o)[0],oCover:m.getElementsByClassName("sm2-cover","div",o)[0],circleDiameter:r,circleRadius:r/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:m.config.fontSizeMax,scaleFont:i&&m.config.scaleFont,showHMSTime:i,amplifier:i&&m.config.usePeakData?.9:1,radiusMax:.175*r,width:0,widthMax:.4*r,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:!1,oAnim:new h.Animator({duration:m.config.animDuration,transition:m.config.animTransition,onComplete:function(){}}),oAnimProgress:function(e){var t=this;t._360data.radius=parseInt(t._360data.radiusMax*t._360data.amplifier*e,10),t._360data.width=parseInt(t._360data.widthMax*t._360data.amplifier*e,10),t._360data.scaleFont&&null!==t._360data.fontSizeMax&&(t._360data.oTiming.style.fontSize=parseInt(Math.max(1,t._360data.fontSizeMax*e),10)+"px",t._360data.oTiming.style.opacity=e),!t.paused&&0!==t.playState&&0!==t._360data.lastValues.bytesLoaded&&0!==t._360data.lastValues.position||m.updatePlaying.apply(t)},fps:0},void 0!==m.Metadata&&m.getElementsByClassName("metadata","div",a._360data.oUI360).length&&(a._360data.metadata=new m.Metadata(a,m)),a._360data.scaleFont&&null!==a._360data.fontSizeMax&&(a._360data.oTiming.style.fontSize="1px"),a._360data.oAnim.addSubject(a._360data.oAnimProgress,a),m.refreshCoords(a),m.updatePlaying.apply(a),m.soundsByURL[n]=a,m.sounds.push(a),!m.config.allowMultiple&&m.lastSound&&m.stopSound(m.lastSound),a.play()),m.lastSound=a,void 0!==e&&void 0!==e.preventDefault?e.preventDefault():void 0!==h.event&&(h.event.returnValue=!1),1))},this.fanOut=function(e){var t=e;if(1===t._360data.animating)return!1;t._360data.animating=0,soundManager._writeDebug("fanOut: "+t.sID+": "+t._360data.oLink.href),t._360data.oAnim.seekTo(1),h.setTimeout(function(){t._360data.animating=0},m.config.animDuration+20)},this.fanIn=function(e){var t=e;if(-1===t._360data.animating)return!1;t._360data.animating=-1,soundManager._writeDebug("fanIn: "+t.sID+": "+t._360data.oLink.href),t._360data.oAnim.seekTo(0),h.setTimeout(function(){t._360data.didFinish=!1,t._360data.animating=0,m.resetLastValues(t)},m.config.animDuration+20)},this.resetLastValues=function(e){e._360data.lastValues.position=0},this.refreshCoords=function(e){e._360data.canvasXY=m.findXY(e._360data.oCanvas),e._360data.canvasMid=[e._360data.circleRadius,e._360data.circleRadius],e._360data.canvasMidXY=[e._360data.canvasXY[0]+e._360data.canvasMid[0],e._360data.canvasXY[1]+e._360data.canvasMid[1]]},this.stopSound=function(e){soundManager._writeDebug("stopSound: "+e.sID),soundManager.stop(e.sID),p||soundManager.unload(e.sID)},this.buttonClick=function(e){e=e?e.target||e.srcElement:h.event.srcElement;return m.handleClick({target:m.getParentByClassName(e,"sm2-360ui").nextSibling}),!1},this.buttonMouseDown=function(e){return p?m.addEventHandler(document,"touchmove",m.mouseDown):document.onmousemove=function(e){m.mouseDown(e)},m.stopEvent(e),!1},this.mouseDown=function(e){var t;return!p&&1<e.button||(m.lastSound&&(t=e||h.event,t=(t=p&&t.touches?t.touches[0]:t).target||t.srcElement,t=m.getSoundByURL(m.getElementsByClassName("sm2_link","a",m.getParentByClassName(t,"ui360"))[0].href),m.lastTouchedSound=t,m.refreshCoords(t),t=t._360data,m.addClass(t.oUIBox,"sm2_dragging"),t.pauseCount=m.lastTouchedSound.paused?1:0,m.mmh(e||h.event),p?(m.removeEventHandler(document,"touchmove",m.mouseDown),m.addEventHandler(document,"touchmove",m.mmh),m.addEventHandler(document,"touchend",m.mouseUp)):(document.onmousemove=m.mmh,document.onmouseup=m.mouseUp)),m.stopEvent(e),!1)},this.mouseUp=function(e){var t=m.lastTouchedSound._360data;m.removeClass(t.oUIBox,"sm2_dragging"),0===t.pauseCount&&m.lastTouchedSound.resume(),p?(m.removeEventHandler(document,"touchmove",m.mmh),m.removeEventHandler(document,"touchend",m.mouseUP)):(document.onmousemove=null,document.onmouseup=null)},this.mmh=function(e){void 0===e&&(e=h.event);var t=m.lastTouchedSound,n=m.getMouseXY(e),a=n[0],n=n[1],a=a-t._360data.canvasMidXY[0],n=n-t._360data.canvasMidXY[1],a=Math.floor(o-(m.rad2deg(Math.atan2(a,n))+180));return t.setPosition(t.durationEstimate*(a/o)),m.stopEvent(e),!1},this.drawSolidArc=function(e,t,n,a,o,i,r){var s,l=e;e=s=l.getContext?l.getContext("2d"):s,r||m.clearCanvas(l),t&&(s.fillStyle=t),e.beginPath(),isNaN(o)&&(o=0),r=n-a,(!(u||d)||0<n)&&(e.arc(0,0,n,i,o,!1),l=m.getArcEndpointCoords(r,o),e.lineTo(l.x,l.y),e.arc(0,0,r,o,i,!0),e.closePath(),e.fill())},this.getArcEndpointCoords=function(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}},this.deg2rad=function(e){return e*Math.PI/180},this.rad2deg=function(e){return 180*e/Math.PI},this.getTime=function(e,t){var e=Math.floor(e/1e3),n=Math.floor(e/60),e=e-60*n;return t?n+":"+(e<10?"0"+e:e):{min:n,sec:e}},this.clearCanvas=function(e){var t,n=null;e.getContext&&(n=e.getContext("2d")),t=e.offsetWidth,e=e.offsetHeight,n.clearRect(-t/2,-e/2,t,e)},this.updatePlaying=function(){var e=this._360data.showHMSTime?m.getTime(this.position,!0):parseInt(this.position/1e3,10);this.bytesLoaded&&(this._360data.lastValues.bytesLoaded=this.bytesLoaded,this._360data.lastValues.bytesTotal=this.bytesTotal),this.position&&(this._360data.lastValues.position=this.position),this.durationEstimate&&(this._360data.lastValues.durationEstimate=this.durationEstimate),m.drawSolidArc(this._360data.oCanvas,m.config.backgroundRingColor,this._360data.width,this._360data.radius,m.deg2rad(o),!1),m.drawSolidArc(this._360data.oCanvas,this._360data.metadata?m.config.loadRingColorMetadata:m.config.loadRingColor,this._360data.width,this._360data.radius,m.deg2rad(o*(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal)),0,!0),0!==this._360data.lastValues.position&&m.drawSolidArc(this._360data.oCanvas,this._360data.metadata?m.config.playRingColorMetadata:m.config.playRingColor,this._360data.width,this._360data.radius,m.deg2rad(1===this._360data.didFinish?o:o*(this._360data.lastValues.position/this._360data.lastValues.durationEstimate)),0,!0),this._360data.metadata&&this._360data.metadata.events.whileplaying(),e!==this._360data.lastTime&&(this._360data.lastTime=e,this._360data.oTiming.innerHTML=e),(this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&a&&m.updateWaveform(this),m.config.useFavIcon&&m.vuMeter&&m.vuMeter.updateVU(this)},this.updateWaveform=function(e){if(!m.config.useWaveformData&&!m.config.useEQData||!g.features.waveformData&&!g.features.eqData)return!1;if(!e.waveformData.left.length&&!e.eqData.length&&!e.peakData.left)return!1;e._360data.oCanvas.getContext("2d");var t,n,a,o,i,r,s,l,u,d,c,f,p=parseInt(e._360data.circleDiameter/2,10),h=p/2;if(m.config.useWaveformData)for(a=m.config.waveformDataDownsample,a=Math.max(1,a),r=i=0,s=null,l=m.config.waveformDataOutside?1:m.config.waveformDataConstrain?.5:.565,h=m.config.waveformDataOutside?.7:.75,u=m.deg2rad(360/(o=256/a)*m.config.waveformDataLineRatio),t=0;t<256;t+=a)r=(i=m.deg2rad(t/o*1/a*360))+u,(s=e.waveformData.left[t])<0&&m.config.waveformDataConstrain&&(s=Math.abs(s)),m.drawSolidArc(e._360data.oCanvas,m.config.waveformDataColor,e._360data.width*l,e._360data.radius*h*1.25*s,r,i,!0);if(m.config.useEQData)for(a=m.config.eqDataDownsample,a=Math.max(1,a),l=m.config.eqDataOutside?1:.565,n=m.config.eqDataOutside?-1:1,h=m.config.eqDataOutside?.5:.75,r=i=0,u=m.deg2rad(360/(o=(d=192)/a)*m.config.eqDataLineRatio),c=m.deg2rad(1===e._360data.didFinish?360:e._360data.lastValues.position/e._360data.lastValues.durationEstimate*360),t=0;t<d;t+=a)i=m.deg2rad(t/d*360),m.drawSolidArc(e._360data.oCanvas,c<(r=i+u)?m.config.eqDataColor:m.config.playRingColor,e._360data.width*l,e._360data.radius*h*(e.eqData.left[t]*n),r,i,!0);if(m.config.usePeakData&&!e._360data.animating){for(f=e.peakData.left||e.peakData.right,d=3,t=0;t<d;t++)f=f||e.eqData[t];e._360data.amplifier=m.config.useAmplifier?.9+.1*f:1,e._360data.radiusMax=.175*e._360data.circleDiameter*e._360data.amplifier,e._360data.widthMax=.4*e._360data.circleDiameter*e._360data.amplifier,e._360data.radius=parseInt(e._360data.radiusMax*e._360data.amplifier,10),e._360data.width=parseInt(e._360data.widthMax*e._360data.amplifier,10)}},this.getUIHTML=function(e){return['<canvas class="sm2-canvas" width="'+e+'" height="'+e+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?" alignTweak":"")+'"></div>',' <div class="sm2-cover"></div>']},this.uiTest=function(e){var t,n,a,o=document.createElement("div");return o.className="sm2-360ui",(t=document.createElement("div")).className="ui360"+(e?" "+e:""),e=t.appendChild(o.cloneNode(!0)),t.style.position="absolute",t.style.left="-9999px",o=document.body.appendChild(t),n=e.offsetWidth,n=m.getUIHTML(n),e.innerHTML=n[1]+n[2]+n[3],n=parseInt(e.offsetWidth,10),a=parseInt(n/2,10),o=m.getElementsByClassName("sm2-timing","div",o)[0],o=parseInt(m.getStyle(o,"font-size"),10),isNaN(o)&&(o=null),t.parentNode.removeChild(t),t=e=null,{circleDiameter:n,circleRadius:a,fontSizeMax:o}},this.init=function(){var e;g._writeDebug("threeSixtyPlayer.init()");for(var t,n,a,o,i,r,s,l=[],u=0,d=0,c=(e=m.config.items||m.getElementsByClassName("ui360","div")).length;d<c;d++)l.push(e[d].getElementsByTagName("a")[0]),e[d].style.backgroundImage="none";for(m.oUITemplate=document.createElement("div"),m.oUITemplate.className="sm2-360ui",m.oUITemplateVis=document.createElement("div"),m.oUITemplateVis.className="sm2-360ui",a=m.uiTest(),m.config.circleDiameter=a.circleDiameter,m.config.circleRadius=a.circleRadius,o=m.uiTest("ui360-vis"),m.config.fontSizeMax=o.fontSizeMax,m.oUITemplate.innerHTML=m.getUIHTML(m.config.circleDiameter).join(""),m.oUITemplateVis.innerHTML=m.getUIHTML(o.circleDiameter).join(""),d=0,c=l.length;d<c;d++)!g.canPlayLink(l[d])||m.hasClass(l[d],m.excludeClass)||m.hasClass(l[d],m.css.sDefault)||(m.addClass(l[d],m.css.sDefault),m.links[u]=l[d],m.indexByURL[l[d].href]=u,u++,t=((i=m.hasClass(l[d].parentNode,"ui360-vis"))?o:a).circleDiameter,n=(i?o:a).circleRadius,i=l[d].parentNode.insertBefore((i?m.oUITemplateVis:m.oUITemplate).cloneNode(!0),l[d]),t=f&&void 0!==h.G_vmlCanvasManager?(l[d].parentNode,(r=document.createElement("canvas")).className="sm2-canvas",s="sm2_canvas_"+parseInt(1048576*Math.random(),10),r.id=s,r.width=t,r.height=t,i.appendChild(r),h.G_vmlCanvasManager.initElement(r),document.getElementById(s)):l[d].parentNode.getElementsByTagName("canvas")[0],i=m.getElementsByClassName("sm2-cover","div",l[d].parentNode)[0],r=l[d].parentNode.getElementsByTagName("span")[0],m.addEventHandler(r,"click",m.buttonClick),p?m.addEventHandler(i,"touchstart",m.mouseDown):m.addEventHandler(i,"mousedown",m.mouseDown),(s=t.getContext("2d")).translate(n,n),s.rotate(m.deg2rad(-90)));0<u&&(m.addEventHandler(document,"click",m.handleClick),m.config.autoPlay)&&m.handleClick({target:m.links[0],preventDefault:function(){}}),g._writeDebug("threeSixtyPlayer.init(): Found "+u+" relevant items."),m.config.useFavIcon&&void 0!==this.VUMeter&&(this.vuMeter=new this.VUMeter(this))}}h=window,o.prototype.VUMeter=function(e){var n=e,i=this,a=document.getElementsByTagName("head")[0],t=navigator.userAgent.match(/opera/i),o=navigator.userAgent.match(/firefox/i);this.vuMeterData=[],this.vuDataCanvas=null,this.setPageIcon=function(e){if(!n.config.useFavIcon||!n.config.usePeakData||!e)return!1;var t=document.getElementById("sm2-favicon");t&&(a.removeChild(t),t=null),t||((t=document.createElement("link")).id="sm2-favicon",t.rel="shortcut icon",t.type="image/png",t.href=e,document.getElementsByTagName("head")[0].appendChild(t))},this.resetPageIcon=function(){if(!n.config.useFavIcon)return!1;var e=document.getElementById("favicon");e&&(e.href="/favicon.ico")},this.updateVU=function(e){9<=soundManager.flashVersion&&n.config.useFavIcon&&n.config.usePeakData&&i.setPageIcon(i.vuMeterData[parseInt(16*e.peakData.left,10)][parseInt(16*e.peakData.right,10)])},this.createVUData=function(){var e=0,t=0,n=i.vuDataCanvas.getContext("2d"),a=n.createLinearGradient(0,16,0,0),o=n.createLinearGradient(0,16,0,0);for(a.addColorStop(0,"rgb(0,192,0)"),a.addColorStop(.3,"rgb(0,255,0)"),a.addColorStop(.625,"rgb(255,255,0)"),a.addColorStop(.85,"rgb(255,0,0)"),o.addColorStop(0,"rgba(0,0,0,0.2)"),o.addColorStop(1,"rgba(0,0,0,0.5)"),e=0;e<16;e++)i.vuMeterData[e]=[];for(e=0;e<16;e++)for(t=0;t<16;t++)i.vuDataCanvas.setAttribute("width",16),i.vuDataCanvas.setAttribute("height",16),n.fillStyle=o,n.fillRect(0,0,7,15),n.fillRect(8,0,7,15),n.fillStyle=a,n.fillRect(0,15-e,7,16-(16-e)),n.fillRect(8,15-t,7,16-(16-t)),n.clearRect(0,3,16,1),n.clearRect(0,7,16,1),n.clearRect(0,11,16,1),i.vuMeterData[e][t]=i.vuDataCanvas.toDataURL("image/png")},this.testCanvas=function(){var e=document.createElement("canvas");if(!e||void 0===e.getContext)return null;if(!e.getContext("2d")||"function"!=typeof e.toDataURL)return null;try{e.toDataURL("image/png")}catch(e){return null}return e},this.init=function(){n.config.useFavIcon&&(i.vuDataCanvas=i.testCanvas(),i.vuDataCanvas&&(o||t)?i.createVUData():n.config.useFavIcon=!1)},this.init()},o.prototype.Metadata=function(r,s){soundManager._wD("Metadata()");var e,l=this,t=r._360data.oUI360,n=t.getElementsByTagName("ul")[0].getElementsByTagName("li");navigator.userAgent.match(/firefox/i);for(this.lastWPExec=0,this.refreshInterval=250,this.totalTime=0,this.events={whileplaying:function(){for(var e,t=r._360data.width,n=r._360data.radius,a=r.durationEstimate||1e3*l.totalTime,o=0,i=l.data.length;o<i;o++)s.drawSolidArc(r._360data.oCanvas,o%2==0?s.config.segmentRingColorAlt:s.config.segmentRingColor,t,n/2,s.deg2rad(l.data[o].endTimeMS/a*360),s.deg2rad((l.data[o].startTimeMS||1)/a*360),!0);(e=new Date)-l.lastWPExec>l.refreshInterval&&(l.refresh(),l.lastWPExec=e)}},this.refresh=function(){for(var e=null,t=r.position,n=r._360data.metadata.data,a=0,o=n.length;a<o;a++)if(t>=n[a].startTimeMS&&t<=n[a].endTimeMS){e=a;break}e!==n.currentItem&&e<n.length&&(r._360data.oLink.innerHTML=n.mainTitle+' <span class="metadata"><span class="sm2_divider"> | </span><span class="sm2_metadata">'+n[e].title+"</span></span>",n.currentItem=e)},this.strToTime=function(e){for(var t=e.split(":"),n=0,a=t.length;a--;)n+=parseInt(t[a],10)*Math.pow(60,t.length-1-a);return n},this.data=[],this.data.givenDuration=null,this.data.currentItem=null,this.data.mainTitle=r._360data.oLink.innerHTML,e=0;e<n.length;e++)this.data[e]={o:null,title:n[e].getElementsByTagName("p")[0].innerHTML,startTime:n[e].getElementsByTagName("span")[0].innerHTML,startSeconds:l.strToTime(n[e].getElementsByTagName("span")[0].innerHTML.replace(/[()]/g,"")),duration:0,durationMS:null,startTimeMS:null,endTimeMS:null,oNote:null};for(t=s.getElementsByClassName("duration","div",t),this.data.givenDuration=t.length?1e3*l.strToTime(t[0].innerHTML):0,e=0;e<this.data.length;e++)this.data[e].duration=parseInt(this.data[e+1]?this.data[e+1].startSeconds:(l.data.givenDuration||r.durationEstimate)/1e3,10)-this.data[e].startSeconds,this.data[e].startTimeMS=1e3*this.data[e].startSeconds,this.data[e].durationMS=1e3*this.data[e].duration,this.data[e].endTimeMS=this.data[e].startTimeMS+this.data[e].durationMS,this.totalTime+=this.data[e].duration},navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)&&(soundManager.useHTML5Audio=!0),soundManager.debugMode=!1,soundManager.consoleOnly=!0,soundManager.flashVersion=9,soundManager.useHighPerformance=!0,soundManager.useFlashBlock=!0,soundManager.flashLoadTimeout=0,soundManager.debugMode&&h.setInterval(function(){var e=h.threeSixtyPlayer;e&&e.lastSound&&e.lastSound._360data.fps&&void 0===h.isHome&&(soundManager._writeDebug("fps: ~"+e.lastSound._360data.fps),e.lastSound._360data.fps=0)},1e3),void 0!==h.SM2_DEFER&&SM2_DEFER||(a=new o),"object"==typeof t&&t&&"object"==typeof t.exports&&(t.exports.ThreeSixtyPlayer=o,t.exports.threeSixtyPlayer=a),h.ThreeSixtyPlayer=o,h.threeSixtyPlayer=a},{}]},{},[5])(5)});