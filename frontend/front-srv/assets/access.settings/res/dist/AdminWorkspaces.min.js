!function r(o,a,i){function u(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,a,i)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<i.length;e++)u(i[e]);return u}({1:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};t=v(t);if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("react")),r=g(e("prop-types")),E=e("material-ui"),a=g(e("../editor/DataSourceEditor")),u=g(e("../editor/VersionPolicyEditor")),o=g(e("pydio/model/data-model")),l=g(e("pydio/model/node")),O=g(e("pydio/util/lang")),c=g(e("pydio")),s=g(e("pydio/http/api")),f=g(e("pydio/http/resources-manager")),d=g(e("../model/DataSource")),p=g(e("../model/Ws")),y=e("cells-sdk"),h=e("uuid"),C=g(e("../editor/VersionPolicyPeriods")),x=g(e("./EncryptionKeys")),m=e("material-ui/styles"),P=g(e("../editor/CreateDSDialog"));function g(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function j(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?b(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=A(n);return e=r?(e=A(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=c.default.requireLib("components").MaterialTable,c=c.default.requireLib("boot"),N=c.JobsStore,M=c.moment,c=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,k["default"].Component);var e,t,n,r=w(o);function o(t){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).state={dataSources:[],resyncJobs:{},versioningPolicies:[],dsLoaded:!1,versionsLoaded:!1,showExportKey:!1,exportedKey:null,showImportKey:!1,importResult:null,keyOperationError:null,startedServices:[],peerAddresses:[],m:function(e){return t.pydio.MessageHash["ajxp_admin.ds."+e]||e}},e}return e=o,(t=[{key:"componentDidMount",value:function(){var t=this,e=new y.ConfigServiceApi(s.default.getRestClient()),n=this.props.pydio;this.statusPoller=setInterval(function(){n.WebSocketClient.getStatus()&&(d.default.loadStatuses().then(function(e){t.setState({startedServices:e.Services||[]})}),e.listPeersAddresses().then(function(e){t.setState({peerAddresses:e.PeerAddresses||[]})}))},2500),setTimeout(function(){t.syncPoller=setInterval(function(){n.WebSocketClient.getStatus()&&t.syncStatuses()},2500)},1250),this.load()}},{key:"componentWillUnmount",value:function(){clearInterval(this.statusPoller),clearInterval(this.syncPoller)}},{key:"load",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.setState({dsLoaded:!1,versionsLoaded:!1,newDsName:e}),d.default.loadDatasources().then(function(e){t.setState({dataSources:e.DataSources||[],dsLoaded:!0},function(){t.syncStatuses()})}),d.default.loadVersioningPolicies().then(function(e){t.setState({versioningPolicies:e.Policies||[],versionsLoaded:!0})}),d.default.loadStatuses().then(function(e){t.setState({startedServices:e.Services})}),this.refs&&this.refs.encKeys&&this.refs.encKeys.load()}},{key:"syncStatuses",value:function(){var n=this,e=this.state.dataSources,e=void 0===e?[]:e;e.length&&N.getInstance().getAdminJobs(null,null,e.map(function(e){return"resync-ds-"+e.Name}),1).then(function(e){var t={};(e.Jobs||[]).forEach(function(e){e.Tasks&&e.Tasks.length&&(t[e.ID.replace("resync-ds-","")]=e)}),n.setState({resyncJobs:t})})}},{key:"closeEditor",value:function(){this.props.closeRightPane()}},{key:"openDataSource",value:function(e){var t,n,r,o;e.length&&(t=e[0],n=(o=this.props).openRightPane,r=o.accessByName,e=o.pydio,o=o.storageTypes,n({COMPONENT:a.default,PROPS:{ref:"editor",pydio:e,dataSource:t,storageTypes:o,readonly:!r("CreateDatasource"),closeEditor:this.closeEditor.bind(this),reloadList:this.load.bind(this)}}))}},{key:"makeStatusLabel",value:function(e,t){switch(e){case"error":return k.default.createElement("span",{style:{color:"#e53935"}},k.default.createElement("span",{className:"mdi mdi-alert"})," ",t);case"running":return k.default.createElement("span",{style:{color:"#ef6c00"}},k.default.createElement("span",{className:"mdi mdi-timer-sand"})," ",t);default:return k.default.createElement("span",{style:{color:"#1b5e20"}},k.default.createElement("span",{className:"mdi mdi-check"})," ",t)}}},{key:"computeStatus",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(n&&t.Disabled)return-1;var r,o,a,i=this.state,u=i.startedServices,l=void 0===u?[]:u,c=i.peerAddresses,u=void 0===c?[]:c,c=i.m,i=i.newDsName;if(!l.length)return c("status.na");if(l.map(function(e){e.Name==="pydio.grpc.data.sync."+t.Name&&"STARTED"===e.Status?o=!0:e.Name==="pydio.grpc.data.index."+t.Name&&"STARTED"===e.Status?r=!0:e.Name==="pydio.grpc.data.objects."+t.ObjectsServiceName&&"STARTED"===e.Status&&(a=!0)}),r&&o&&a)return i&&t.Name===i&&setTimeout(function(){e.setState({newDsName:null})},100),n?0:this.makeStatusLabel("ok",c("status.ok"));if(i&&t.Name===i)return n?1:this.makeStatusLabel("running",c("status.starting"));if(r||o||a){var s=[];return r||s.push(c("status.index")),o||s.push(c("status.sync")),a||s.push(c("status.object")),n?3:this.makeStatusLabel("error",s.join(" - "))}s=c("status.ko");return u&&-1===u.indexOf(t.PeerAddress)&&(s=c("status.ko-peers").replace("%s",t.PeerAddress)),n?2:this.makeStatusLabel("error",s)}},{key:"computeJobStatus",value:function(e){var t=e.Tasks[0];switch(t.Status){case"Finished":return this.makeStatusLabel("ok",M(new Date(1e3*parseInt(t.EndTime))).fromNow());case"Running":return this.makeStatusLabel("running",t.StatusMessage||"Running...");case"Error":return this.makeStatusLabel("error",t.StatusMessage);case"Queued":return this.makeStatusLabel("running",t.StatusMessage)}return this.makeStatusLabel("ok",t.StatusMessage)}},{key:"openVersionPolicy",value:function(){var e,t,n,r,o,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];void 0!==a&&!a.length||(t=!1,void 0===a?(t=!0,(e=new y.TreeVersioningPolicy).Uuid=(0,h.v4)(),e.VersionsDataSourceName="versions",e.NodeDeletedStrategy="KeepAll",(r=new y.TreeVersioningKeepPeriod).IntervalStart="0",r.MaxNumber=-1,e.KeepPeriods=[r]):(e=a[0],i&&(t=!0,(e=y.TreeVersioningPolicy.constructFromObject(JSON.parse(JSON.stringify(e)))).Uuid=(0,h.v4)(),e.Name+=" (Copy)")),n=(o=this.props).openRightPane,r=o.pydio,a=o.versioningReadonly,i=o.accessByName,o=this.state.dataSources,n({COMPONENT:u.default,PROPS:{ref:"editor",versionPolicy:e,create:t,pydio:r,internalSources:o.filter(function(e){return e.StorageConfiguration&&e.StorageConfiguration.cellsInternal}).map(function(e){return e.Name}),readonly:a||!i("CreateVersioning"),closeEditor:this.closeEditor.bind(this),reloadList:this.load.bind(this)}}))}},{key:"deleteVersionPolicy",value:function(t){var n=this,e=this.props.pydio;e.UI.openConfirmDialog({message:e.MessageHash["ajxp_admin.versions.editor.delete.confirm"],destructive:[t.Name],validCallback:function(){f.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(s.default.getRestClient()).deleteVersioningPolicy(t.Uuid).then(function(e){n.load()})})}})}},{key:"createDataSource",value:function(e){var t=this.props,n=t.pydio,r=t.storageTypes,t=this.state.dataSources;this.props.openRightPane({COMPONENT:a.default,PROPS:{ref:"editor",create:!0,createStructure:e,existingNames:t.map(function(e){return e.Name}),pydio:n,storageTypes:r,closeEditor:this.closeEditor.bind(this),reloadList:this.load.bind(this)}})}},{key:"resyncDataSource",value:function(e,t,n){e.UI.openConfirmDialog({message:t("editor.legend.resync"),skipNext:"datasource.resync.confirm",validCallback:function(){new d.default(n).resyncSource()}})}},{key:"deleteDataSource",value:function(e,t,n){var r=this;e.UI.openConfirmDialog({message:t("editor.delete.warning"),validCallback:function(){new d.default(n).deleteSource().then(function(){r.load()})},destructive:[n.Name]})}},{key:"createWorkspaceFromDatasource",value:function(t,e,n){var r=new p.default,o=r.getModel(),a=n.Name;o.Label=a,o.Description="Root of "+a,o.Slug=a,o.Attributes.DEFAULT_RIGHTS="";n={Uuid:"DATASOURCE:"+a,Path:a};o.RootNodes[n.Uuid]=n,t.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitle:e("board.wsfromds.title"),legendId:e("board.wsfromds.legend").replace("%s",a),fieldLabelId:e("board.wsfromds.field"),defaultValue:e("board.wsfromds.defaultPrefix").replace("%s",a),submitValue:function(e){o.Label=e,r.save().then(function(){t.goTo("/data/workspaces")})}})}},{key:"render",value:function(){var t=this,e=this.state,n=e.dataSources,r=e.resyncJobs,o=e.versioningPolicies,a=e.m,i=e.createDialog;n.sort(O.default.arraySorter("Name"));var u=n.filter(function(e){return!(e.StorageConfiguration&&e.StorageConfiguration.cellsInternal)}),l=n.filter(function(e){return e.StorageConfiguration&&e.StorageConfiguration.cellsInternal});o.sort(O.default.arraySorter("Name"));var c=AdminComponents.AdminStyles(this.props.muiTheme.palette),s=c.body,f=s.tableMaster,d=s.block.props,p=s.block.container,y=this.props,h=y.currentNode,m=y.pydio,g=y.versioningReadonly,v=y.accessByName,b=[{name:"Name",label:a("name"),style:{fontSize:15,width:"15%"},headerStyle:{width:"15%"},sorter:{type:"string",default:!0}},{name:"StorageType",label:a("storage"),style:{width:"15%"},headerStyle:{width:"15%"},renderCell:function(e){var t="storage.fs";switch(e.StorageType){case"S3":t="storage.s3";break;case"AZURE":t="storage.azure";break;case"GCS":t="storage.gcs"}return a(t)},sorter:{type:"string"}},{name:"Status",label:a("status"),hideSmall:!0,renderCell:function(e){return e.Disabled?k.default.createElement("span",{style:{color:"#757575"}},k.default.createElement("span",{className:"mdi mdi-checkbox-blank-circle-outline"})," ",a("status.disabled")):t.computeStatus(e)},sorter:{type:"number",value:function(e){return t.computeStatus(e,!0)}}},{name:"SyncStatus",label:a("syncStatus"),hideSmall:!0,renderCell:function(e){return r&&r[e.Name]?t.computeJobStatus(r[e.Name]):"n/a"},sorter:{type:"number",value:function(e){return r&&r[e.Name]?r[e.Name].Tasks[0].EndTime:0}}},{name:"VersioningPolicyName",label:a("versioning"),style:{width:"15%"},headerStyle:{width:"15%"},hideSmall:!0,renderCell:function(t){var e=o.find(function(e){return e.Uuid===t.VersioningPolicyName});return e?e.Name:t.VersioningPolicyName||"-"},sorter:{type:"string"}},{name:"EncryptionMode",label:a("encryption"),hideSmall:!0,style:{width:"8%",textAlign:"center"},headerStyle:{width:"8%"},renderCell:function(e){return"MASTER"===e.EncryptionMode?k.default.createElement("span",{className:"mdi mdi-check"}):"-"},sorter:{type:"number",value:function(e){return"MASTER"===e.EncryptionMode?1:0}}}],S=(b=!u.filter(function(e){return!e.FlatStorage}).length?b.filter(function(e){return"SyncStatus"!==e.name}):b).filter(function(e){return"VersioningPolicyName"!==e.name&&"SyncStatus"!==e.name}),_=h.getLabel(),w=h.getMetadata().get("icon_class"),e=[];v("CreateDatasource")&&e.push(k.default.createElement(E.FlatButton,R({primary:!0,label:m.MessageHash["ajxp_admin.ws.4"],onClick:function(){return t.setState({createDialog:!0})}},c.props.header.flatButton)));n=!g&&v("CreateVersioning");n&&e.push(k.default.createElement(E.FlatButton,R({primary:!0,label:m.MessageHash["ajxp_admin.ws.4b"],onClick:function(){t.openVersionPolicy()}},c.props.header.flatButton)));s=[{name:"Name",label:a("versioning.name"),style:{width:180,fontSize:15},headerStyle:{width:180},sorter:{type:"string",default:!0}},{name:"Description",label:a("versioning.description"),sorter:{type:"string"}},{name:"KeepPeriods",hideSmall:!0,label:a("versioning.periods"),renderCell:function(e){return k.default.createElement(C.default,{rendering:"short",policy:e,pydio:m})}},{name:"VersionsDataSourceName",style:{width:180},headerStyle:{width:180},label:a("versioning.storage"),sorter:{type:"string"},hideSmall:!0}],y=[];v("CreateDatasource")&&y.push({iconClassName:"mdi mdi-pencil",tooltip:"Edit datasource",onClick:function(e){t.openDataSource([e])}}),y.push({iconClassName:"mdi mdi-folder-plus",tooltip:"Create workspace here",onClick:function(e){return t.createWorkspaceFromDatasource(m,a,e)}}),v("CreateDatasource")&&y.push({iconClassName:"mdi mdi-delete",tooltip:a("editor.legend.delete.button"),onClick:function(e){return t.deleteDataSource(m,a,e)}});h=[].concat(y);0<u.filter(function(e){return!e.FlatStorage}).length&&y.push({iconClassName:"mdi mdi-sync",tooltip:a("editor.legend.resync.button"),onClick:function(e){return t.resyncDataSource(m,a,e)},disable:function(e){return e.FlatStorage}});g=[];return g.push({iconClassName:n?"mdi mdi-pencil":"mdi mdi-eye",tooltip:n?"Edit policy":"Display policy",onClick:function(e){t.openVersionPolicy([e])}}),n&&(g.push({iconClassName:"mdi mdi-content-copy",tooltip:"Duplicate policy",onClick:function(e){return t.openVersionPolicy([e],!0)}}),g.push({iconClassName:"mdi mdi-delete",tooltip:"Delete policy",destructive:!0,onClick:function(e){return t.deleteVersionPolicy(e)}})),k.default.createElement("div",{className:"main-layout-nav-to-stack workspaces-board"},k.default.createElement("div",{className:"vertical-layout",style:{width:"100%"}},k.default.createElement(AdminComponents.Header,{title:_,icon:w,actions:e,reloadAction:this.load.bind(this),loading:!(this.state.dsLoaded&&this.state.versionsLoaded)}),k.default.createElement(P.default,{open:i,onRequestClose:function(){t.setState({createDialog:!1})},onSubmit:function(e){t.createDataSource(e)}}),k.default.createElement("div",{className:"layout-fill"},k.default.createElement(AdminComponents.SubHeader,{title:a("board.ds.title"),legend:a("board.ds.legend")}),k.default.createElement(E.Paper,R({},d,{style:j({},p)}),k.default.createElement(T,{data:u,columns:b,actions:y,onSelectRows:this.openDataSource.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:a("emptyState"),masterStyles:f,storageKey:"console.datasources.list"})),0<l.length&&k.default.createElement(k.Fragment,null,k.default.createElement("div",{style:{padding:"0px 20px"}},"Internal DataSources are used to store binaries like files versions"),k.default.createElement(E.Paper,R({},d,{style:j({},p)}),k.default.createElement(T,{data:l,columns:S,actions:h,onSelectRows:this.openDataSource.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:a("emptyState"),masterStyles:f,storageKey:"console.internalsources.list"}))),k.default.createElement(AdminComponents.SubHeader,{title:a("board.versioning.title"),legend:a("board.versioning.legend")}),k.default.createElement(E.Paper,R({},d,{style:j({},p)}),k.default.createElement(T,{data:o,columns:s,actions:g,onSelectRows:this.openVersionPolicy.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,masterStyles:f,storageKey:"console.versioning.policies.list"})),k.default.createElement(AdminComponents.SubHeader,{title:a("board.enc.title"),legend:a("board.enc.legend")}),k.default.createElement(x.default,{pydio:m,ref:"encKeys",accessByName:v,adminStyles:c}))))}}])&&S(e.prototype,t),n&&S(e,n),o}();(n.default=c).propTypes={dataModel:r.default.instanceOf(o.default).isRequired,rootNode:r.default.instanceOf(l.default).isRequired,currentNode:r.default.instanceOf(l.default).isRequired,openEditor:r.default.func.isRequired,openRightPane:r.default.func.isRequired,closeRightPane:r.default.func.isRequired,filter:r.default.string,versioningReadonly:r.default.bool},n.default=c=(0,m.muiThemeable)()(c),t.exports=n.default},{"../editor/CreateDSDialog":7,"../editor/DataSourceEditor":9,"../editor/VersionPolicyEditor":13,"../editor/VersionPolicyPeriods":14,"../model/DataSource":18,"../model/Ws":21,"./EncryptionKeys":2,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react",uuid:25}],2:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var m=a(e("react")),u=a(e("pydio/http/api")),r=a(e("pydio")),g=e("material-ui"),l=e("cells-sdk");a(e("../model/Ws"));function a(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return e=r?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=r.default.requireLib("components").MaterialTable,S=r.default.requireLib("hoc").ModernTextField,r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,m["default"].Component);var e,t,n,r=s(o);function o(t){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).state={keys:[],showDialog:!1,showExportKey:null,exportedKey:null,showCreateKey:null,showImportKey:null,m:function(e){return t.pydio.MessageHash["ajxp_admin.ds.encryption."+e]||e}},e}return e=o,(t=[{key:"load",value:function(){var t=this;new l.ConfigServiceApi(u.default.getRestClient()).listEncryptionKeys(new l.EncryptionAdminListKeysRequest).then(function(e){t.setState({keys:e.Keys||[]})})}},{key:"componentDidMount",value:function(){this.load()}},{key:"exportKey",value:function(){var t=this,n=this.props.pydio,r=this.state.m,e=new l.ConfigServiceApi(u.default.getRestClient()),o=new l.EncryptionAdminExportKeyRequest;o.KeyID=this.state.showExportKey,o.StrPassword=this.refs["key-password-field"].getValue(),this.refs["key-password-confirm"].getValue()===o.StrPassword?e.exportEncryptionKey(o).then(function(e){t.setState({exportedKey:e.Key,showExportKey:null},function(){t.timeout=setTimeout(function(){t.setState({exportedKey:"",showDialog:!1})},1e4)}),t.setState({showExportKey:null})}).catch(function(e){n.UI.displayMessage("ERROR",r("key.export.fail")+" : "+e.message),t.setState({showExportKey:null})}):n.UI.displayMessage("ERROR","Warning, passwords differ!")}},{key:"createKey",value:function(){var t=this,e=new l.ConfigServiceApi(u.default.getRestClient()),n=new l.EncryptionAdminCreateKeyRequest;n.KeyID=this.refs.createKeyId.getValue(),n.Label=this.refs.createKeyLabel.getValue(),e.createEncryptionKey(n).then(function(e){t.load(),t.setState({showDialog:!1})}).catch(function(){t.setState({showDialog:!1})})}},{key:"deleteKey",value:function(n){var r=this,e=this.props.pydio,t=this.state.m;e.UI.openConfirmDialog({message:t("key.delete.warning"),destructive:[n],validCallback:function(){var e=new l.ConfigServiceApi(u.default.getRestClient()),t=new l.EncryptionAdminDeleteKeyRequest;t.KeyID=n,e.deleteEncryptionKey(t).then(function(e){r.load()})}})}},{key:"importKey",value:function(){var e,t=this,n=this.props.pydio,r=this.state.m,o=new l.ConfigServiceApi(u.default.getRestClient()),a=!0;(e=this.state.showImportKey).ID||((e=new l.EncryptionKey).ID=this.refs["key-import-id"].getValue(),e.Label=this.refs["key-import-label"].getValue(),a=!1),e.Content=this.refs["key-imported-field"].getValue();var i=new l.EncryptionAdminImportKeyRequest;i.StrPassword=this.refs["key-password-field"].getValue(),i.Key=e,i.Override=a,o.importEncryptionKey(i).then(function(e){e.Success?n.UI.displayMessage("SUCCESS",r("key.import.success")):n.UI.displayMessage("ERROR",r("key.import.fail")),t.load(),t.setState({showImportKey:!1,showDialog:!1})}).catch(function(){t.setState({showImportKey:!1,showDialog:!1})})}},{key:"render",value:function(){var t=this,e=this.state,n=e.keys,r=e.showDialog,o=e.showImportKey,a=e.showExportKey,i=e.exportedKey,u=e.showCreateKey,l=e.m,c=this.props,s=c.pydio,f=c.accessByName,d=c.adminStyles,p=[{name:"Label",label:l("key.label"),style:{width:"30%",fontSize:15},headerStyle:{width:"30%"},sorter:{type:"string",default:!0}},{name:"ID",label:l("key.id"),hideSmall:!0,sorter:{type:"string"}},{name:"Owner",label:l("key.owner"),hideSmall:!0,sorter:{type:"string"}},{name:"CreationDate",label:l("key.created"),hideSmall:!0,useMoment:!0,sorter:{type:"number"}}],e=[];f("CreateEncryption")&&e.push({iconClassName:"mdi mdi-import",tooltip:l("key.import"),onClick:function(e){t.setState({showDialog:!0,showImportKey:e})}},{iconClassName:"mdi mdi-export",tooltip:l("key.export"),onClick:function(e){t.setState({showDialog:!0,showExportKey:e.ID})}},{iconClassName:"mdi mdi-delete",tooltip:l("key.delete"),onClick:function(e){t.deleteKey(e.ID)}});var y,h,c=[];a||i?(h=l("key.export"),c=i?(y=m.default.createElement(S,{value:i.Content,fullWidth:!0,floatingLabelText:l("key.export.result.copy"),multiLine:!0,ref:"key-imported-field"}),[m.default.createElement(g.FlatButton,{label:"Close",onClick:function(){clearTimeout(t.timeout),t.setState({showExportKey:null,exportedKey:"",showDialog:!1})}})]):(y=m.default.createElement("div",null,m.default.createElement(S,{floatingLabelText:l("key.export.password"),ref:"key-password-field",type:"password",fullWidth:!0}),m.default.createElement(S,{floatingLabelText:l("key.export.confirm"),ref:"key-password-confirm",type:"password",fullWidth:!0})),[m.default.createElement(g.FlatButton,{label:s.MessageHash[54],onClick:function(){t.setState({showExportKey:null,showDialog:!1})}}),m.default.createElement(g.FlatButton,{label:l("key.export"),primary:!0,onClick:function(){t.exportKey()}})])):o?(h=l("key.import"),y=m.default.createElement("div",null,!o.ID&&m.default.createElement("div",null,m.default.createElement(S,{floatingLabelText:l("key.import.id"),ref:"key-import-id",fullWidth:!0}),m.default.createElement(S,{floatingLabelText:l("key.import.label"),ref:"key-import-label",fullWidth:!0})),m.default.createElement(S,{floatingLabelText:l("key.import.password"),ref:"key-password-field",type:"password",fullWidth:!0}),m.default.createElement(S,{fullWidth:!0,floatingLabelText:l("key.import.content"),multiLine:!0,ref:"key-imported-field"})),c=[m.default.createElement(g.FlatButton,{label:s.MessageHash[54],onClick:function(){t.setState({showImportKey:null,showDialog:!1})}}),m.default.createElement(g.FlatButton,{label:l("key.import"),primary:!0,onClick:function(){t.importKey()}})]):u&&(h="Create a Key",y=m.default.createElement("div",null,m.default.createElement(S,{floatingLabelText:l("key.import.id"),ref:"createKeyId",fullWidth:!0}),m.default.createElement(S,{floatingLabelText:l("key.import.label"),ref:"createKeyLabel",fullWidth:!0})),c=[m.default.createElement(g.FlatButton,{label:s.MessageHash[54],onClick:function(){t.setState({showCreateKey:null,showDialog:!1})}}),m.default.createElement(g.FlatButton,{label:l("key.create"),primary:!0,onClick:function(){t.createKey()}})]);o=AdminComponents.AdminStyles().body,u=o.tableMaster,s=o.block.props,o=o.block.container;return m.default.createElement("div",null,m.default.createElement(g.Dialog,{title:h,open:r,onRequestClose:function(){t.setState({showDialog:!1,showExportKey:null,showImportKey:null,showCreateKey:!1})},modal:!0,actions:c,contentStyle:{maxWidth:340}},y),m.default.createElement(g.Paper,v({},s,{style:o}),m.default.createElement(b,{data:n,columns:p,actions:e,onSelectRows:function(){},showCheckboxes:!1,emptyStateString:l("key.emptyState"),masterStyles:u,storageKey:"console.encryption-keys.list"})),f("CreateEncryption")&&m.default.createElement("div",{style:{textAlign:"right",paddingRight:24,paddingBottom:24}},m.default.createElement(g.FlatButton,v({primary:!0,label:l("key.import"),onClick:function(){t.setState({showImportKey:{},showDialog:!0})}},d.props.header.flatButton)),m.default.createElement("span",{style:{marginLeft:8}},m.default.createElement(g.FlatButton,v({primary:!0,label:l("key.create"),onClick:function(){t.setState({showCreateKey:!0,showDialog:!0})}},d.props.header.flatButton)))))}}])&&i(e.prototype,t),n&&i(e,n),o}();n.default=r,t.exports=n.default},{"../model/Ws":21,"cells-sdk":"cells-sdk","material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react"}],3:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var m=i(e("react")),g=i(e("../model/Metadata")),v=e("material-ui"),r=i(e("pydio")),b=i(e("../editor/MetaNamespace")),a=e("cells-sdk");function i(e){return e&&e.__esModule?e:{default:e}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=r?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e=e("material-ui/styles").muiThemeable,_=r.default.requireLib("components").MaterialTable,r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,m["default"].Component);var e,t,n,r=c(o);function o(t){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).state={loading:!1,namespaces:[],m:function(e){return t.pydio.MessageHash["ajxp_admin.metadata."+e]}},e}return e=o,(t=[{key:"componentWillMount",value:function(){this.load()}},{key:"load",value:function(){var t=this;this.setState({loading:!0}),g.default.loadNamespaces().then(function(e){t.setState({loading:!1,namespaces:e.Namespaces||[]})})}},{key:"emptyNs",value:function(){var e=new a.IdmUserMetaNamespace;return e.Policies=[a.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),a.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],e.JsonDefinition=JSON.stringify({type:"string"}),e.Indexable=!0,e}},{key:"create",value:function(){this.setState({create:!0,dialogOpen:!0,selectedNamespace:this.emptyNs()})}},{key:"deleteNs",value:function(e){var t=this,n=this.props.pydio,r=this.state.m;n.UI.openConfirmDialog({message:r("delete.confirm"),destructive:[e.Namespace],validCallback:function(){g.default.deleteNS(e).then(function(){t.load()})}})}},{key:"open",value:function(e){e.length&&this.setState({create:!1,dialogOpen:!0,selectedNamespace:e[0]})}},{key:"close",value:function(){this.setState({dialogOpen:!1,selectedNamespace:null})}},{key:"render",value:function(){var t=this,e=this.props,n=e.muiTheme,r=e.currentNode,o=e.pydio,a=e.accessByName,i=e.policiesBuilder,u=AdminComponents.AdminStyles(n.palette),l=this.state,c=l.namespaces,s=l.loading,f=l.dialogOpen,d=l.selectedNamespace,p=l.create,y=l.m,d=d||this.emptyNs();c.sort(function(e,t){e=e.Order||0,t=t.Order||0;return e===t?0:t<e?1:-1});var h=[{name:"Order",label:y("order"),style:{width:30},headerStyle:{width:30},hideSmall:!0,renderCell:function(e){return e.Order||"0"},sorter:{type:"number"}},{name:"Namespace",label:y("namespace"),style:{fontSize:15},sorter:{type:"string"}},{name:"Label",label:y("label"),style:{width:"25%"},headerStyle:{width:"25%"},sorter:{type:"string"}},{name:"Indexable",label:y("indexable"),style:{width:"10%"},headerStyle:{width:"10%"},hideSmall:!0,renderCell:function(e){return e.Indexable?"Yes":"No"},sorter:{type:"number",value:function(e){return e.Indexable?1:0}}},{name:"JsonDefinition",label:y("definition"),hideSmall:!0,renderCell:function(e){e=e.JsonDefinition;if(!e)return"";e=JSON.parse(e);return g.default.MetaTypes[e.type]||e.type},sorter:{type:"string"}}],e=r.getLabel(),n=r.getMetadata().get("icon_class"),l=[],r=[];return a("Create")&&(l.push(m.default.createElement(v.FlatButton,S({primary:!0,label:y("namespace.add"),onClick:function(){t.create()}},u.props.header.flatButton))),r.push({iconClassName:"mdi mdi-pencil",onClick:function(e){t.open([e])}},{iconClassName:"mdi mdi-delete",onClick:function(e){t.deleteNs(e)}})),m.default.createElement("div",{className:"main-layout-nav-to-stack workspaces-board"},m.default.createElement(b.default,{pydio:o,open:f,create:p,namespace:d,onRequestClose:function(){return t.close()},reloadList:function(){return t.load()},namespaces:c,readonly:!a("Create"),policiesBuilder:i}),m.default.createElement("div",{className:"vertical-layout",style:{width:"100%"}},m.default.createElement(AdminComponents.Header,{title:e,icon:n,actions:l,reloadAction:this.load.bind(this),loading:s}),m.default.createElement("div",{className:"layout-fill"},m.default.createElement(AdminComponents.SubHeader,{title:y("namespaces"),legend:y("namespaces.legend")}),m.default.createElement(v.Paper,u.body.block.props,m.default.createElement(_,{data:c,columns:h,actions:r,onSelectRows:this.open.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:y("empty"),masterStyles:u.body.tableMaster,storageKey:"console.metadata.list"})))))}}])&&u(e.prototype,t),n&&u(e,n),o}();n.default=r,n.default=r=e()(r),t.exports=n.default},{"../editor/MetaNamespace":12,"../model/Metadata":19,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],4:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var y=u(e("react")),r=u(e("pydio")),a=u(e("../model/VirtualNode")),i=u(e("../model/DataSource")),h=u(e("../virtual/NodeCard")),m=e("material-ui"),e=e("material-ui/styles");function u(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return e=r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=r.default.requireLib("hoc").ModernTextField,b=r.default.requireLib("components").MaterialTable,r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,y["default"].Component);var e,t,n,r=d(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={nodesLoaded:!1,nodes:[],dataSourcesLoaded:!1,dataSources:[]},a.default.loadNodes(function(e){t.setState({nodes:e,nodesLoaded:!0})}),i.default.loadDatasources().then(function(e){t.setState({dataSources:e.DataSources,dataSourcesLoaded:!0})}),t}return e=o,(t=[{key:"reload",value:function(){var t=this;this.setState({nodesLoaded:!1}),a.default.loadNodes(function(e){t.setState({nodes:e,nodesLoaded:!0})})}},{key:"createNode",value:function(){this.handleRequestClose();var e=new a.default;e.setName(this.state.newName);var t=this.state.nodes;this.setState({nodes:[].concat(l(t),[e])})}},{key:"handleTouchTap",value:function(e){var t=this;e.preventDefault(),this.setState({newName:"",open:!0,anchorEl:e.currentTarget},function(){setTimeout(function(){t.refs.newNode&&t.refs.newNode.focus()},300)})}},{key:"handleRequestClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){function t(e){return o.MessageHash["ajxp_admin.virtual."+e]||e}var n=this,e=this.props,r=e.readonly,o=e.pydio,a=e.muiTheme,i=e.accessByName,u=this.state,l=u.nodes,c=u.dataSources,s=u.nodesLoaded,f=u.dataSourcesLoaded,d=u.selectedNode,p=AdminComponents.AdminStyles(a.palette),e=l.map(function(e){return e.getName()===d?{node:e,expandedRow:y.default.createElement(h.default,{pydio:o,dataSources:c,node:e,reloadList:n.reload.bind(n),readonly:r||!i("Create"),adminStyles:p,onSave:n.reload.bind(n)})}:{node:e}}),u=[];!r&&i("Create")&&u.push(y.default.createElement(m.FlatButton,g({primary:!0,label:t("create"),onClick:this.handleTouchTap.bind(this)},p.props.header.flatButton)));a=[{name:"id",label:t("col.id"),style:{width:"25%",fontSize:15},headerStyle:{width:"25%"},renderCell:function(e){return e.node.getName()},sorter:{type:"string"}},{name:"code",label:t("col.code"),renderCell:function(e){return y.default.createElement("pre",null,e.node.getValue().split("\n").pop())}}],l=[];return r?l.push({iconClassName:"mdi mdi-eye",tooltip:t("code.display"),onClick:function(e){return n.setState({selectedNode:d===e.node.getName()?null:e.node.getName()})}}):(l.push({iconClassName:"mdi mdi-pencil",tooltip:t("code.edit"),onClick:function(e){return n.setState({selectedNode:d===e.node.getName()?null:e.node.getName()})}}),l.push({iconClassName:"mdi mdi-delete",tooltip:t("delete"),onClick:function(e){o.UI.openConfirmDialog({message:t("delete.confirm"),destructive:[e.node.getName()],validCallback:function(){e.node.remove(function(){n.reload()})}})},disable:function(e){return"cells"===e.node.getName()||"my-files"===e.node.getName()}})),y.default.createElement("div",{className:"vertical-layout workspaces-list layout-fill",style:{height:"100%"}},y.default.createElement(AdminComponents.Header,{title:t("title"),icon:"mdi mdi-help-network",actions:u,reloadAction:this.reload.bind(this),loading:!(s&&f)}),y.default.createElement(m.Popover,{open:this.state.open,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},onRequestClose:this.handleRequestClose.bind(this)},y.default.createElement("div",{style:{margin:"0 10px"}},y.default.createElement(v,{ref:"newNode",floatingLabelText:t("label"),value:this.state.newName,onChange:function(e,t){n.setState({newName:t})},hintText:t("label.new")})),y.default.createElement(m.Divider,null),y.default.createElement("div",{style:{textAlign:"right",padding:"4px 10px"}},y.default.createElement(m.FlatButton,{label:o.MessageHash[54],onClick:this.handleRequestClose.bind(this)}),y.default.createElement(m.RaisedButton,{primary:!0,label:t("create.button"),onClick:this.createNode.bind(this)}))),y.default.createElement("div",{className:"layout-fill",style:{overflowY:"auto"}},y.default.createElement("div",{style:{padding:20,paddingBottom:0}},t("legend.1")),s&&f&&y.default.createElement(m.Paper,g({},p.body.block.props,{style:p.body.block.container}),y.default.createElement(b,{columns:a,data:e,actions:l,deselectOnClickAway:!0,showCheckboxes:!1,masterStyles:p.body.tableMaster,storageKey:"console.templatepaths.list"})),(!s||!f)&&y.default.createElement("div",{style:{margin:16,textAlign:"center",padding:20}},o.MessageHash["ajxp_admin.loading"]),!r&&i("Create")&&y.default.createElement("div",{style:{padding:"0 24px",opacity:".5"}},t("legend.2"))))}}])&&s(e.prototype,t),n&&s(e,n),o}();n.default=r,n.default=r=(0,e.muiThemeable)()(r),t.exports=n.default},{"../model/DataSource":18,"../model/VirtualNode":20,"../virtual/NodeCard":22,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f=l(e("react")),r=l(e("create-react-class")),o=l(e("pydio/model/data-model")),a=l(e("pydio/model/node")),c=l(e("pydio/util/lang")),i=l(e("../model/Ws")),u=l(e("prop-types"));function l(e){return e&&e.__esModule?e:{default:e}}var d=l(e("pydio")).default.requireLib("components").MaterialTable,u=(0,r.default)({displayName:"WorkspaceList",mixins:[AdminComponents.MessagesConsumerMixin],propTypes:{dataModel:u.default.instanceOf(o.default).isRequired,rootNode:u.default.instanceOf(a.default).isRequired,currentNode:u.default.instanceOf(a.default).isRequired,openSelection:u.default.func,advanced:u.default.boolean},getInitialState:function(){return{workspaces:[],loading:!1}},startLoad:function(){this.props.onLoadState&&this.props.onLoadState(!0),this.setState({loading:!0})},endLoad:function(){this.props.onLoadState&&this.props.onLoadState(!1),this.setState({loading:!1})},reload:function(){var t=this;this.startLoad(),i.default.listWorkspaces().then(function(e){t.endLoad(),t.setState({workspaces:e.Workspaces||[]})}).catch(function(e){t.endLoad()})},componentDidMount:function(){this.reload()},openTableRows:function(e){e.length&&this.props.openSelection(e[0].workspace)},deleteAction:function(e){var t=this,n=this.props.pydio;n.UI.openConfirmDialog({message:n.MessageHash["settings.35"],destructive:[e.Label],validCallback:function(){new i.default(e).remove().then(function(){t.reload()})}})},computeTableData:function(){var u=[],l=this.props.filterString;return this.state.workspaces.map(function(t){var e="";t.RootNodes&&(e=Object.keys(t.RootNodes).map(function(e){return c.default.trimRight(t.RootNodes[e].Path,"/")}).join(", "));var n=!1;if(t.Attributes)try{var r=JSON.parse(t.Attributes);!0!==r.ALLOW_SYNC&&"true"!==r.ALLOW_SYNC||(n=!0)}catch(e){}if(l){var o=l.toLowerCase(),a=t.Label&&0<=t.Label.toLowerCase().indexOf(o),i=t.Description&&0<=t.Description.toLowerCase().indexOf(o),o=e&&0<=e.toLowerCase().indexOf(o);if(!(a||i||o))return}u.push({workspace:t,label:t.Label,description:t.Description,slug:t.Slug,summary:e,syncable:n})}),u.sort(c.default.arraySorter("label",!1,!0)),u},render:function(){function e(e){return r.MessageHash["ajxp_admin."+e]}var t=this,n=this.props,r=n.pydio,o=n.advanced,a=n.editable,i=n.tableStyles,u=n.openSelection,l=function(e){return r.MessageHash["settings."+e]},c=[{name:"label",label:l("8"),style:{width:"20%",fontSize:15},headerStyle:{width:"20%"},sorter:{type:"string",default:"true"}},{name:"description",label:l("103"),hideSmall:!0,style:{width:"25%"},headerStyle:{width:"25%"},sorter:{type:"string"}},{name:"summary",label:e("ws.board.summary"),hideSmall:!0,style:{width:"25%"},headerStyle:{width:"25%"},sorter:{type:"string"}}];o&&c.push({name:"syncable",label:e("ws.board.syncable"),style:{width:"10%",textAlign:"center"},headerStyle:{width:"10%",textAlign:"center"},sorter:{type:"number",sortValue:function(e){return e.syncable?1:0}},renderCell:function(e){return f.default.createElement("span",{className:"mdi mdi-check",style:{fontSize:18,opacity:e.syncable?1:0}})}}),c.push({name:"slug",label:e("ws.5"),style:{width:"20%"},headerStyle:{width:"20%"},sorter:{type:"string"}});n=this.state.loading,l=this.computeTableData(),o=[];a&&o.push({iconClassName:"mdi mdi-pencil",tooltip:"Edit Workspace",onClick:function(e){u(e.workspace)},disable:function(e){return!e.workspace.PoliciesContextEditable}});var s=r.user.getRepositoriesList();return o.push({iconClassName:"mdi mdi-open-in-new",tooltip:"Open this workspace...",onClick:function(e){r.triggerRepositoryChange(e.workspace.UUID)},disable:function(e){return!s.has(e.workspace.UUID)}}),a&&o.push({iconClassName:"mdi mdi-delete",onClick:function(e){t.deleteAction(e.workspace)},disable:function(e){return!e.workspace.PoliciesContextEditable}}),f.default.createElement(d,{data:l,columns:c,actions:o,onSelectRows:a?this.openTableRows.bind(this):null,deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:e(n?"loading":"ws.board.empty"),masterStyles:i,paginate:[10,25,50,100],defaultPageSize:25,storageKey:"console.workspaces.list"})}});n.default=u,t.exports=n.default},{"../model/Ws":21,"create-react-class":"create-react-class","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react"}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=p(e("react")),r=p(e("create-react-class")),o=p(e("prop-types")),a=p(e("pydio")),f=e("material-ui"),i=p(e("pydio/util/xml")),u=p(e("../editor/WsEditor")),d=p(e("./WorkspaceList")),l=p(e("pydio/model/data-model")),c=p(e("pydio/model/node")),e=e("material-ui/styles");function p(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var h=a.default.requireLib("hoc").ModernTextField,o=(0,r.default)({displayName:"WsDashboard",mixins:[AdminComponents.MessagesConsumerMixin],propTypes:{dataModel:o.default.instanceOf(l.default).isRequired,rootNode:o.default.instanceOf(c.default).isRequired,currentNode:o.default.instanceOf(c.default).isRequired,openEditor:o.default.func.isRequired,openRightPane:o.default.func.isRequired,closeRightPane:o.default.func.isRequired,accessByName:o.default.func.isRequired,advanced:o.default.boolean},getInitialState:function(){return{selectedNode:null,searchString:""}},dirtyEditor:function(){var e=this.props.pydio;return!(!this.refs.editor||!this.refs.editor.isDirty()||confirm(e.MessageHash["role_editor.19"]))},openWorkspace:function(e){var t=this;if(!this.dirtyEditor()){var n=u.default,r=i.default.XPathSelectSingleNode(this.props.pydio.getXmlRegistry(),'//client_configs/component_config[@component="AdminWorkspaces.Dashboard"]/editor');r&&(n=r.getAttribute("namespace")+"."+r.getAttribute("component"));var o=this.props,a=o.pydio,r=o.advanced,r=(o.accessByName,{COMPONENT:n,PROPS:{ref:"editor",pydio:a,workspace:e,closeEditor:this.closeWorkspace,advanced:r,reloadList:function(){t.refs.workspacesList.reload()}}});return this.props.openRightPane(r),!0}},closeWorkspace:function(){this.dirtyEditor()||this.props.closeRightPane()},showWorkspaceCreator:function(e){var t=this,n=this.props,r=n.pydio,n=n.advanced,n={COMPONENT:u.default,PROPS:{ref:"editor",type:e,pydio:r,advanced:n,closeEditor:this.closeWorkspace,reloadList:function(){t.refs.workspacesList.reload()}}};this.props.openRightPane(n)},reloadWorkspaceList:function(){this.refs.workspacesList.reload()},render:function(){var n=this,e=this.props,t=e.pydio,r=e.advanced,o=e.currentNode,a=e.accessByName,i=e.muiTheme,u=this.state,l=u.searchString,c=u.loading,e=AdminComponents.AdminStyles(i.palette),u=[];a("Create")&&u.push(s.default.createElement(f.FlatButton,y({primary:!0,label:this.context.getMessage("ws.3"),onClick:this.showWorkspaceCreator},e.props.header.flatButton)));i=s.default.createElement("div",{style:{display:"flex"}},s.default.createElement("div",{style:{flex:1}}),s.default.createElement("div",{style:{width:190}},s.default.createElement(h,{fullWidth:!0,hintText:this.context.getMessage("ws.filter.workspaces"),value:l,onChange:function(e,t){return n.setState({searchString:t})}})));return s.default.createElement("div",{className:"main-layout-nav-to-stack vertical-layout workspaces-board"},s.default.createElement(AdminComponents.Header,{title:o.getLabel(),icon:"mdi mdi-folder-open",actions:u,centerContent:i,reloadAction:this.reloadWorkspaceList,loading:c}),s.default.createElement("div",{className:"layout-fill"},s.default.createElement(AdminComponents.SubHeader,{legend:this.context.getMessage("ws.dashboard","ajxp_admin")}),s.default.createElement(f.Paper,y({},e.body.block.props,{style:e.body.block.container}),s.default.createElement(d.default,{ref:"workspacesList",pydio:t,openSelection:this.openWorkspace,advanced:r,editable:a("Create"),onLoadState:function(e){n.setState({loading:e})},tableStyles:e.body.tableMaster,filterString:l}))))}}),o=(0,e.muiThemeable)()(o);n.default=o,t.exports=n.default},{"../editor/WsEditor":16,"./WorkspaceList":5,"create-react-class":"create-react-class","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node","pydio/util/xml":"pydio/util/xml",react:"react"}],7:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(e("react")),l=r(e("pydio")),c=e("material-ui");function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return e=r?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,u["default"].Component);var e,t,n,r=s(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).state={value:"flat"},e}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e,t){e.open&&!this.props.open&&this.setState({value:"flat"})}},{key:"submit",value:function(){var e=this.props,t=e.onSubmit,e=e.onRequestClose;t(this.state.value),e()}},{key:"render",value:function(){function n(e){return l.default.getMessages()["ajxp_admin.ds.format-picker."+e]||e}function e(e){var t=u.default.createElement("div",null,u.default.createElement("div",null,n(e+".title")),u.default.createElement("div",{style:{opacity:.67,margin:"5px 0 10px"}},n(e+".legend")));return u.default.createElement(c.RadioButton,{value:e,label:t})}var r=this,t=this.props,o=t.open,a=t.onRequestClose,i=this.state.value,t=[u.default.createElement(c.FlatButton,{label:l.default.getMessages()[54],onClick:function(){a()},primary:!0}),u.default.createElement(c.FlatButton,{label:n("submit"),primary:!0,onClick:function(){return r.submit()}})];return u.default.createElement(c.Dialog,{open:o,title:n("title"),onRequestClose:a,actions:t},u.default.createElement("div",{style:{marginBottom:20}},n("legend")),u.default.createElement(c.RadioButtonGroup,{valueSelected:i,onChange:function(e,t){return r.setState({value:t})}},e("flat"),e("structured"),e("internal")))}}])&&a(e.prototype,t),n&&a(e,n),o}();n.default=e,t.exports=n.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],8:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var d=r(e("pydio")),p=r(e("react")),y=r(e("pydio/util/lang")),a=r(e("../model/DataSource")),h=e("material-ui"),i=e("lodash");function r(e){return e&&e.__esModule?e:{default:e}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=g(n);return e=r?(e=g(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=d.default.requireLib("hoc").ModernTextField,e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,p["default"].Component);var e,t,n,r=f(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={buckets:[],selection:[],mode:t.modeFromValue(),monitorApi:e.dataSource.ApiKey+"-"+e.dataSource.ApiSecret},e.dataSource.ObjectsBucket&&(t.state.selection=[e.dataSource.ObjectsBucket]),t.load(),t.loadSelection(),t.reloadSelection=(0,i.debounce)(function(){t.loadSelection()},500),t.loadDebounced=(0,i.debounce)(function(){t.load()},500),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){e=e.dataSource.ApiKey+"-"+e.dataSource.ApiSecret;e!==this.state.monitorApi&&(this.loadDebounced(),this.setState({monitorApi:e}))}},{key:"load",value:function(){var t=this,e=this.props.dataSource;e.ApiKey&&e.ApiSecret?(this.setState({loading:!0}),a.default.loadBuckets(e).then(function(e){e=e.Children||[];t.setState({buckets:e.map(function(e){return e.Path}),loading:!1})}).catch(function(e){t.setState({buckets:[],loading:!1})})):this.setState({buckets:[]})}},{key:"createBucket",value:function(){var t=this,e=this.props.dataSource,n=this.state.createBucket;this.setState({loading:!0}),a.default.createBucket(e,n).then(function(){t.setState({create:!1,createBucket:""}),t.load()}).catch(function(e){t.setState({loading:!1})})}},{key:"loadSelection",value:function(){var t=this,e=this.props.dataSource;e.ApiKey&&e.ApiSecret?e.ObjectsBucket?this.setState({selection:[e.ObjectsBucket]}):(this.setState({selection:[]}),e.StorageConfiguration.bucketsRegexp&&a.default.loadBuckets(e,e.StorageConfiguration.bucketsRegexp).then(function(e){e=e.Children||[];t.setState({selection:e.map(function(e){return e.Path})})})):this.setState({selection:[]})}},{key:"modeFromValue",value:function(){var e="picker";return e=this.props.dataSource.StorageConfiguration.bucketsRegexp?"regexp":e}},{key:"toggleMode",value:function(){var e=this.state.mode,t=this.props.dataSource;"picker"===e?(t.ObjectsBucket&&(t.StorageConfiguration.bucketsRegexp=t.ObjectsBucket,t.ObjectsBucket="",this.reloadSelection()),this.setState({mode:"regexp"})):(t.StorageConfiguration.bucketsRegexp="",this.reloadSelection(),this.setState({mode:"picker"}))}},{key:"togglePicker",value:function(e){var t=this.props.dataSource,n=this.state.selection,r=[],o=n.indexOf(e);1===(r=-1===o?[].concat(u(n),[e]):y.default.arrayWithout(n,o)).length?(t.ObjectsBucket=r[0],t.StorageConfiguration.bucketsRegexp=""):(t.ObjectsBucket="",t.StorageConfiguration.bucketsRegexp=r.map(function(e){return"^"+e+"$"}).join("|")),this.setState({selection:r})}},{key:"updateRegexp",value:function(e){this.props.dataSource.StorageConfiguration.bucketsRegexp=e,this.reloadSelection()}},{key:"render",value:function(){function e(e){return f["ajxp_admin.ds.editor.storage."+e]||e}var r=this,o=this.props.dataSource,t=this.state,n=t.buckets,a=t.selection,i=t.mode,u=t.loading,l=t.create,c=t.createBucket,s=void 0===c?"":c,f=d.default.getInstance().MessageHash,t={style:{width:30,height:30,padding:5},iconStyle:{width:20,height:20,color:"rgba(0,0,0,.5)",fontSize:18}},c=!o.ApiKey||!o.ApiSecret;return p.default.createElement("div",null,p.default.createElement("div",{style:{display:"flex",alignItems:"flex-end",marginTop:20}},p.default.createElement("div",null,e("buckets.legend")),p.default.createElement("div",{style:{flex:1}}),p.default.createElement("div",{style:{display:"flex",alignItems:"flex-end",marginRight:l?30:0}},l&&p.default.createElement("div",{style:{width:200,height:36}},p.default.createElement(v,{hintText:e("buckets.create.hint"),fullWidth:!0,value:s,onChange:function(e,t){r.setState({createBucket:y.default.computeStringSlug(t)})}})),p.default.createElement(h.IconButton,m({iconClassName:l?"mdi mdi-check":"mdi mdi-plus-circle",tooltip:e("buckets.create"),tooltipPosition:"top-left",onClick:function(){l?r.createBucket():r.setState({create:!0})},disabled:c},t)),l&&p.default.createElement(h.IconButton,m({iconClassName:"mdi mdi-close",tooltip:f[54],tooltipPosition:"top-left",onClick:function(){return r.setState({create:!1,createBucket:""})},disabled:c},t))),p.default.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},"regexp"===i&&p.default.createElement("div",{style:{width:200,height:36}},p.default.createElement(v,{hintText:e("buckets.regexp.hint"),fullWidth:!0,value:o.StorageConfiguration.bucketsRegexp||"",onChange:function(e,t){r.updateRegexp(t)}})),p.default.createElement(h.IconButton,m({iconClassName:"mdi mdi-filter",tooltip:"picker"===i?e("buckets.regexp"):"",tooltipPosition:"top-left",onClick:function(){r.toggleMode()},disabled:c},t))),p.default.createElement(h.IconButton,m({iconClassName:"mdi mdi-reload",tooltip:e("buckets.reload"),tooltipPosition:"top-left",onClick:function(){r.load()},disabled:c},t))),p.default.createElement("div",{style:{display:"flex",flexWrap:"wrap",marginTop:8,backgroundColor:"rgb(246 246 248)",borderRadius:"4px 4px 0 0",borderBottom:"1px solid #e0e0e0",minHeight:52,padding:2,maxHeight:275,overflowY:"auto"}},n.map(function(e){var t=-1!==a.indexOf(e),n={};return"picker"===i?n.onClick=function(){r.togglePicker(e)}:o.StorageConfiguration.bucketsRegexp||(n.onClick=function(){r.toggleMode(),r.togglePicker(e)}),p.default.createElement("div",{style:{margin:5}},p.default.createElement(h.Chip,m({},n,{backgroundColor:t?"#03a9f4":null}),e))}),0===n.length&&p.default.createElement("div",{style:{paddingLeft:5,textAlign:"center",fontSize:12,color:"rgba(0,0,0,.3)"}},e(c?"buckets.cont.nokeys":u?"buckets.cont.loading":"buckets.cont.empty"))))}}])&&c(e.prototype,t),n&&c(e,n),o}();n.default=e,t.exports=n.default},{"../model/DataSource":18,lodash:23,"material-ui":"material-ui",pydio:"pydio","pydio/util/lang":"pydio/util/lang",react:"react"}],9:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=f(e("prop-types")),o=f(e("pydio")),l=f(e("pydio/http/api")),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("react")),c=f(e("../model/DataSource")),O=e("material-ui"),a=e("material-ui/styles"),C=f(e("./DataSourceLocalSelector")),x=f(e("./DsStorageSelector")),P=f(e("./DataSourceBucketSelector")),s=e("cells-sdk");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function R(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=m(n);return e=r?(e=m(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e=AdminComponents,A=e.PaperEditorLayout,T=e.AdminStyles,o=o.default.requireLib("hoc"),N=o.ModernTextField,M=o.ModernSelectField,D=o.ModernStyles,L=["main","storage","data","advanced"],o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,E["default"].Component);var e,t,n,i=h(u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=i.call(this,e),n=e.pydio,r=e.create,o=e.dataSource,a=e.existingNames,e=e.createStructure,e=new c.default(o,a,e);return t.state={dirty:!1,create:r,observable:e,model:e.getModel(),loaded:!1,valid:e.isValid(),encryptionKeys:[],versioningPolicies:[],s3Custom:e.getModel().StorageConfiguration.customEndpoint?"custom":"aws",m:function(e){return n.MessageHash["ajxp_admin.ds.editor."+e]||e}},c.default.loadEncryptionKeys().then(function(e){t.setState({encryptionKeys:e.Keys||[]})}),c.default.loadVersioningPolicies().then(function(e){t.setState({versioningPolicies:e.Policies||[]})}),t}return e=u,(t=[{key:"componentWillReceiveProps",value:function(e){var t;e.dataSource&&this.state.model.Name!==e.dataSource.Name&&(this.state.dirty?alert(this.props.pydio.MessageHash["role_editor.19"]):(t=new c.default(e.dataSource),this.setState({observable:t,model:t.getModel()}))),e.create&&this.state.create!==e.create&&this.setState({create:e.create})}},{key:"componentDidMount",value:function(){var e=this;this.state.observable.observe("update",function(){e.setState({dirty:!0}),e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.state.observable.stopObserving("update")}},{key:"resetForm",value:function(){var e=this,t=this.state.observable.revert();this.setState({valid:!0,dirty:!1,model:t},function(){e.forceUpdate()})}},{key:"deleteSource",value:function(){var e=this,t=this.state,n=t.m,r=t.observable;this.props.pydio.UI.openConfirmDialog({message:n("delete.warning"),validCallback:function(){r.deleteSource().then(function(){e.props.closeEditor(),e.props.reloadList()})},destructive:[r.getModel().Name]})}},{key:"saveSource",value:function(){var t=this,e=this.state,n=e.observable,r=e.create;this.state.observable.saveSource().then(function(){var e=null;r&&(e=n.getModel().Name),t.setState({valid:!0,dirty:!1,create:!1}),r&&t.props.closeEditor(),t.props.reloadList(e)})}},{key:"launchResync",value:function(){this.state.observable.resyncSource()}},{key:"toggleEncryption",value:function(e){var t=this.state.model;"VALUE_CREATE"===e?this.setState({showDialog:"enableEncryptionWithCreate",dialogTargetValue:e,newKeyName:t.Name||""}):"VALUE_CLEAR"===e?this.setState({showDialog:"disableEncryption",dialogTargetValue:e}):"MASTER"!==t.EncryptionMode?this.setState({showDialog:"enableEncryption",dialogTargetValue:e}):t.EncryptionKey=e}},{key:"confirmEncryption",value:function(e){var t=this,n=this.state,r=n.model,o=n.newKeyName;if("VALUE_CREATE"===e){var a=new s.ConfigServiceApi(l.default.getRestClient()),n=new s.EncryptionAdminCreateKeyRequest;return n.KeyID=o,n.Label=o,void a.createEncryptionKey(n).then(function(e){r.EncryptionMode="MASTER",r.EncryptionKey=o,t.setState({showDialog:!1,dialogTargetValue:null,encryptionKeys:[{ID:o,Label:o}]})}).catch(function(){})}"VALUE_CLEAR"===e?(r.EncryptionMode="CLEAR",r.EncryptionKey=""):(r.EncryptionMode="MASTER",r.EncryptionKey=e),this.setState({showDialog:!1,dialogTargetValue:null})}},{key:"toggleS3Custom",value:function(e){var t=this.state.model;"aws"===e?(t.StorageConfiguration.customEndpoint="",t.StorageConfiguration.customRegion="",t.StorageConfiguration.minioServer="",t.StorageConfiguration.signatureVersion=""):(t.StorageConfiguration.minioServer="minio"===e?"true":"",t.StorageConfiguration.signatureVersion="v4"),this.setState({s3Custom:e})}},{key:"stepperBack",value:function(){var e=this.state.currentPane,e=void 0===e?"main":e,e=L.indexOf(e);0<e&&this.setState({currentPane:L[e-1]})}},{key:"stepperNext",value:function(){var e=this.state.currentPane,e=void 0===e?"main":e,e=L.indexOf(e);e<L.length-1&&this.setState({currentPane:L[e+1]})}},{key:"render",value:function(){var r=this,e=this.props,t=e.storageTypes,n=e.pydio,o=e.readonly,a=this.state,i=a.currentPane,u=void 0===i?"main":i,l=a.model,c=a.create,s=a.observable,f=a.encryptionKeys,d=a.versioningPolicies,p=a.showDialog,y=a.dialogTargetValue,h=a.newKeyName,m=a.s3Custom,g=a.m,v=[];o||c||(v.push(E.default.createElement(O.Toggle,{style:{borderRight:"1px solid #e0e0e0",paddingRight:14,zoom:.8},labelStyle:{fontSize:17},toggled:!l.Disabled,onToggle:function(e,t){l.Disabled=!t},labelPosition:"right",label:g("options.enabled")})),v.push(A.actionButton(this.context.getMessage("plugins.6"),"mdi mdi-undo",function(){r.resetForm()},!this.state.dirty)),v.push(A.actionButton(this.context.getMessage("plugins.5"),"mdi mdi-content-save",function(){r.saveSource()},!this.state.dirty)));this.context.getMessage("ws.75"),this.context.getMessage("ws.76"),c&&"LOCAL"===l.StorageType&&(O.Divider,g("legend.local"),g("legend.local.li.1"),g("legend.local.li.2"),g("legend.local.li.3")),c&&"S3"===l.StorageType&&(O.Divider,g("legend.s3.1"),g("legend.s3.2")),c||(O.Divider,g("legend.resync"),O.RaisedButton,g("legend.resync.button"),this.launchResync.bind(this)),c||o||(O.Divider,g("legend.delete.1"),g("legend.delete.2"),O.RaisedButton,g("legend.delete.button"),this.deleteSource.bind(this));var e=l.Name?g("title").replace("%s",l.Name):g("new"),b=l.StorageConfiguration,i=T(this.props.muiTheme.palette),a={title:R(R({},i.body.block.headerFull),{},{margin:"0 -20px"}),legend:{},subLegend:{padding:"10px 6px 0 4px",fontSize:12,lineHeight:"16px",color:"rgba(0,0,0,0.6)",textAlign:"justify"},section:R({padding:"0 20px 20px",margin:10,backgroundColor:"white"},i.body.block.container),storageSection:{padding:20,marginTop:-1}},S={LOCAL:{primaryText:this.context.getMessage("ds.storage.fs","ajxp_admin"),image:"fs.png"},S3:{primaryText:this.context.getMessage("ds.storage.s3","ajxp_admin"),image:"s3-compat.png"},AZURE:{primaryText:this.context.getMessage("ds.storage.azure","ajxp_admin"),image:"azure.png"},GCS:{primaryText:this.context.getMessage("ds.storage.gcs","ajxp_admin"),image:"gcs.png"}},_={};t.forEach(function(e){_[e]=S[e]}),l.StorageType&&!_[l.StorageType]&&(_[l.StorageType]=S[l.StorageType]);var w,k,o=function(e,t){return t===u?e:R(R({},e),{},{display:"none"})};c&&(i={display:"flex",alignItems:"center",padding:"0 20px 0 8px",position:"absolute",height:64,zIndex:10,top:64,left:0,right:0,backgroundColor:"rgb(246 246 248)",boxShadow:"rgba(0, 0, 0, .1) 0px 1px 2px"},t=0===L.indexOf(u),k=L.indexOf(u)===L.length-1,("main"!==u||l.Name&&!s.getNameError(g))&&("storage"!==u||s.isValid())||(k=!0),w=E.default.createElement("div",{style:i},E.default.createElement("div",{style:{flex:1}},E.default.createElement(O.Stepper,{activeStep:L.indexOf(u)},E.default.createElement(O.Step,null,E.default.createElement(O.StepLabel,null,g("tab.identifier"))),E.default.createElement(O.Step,null,E.default.createElement(O.StepLabel,null,g("tab.storage"))),E.default.createElement(O.Step,null,E.default.createElement(O.StepLabel,null,g("tab.lifecycle"))),E.default.createElement(O.Step,null,E.default.createElement(O.StepLabel,null,g("tab.advanced")))))),k=E.default.createElement("div",{style:R(R({},i),{},{top:null,bottom:0,backgroundColor:"white",boxShadow:"rgba(0, 0, 0, .1) 0px -1px 2px"})},E.default.createElement("span",{style:{flex:1}}),E.default.createElement(O.FlatButton,{primary:!0,label:g("tab.button-back"),onClick:function(){return r.stepperBack()},disabled:t}),E.default.createElement(O.FlatButton,{primary:!0,label:g("tab.button-next"),onClick:function(){return r.stepperNext()},disabled:k}),E.default.createElement("div",{style:{width:1,height:40,backgroundColor:"#efefef",margin:"0 5px"}}),E.default.createElement(O.FlatButton,{primary:!0,label:g("tab.button-create"),onClick:function(){return r.saveSource()},disabled:!s.isValid()})));p=E.default.createElement(O.Dialog,{open:p,title:g("enc.warning"),onRequestClose:function(){r.setState({showDialog:!1,dialogTargetValue:null})},actions:[E.default.createElement(O.FlatButton,{label:n.MessageHash[54],onClick:function(){r.setState({showDialog:!1,dialogTargetValue:null})}}),E.default.createElement(O.FlatButton,{label:g("enc.validate"),disabled:"enableEncryptionWithCreate"===p&&!h,onClick:function(){r.confirmEncryption(y)}})]},("enableEncryption"===p||"enableEncryptionWithCreate"===p)&&E.default.createElement("div",{style:{lineHeight:"1.6em"}},g("enc.dialog.enable.1")," ",g("enc.dialog.enable.2")," ",E.default.createElement("b",{style:{fontWeight:500}},g("enc.dialog.enable.2bold")),E.default.createElement("br",null),g("enc.dialog.enable.3"),"enableEncryptionWithCreate"===p&&E.default.createElement("div",null,E.default.createElement(N,{hintText:g("enc.dialog.enable.create"),fullWidth:!0,variant:"v2",value:h,onChange:function(e,t){r.setState({newKeyName:t})}}))),"disableEncryption"===p&&E.default.createElement("div",{style:{lineHeight:"1.6em"}},g("enc.dialog.disable"))),s=E.default.createElement(O.Paper,{zDepth:0,style:o(a.section,"main")},E.default.createElement("div",{style:R(R({},a.title),{},{marginBottom:16})},g("options")),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("options.id")+" *",disabled:!c,value:l.Name,onChange:function(e,t){l.Name=t},errorText:s.getNameError(g)})),m=E.default.createElement(O.Paper,{zDepth:0,style:o(R(R({},a.section),{},{padding:0,marginBottom:c?200:null}),c?"storage":"main")},E.default.createElement(x.default,{disabled:!c,value:l.StorageType,onChange:function(e,t,n){l.StorageType=n},values:_}),"LOCAL"===l.StorageType&&E.default.createElement("div",{style:a.storageSection},E.default.createElement("div",{style:a.legend},g("storage.legend.fs")),E.default.createElement(C.default,{model:l,pydio:this.props.pydio,styles:a}),!l.FlatStorage&&E.default.createElement("div",null,E.default.createElement(O.Checkbox,j({labelPosition:"right",label:g("storage.fs.macos"),checked:"true"===b.normalize,onCheck:function(e,t){b.normalize=t?"true":"false"}},D.toggleFieldV2)))),"S3"===l.StorageType&&E.default.createElement("div",{style:a.storageSection},E.default.createElement("div",{style:a.legend},g("storage.legend.s3")),E.default.createElement(M,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.endpoint.type"),value:m,onChange:function(e,t,n){r.toggleS3Custom(n)}},E.default.createElement(O.MenuItem,{value:"aws",primaryText:g("storage.s3.endpoint.amazon")}),E.default.createElement(O.MenuItem,{value:"minio",primaryText:g("storage.s3.endpoint.minio")}),E.default.createElement(O.MenuItem,{value:"custom",primaryText:g("storage.s3.endpoint.custom")})),("custom"===m||"minio"===m)&&E.default.createElement("div",null,E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.endpoint")+" - "+g("storage.s3.endpoint.hint"),value:l.StorageConfiguration.customEndpoint,onChange:function(e,t){l.StorageConfiguration.customEndpoint=t}}),E.default.createElement("div",{style:{display:"flex"}},E.default.createElement("div",{style:{flex:3,marginRight:5}},E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.region"),value:l.StorageConfiguration.customRegion,onChange:function(e,t){l.StorageConfiguration.customRegion=t}})),E.default.createElement("div",{style:{flex:1}},E.default.createElement(M,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.signatureVersion"),value:l.StorageConfiguration.signatureVersion,onChange:function(e,t,n){l.StorageConfiguration.signatureVersion=n}},E.default.createElement(O.MenuItem,{value:"v4",primaryText:"v4"}),E.default.createElement(O.MenuItem,{value:"v2",primaryText:"v2"}))))),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.api")+" *",value:l.ApiKey,onChange:function(e,t){l.ApiKey=t}}),E.default.createElement("form",{autoComplete:"off"},E.default.createElement("input",{type:"hidden",value:"something"}),E.default.createElement(N,{autoComplete:"off",fullWidth:!0,variant:"v2",type:"password",hintText:g("storage.s3.secret")+" *",value:l.ApiSecret,onChange:function(e,t){l.ApiSecret=t}})),E.default.createElement(P.default,{dataSource:l,hintText:g("storage.s3.bucket")}),l.ObjectsBucket&&E.default.createElement("div",{style:{paddingTop:20}},E.default.createElement("div",{style:R({},a.subLegend)},g("storage.s3.legend.bucketPathPrefix")),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.bucketPathPrefix"),value:l.ObjectsBaseFolder||"",onChange:function(e,t){l.ObjectsBaseFolder=t}})),(l.ObjectsBucket||l.StorageConfiguration.bucketsRegexp)&&E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.s3.legend.storageClass")),E.default.createElement("div",null,E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.storageClass"),value:l.StorageConfiguration.storageClass||"",onChange:function(e,t){l.StorageConfiguration.storageClass=t}}))),l.StorageConfiguration.bucketsRegexp&&!l.ObjectsBucket&&E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.s3.legend.tags")),E.default.createElement("div",null,E.default.createElement(N,{fullWidth:!0,variant:"v2",disabled:!!l.ObjectsBucket,hintText:g("storage.s3.bucketsTags"),value:l.StorageConfiguration.bucketsTags||"",onChange:function(e,t){l.StorageConfiguration.bucketsTags=t}})))),"AZURE"===l.StorageType&&E.default.createElement("div",{style:a.storageSection},E.default.createElement("div",{style:a.legend},g("storage.legend.azure")),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.azure.bucket")+" *",value:l.ObjectsBucket,onChange:function(e,t){l.ObjectsBucket=t}}),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.azure.api")+" *",value:l.ApiKey,onChange:function(e,t){l.ApiKey=t}}),E.default.createElement(N,{fullWidth:!0,variant:"v2",type:"password",hintText:g("storage.azure.secret")+" *",value:l.ApiSecret,onChange:function(e,t){l.ApiSecret=t}})),"GCS"===l.StorageType&&E.default.createElement("div",{style:a.storageSection},E.default.createElement("div",{style:a.legend},g("storage.legend.gcs")),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.gcs.bucket")+" *",value:l.ObjectsBucket,onChange:function(e,t){l.ObjectsBucket=t}}),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.gcs.credentials")+" *",value:l.StorageConfiguration.jsonCredentials,onChange:function(e,t){l.StorageConfiguration.jsonCredentials=t},multiLine:!0}),E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.path"),value:l.ObjectsBaseFolder,onChange:function(e,t){l.ObjectsBaseFolder=t}}))),f=E.default.createElement(O.Paper,{zDepth:0,style:o(a.section,"data")},E.default.createElement("div",{style:a.title},g("datamanagement")),!l.StorageConfiguration.cellsInternal&&E.default.createElement(E.Fragment,null,E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.legend.versioning")),E.default.createElement(M,{fullWidth:!0,variant:"v2",hintText:g("versioning"),value:l.VersioningPolicyName,onChange:function(e,t,n){l.VersioningPolicyName=n}},E.default.createElement(O.MenuItem,{value:void 0,primaryText:g("versioning.disabled")}),d.map(function(e){return E.default.createElement(O.MenuItem,{value:e.Uuid,primaryText:e.Name+" (stored in "+e.VersionsDataSourceName+")"})}))),E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.legend.encryption")),E.default.createElement(M,{fullWidth:!0,variant:"v2",hintText:g("enc.key"),value:"MASTER"===l.EncryptionMode?l.EncryptionKey:"VALUE_CLEAR",onChange:function(e,t,n){r.toggleEncryption(n)}},E.default.createElement(O.MenuItem,{value:"VALUE_CLEAR",primaryText:g("enc.key.clear")}),f.map(function(e){return E.default.createElement(O.MenuItem,{value:e.ID,primaryText:e.Label})}),"MASTER"!==l.EncryptionMode&&0===f.length&&E.default.createElement(O.MenuItem,{value:"VALUE_CREATE",primaryText:g("enc.key.create")}))),a=E.default.createElement(O.Paper,{zDepth:0,style:o(a.section,"advanced")},E.default.createElement("div",{style:a.title},g("tab.advanced")),!l.StorageConfiguration.cellsInternal&&E.default.createElement("div",null,E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.legend.flatStorage")),E.default.createElement(O.Checkbox,j({label:g("storage.flatStorage"),labelPosition:"right",disabled:!c,checked:!l.FlatStorage,onCheck:function(e,t){l.FlatStorage=!t}},D.toggleFieldV2)),c&&l.FlatStorage&&E.default.createElement(N,{fullWidth:!0,variant:"v2",hintText:g("initFlatFromSnapshot"),value:l.StorageConfiguration.initFromSnapshot||"",onChange:function(e,t){t?l.StorageConfiguration.initFromSnapshot=t:delete l.StorageConfiguration.initFromSnapshot}}),l.FlatStorage&&(c||l.StorageConfiguration.foldersShardingPattern)&&E.default.createElement(N,{fullWidth:!0,variant:"v2",disabled:!c,hintText:g("foldersShardingPattern"),value:l.StorageConfiguration.foldersShardingPattern||"",onChange:function(e,t){t?l.StorageConfiguration.foldersShardingPattern=t:delete l.StorageConfiguration.foldersShardingPattern}})),!l.FlatStorage&&E.default.createElement("div",null,E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.legend.skipResync")),E.default.createElement(O.Checkbox,j({label:g("storage.skipResync"),labelPosition:"right",checked:l.SkipSyncOnRestart,onCheck:function(e,t){l.SkipSyncOnRestart=t}},D.toggleFieldV2))),"LOCAL"!==l.StorageType&&E.default.createElement("div",null,E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.legend.readOnly")),E.default.createElement(O.Checkbox,j({label:g("storage.readOnly"),labelPosition:"right",checked:"true"===l.StorageConfiguration.readOnly,onCheck:function(e,t){l.StorageConfiguration.readOnly=t?"true":""}},D.toggleFieldV2))),(!l.StorageConfiguration.readOnly||"true"!==l.StorageConfiguration.readOnly)&&E.default.createElement("div",null,E.default.createElement("div",{style:R(R({},a.subLegend),{},{paddingTop:20})},g("storage.legend.checksumMapper")),E.default.createElement(O.Checkbox,j({label:g("storage.nativeEtags"),labelPosition:"right",checked:l.StorageConfiguration.nativeEtags,onCheck:function(e,t){l.StorageConfiguration.nativeEtags=t?"true":""}},D.toggleFieldV2)),!l.StorageConfiguration.nativeEtags&&E.default.createElement("div",null,E.default.createElement(O.Checkbox,j({label:g("storage.checksumMapper"),labelPosition:"right",checked:"dao"===l.StorageConfiguration.checksumMapper,onCheck:function(e,t){l.StorageConfiguration.checksumMapper=t?"dao":""}},D.toggleFieldV2)))));return E.default.createElement(A,{title:e,titleLeftIcon:"mdi mdi-database",titleActionBar:v,closeAction:this.props.closeEditor,leftNavItems:c?null:[{label:g("tab.main"),value:"main",icon:"mdi mdi-database-plus"},{label:g("tab.lifecycle"),value:"data",icon:"mdi mdi-recycle"},{label:g("tab.advanced"),value:"advanced",icon:"mdi mdi-settings"}],leftNavSelected:u,leftNavChange:function(e){r.setState({currentPane:e})},className:"workspace-editor",contentFill:!1,rightPanelStyle:c?{paddingTop:64}:null},w,p,m,s,f,a,k)}}])&&p(e.prototype,t),n&&p(e,n),u}();(n.default=o).contextTypes={messages:r.default.object,getMessage:r.default.func},n.default=o=(0,a.muiThemeable)()(o),t.exports=n.default},{"../model/DataSource":18,"./DataSourceBucketSelector":8,"./DataSourceLocalSelector":10,"./DsStorageSelector":11,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react"}],10:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=d(e("react")),r=d(e("pydio")),u=d(e("pydio/http/api")),l=e("cells-sdk"),s=e("material-ui"),a=d(e("lodash.debounce")),i=d(e("pydio/util/lang")),f=d(e("pydio/util/path"));function d(e){return e&&e.__esModule?e:{default:e}}function p(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function y(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=E(n);return e=r?(e=E(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?k(t):e}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=r.default.requireLib("hoc"),O=r.ModernTextField,C=r.ModernSelectField,x=(r.ModernStyles,r.ModernAutoComplete),P=function(){S(r,c["default"].Component);var n=w(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).debounced=(0,a.default)(t.loadValues.bind(k(t)),300),t.state={searchText:e.value,value:e.value},t}return b(r,[{key:"handleUpdateInput",value:function(e){this.debounced(),this.setState({searchText:e})}},{key:"handleNewRequest",value:function(e){var t,n,r=this.state.nodes,o=!1;void 0===e.key?(t="/"+i.default.trim(e,"/"),n=!1,r.map(function(e){e.Path!==t&&0!==e.Path.indexOf(t+"/")||(n=!0)}),n&&(o=!0)):(t=e.key,o=!0),this.setState({value:t,exist:o}),this.props.onChange(t,o),this.loadValues(t)}},{key:"componentWillMount",value:function(){this.lastSearch=null;var e="";this.props.value&&(e=this.props.value),this.loadValues(e)}},{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value,exist:!0})}},{key:"loadValues",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=this.props.peerAddress,r=this.state.searchText,o=e;if(!e&&r&&(a=r.lastIndexOf("/"),o=r.substr(0,a)),null!==this.lastSearch&&this.lastSearch===o)return Promise.resolve();this.lastSearch=o;var r=new l.ConfigServiceApi(u.default.getRestClient()),a=new l.RestListPeerFoldersRequest;return a.PeerAddress="ANY"===n?"":n,a.Path=o,this.setState({loading:!0}),r.listPeerFolders(n,a).then(function(e){e=(e=e.Children||[]).map(function(e){return"/"!==e.Path[0]&&(e.Path="/"+e.Path),e});t.setState({nodes:e,loading:!1})}).catch(function(){t.setState({loading:!1})})}},{key:"createFolder",value:function(e){var t=this,n=this.props,r=n.peerAddress,o=n.pydio,a=this.state.value,n=new l.ConfigServiceApi(u.default.getRestClient()),i=new l.RestCreatePeerFolderRequest;i.PeerAddress="ANY"===r?"":r,i.Path=a+"/"+e,n.createPeerFolder(r,i).then(function(e){t.lastSearch=null,t.loadValues(a).then(function(){t.handleNewRequest({key:i.Path}),t.setState({searchText:i.Path})})}).catch(function(e){o.UI.displayMessage("ERROR",e.message)})}},{key:"renderNode",value:function(e){var t=f.default.getBasename(e.Path),n=f.default.getDirname(e.Path),r=c.default.createElement("span",null,e.Path);return i.default.computeStringSlug(t)!==t?r=c.default.createElement("span",null,c.default.createElement("span",null,n),"/",c.default.createElement("span",{style:{color:"#c62828"}},t)):e.MetaStore&&e.MetaStore.symlink&&(r=c.default.createElement("span",null,c.default.createElement("span",null,n),"/",c.default.createElement("span",{style:{color:"#1976d2"}},t))),{key:e.Path,text:e.Path,invalid:!1,value:c.default.createElement(s.MenuItem,null,c.default.createElement(s.FontIcon,{className:"mdi mdi-folder",color:"#616161",style:{float:"left",marginRight:8}})," ",r)}}},{key:"showCreateDialog",value:function(){function e(e){return n.MessageHash["ajxp_admin.ds.editor.selector."+e]||e}var t=this,n=this.props.pydio,r=this.state.value;n.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitle:e("mkdir"),legendId:e("mkdir.legend").replace("%s",r),fieldLabelId:e("mkdir.field"),submitValue:function(e){e&&t.createFolder(e)}})}},{key:"render",value:function(){var t=this,e=this.state,n=e.nodes,r=e.loading,o=e.exist,a=e.value,i=e.searchText,u=this.props,e=u.fieldLabel,u=u.pydio,l=[];n&&n.forEach(function(e){l.push(t.renderNode(e))});n=i||a;return c.default.createElement("div",{style:{position:"relative",marginTop:-5}},c.default.createElement("div",{style:{position:"absolute",right:6,top:29,width:30,zIndex:1}},c.default.createElement(s.RefreshIndicator,{size:25,left:0,top:0,status:r?"loading":"hide"})),a&&o&&!r&&(!i||i===a)&&c.default.createElement("div",{style:{position:"absolute",right:0,zIndex:1,top:18}},c.default.createElement(s.IconButton,{iconClassName:"mdi mdi-folder-plus",iconStyle:{color:"#9e9e9e"},onClick:function(){return t.showCreateDialog()},tooltip:u.MessageHash["ajxp_admin.ds.editor.selector.mkdir"],tooltipPosition:"top-center"})),c.default.createElement(x,{fullWidth:!0,searchText:n,onUpdateInput:this.handleUpdateInput.bind(this),onNewRequest:this.handleNewRequest.bind(this),dataSource:l,hintText:e,filter:function(e,t){return 0===t.toLowerCase().indexOf(e.toLowerCase())},openOnFocus:!0,menuProps:{maxHeight:200}}))}}]),r}(),r=function(){S(r,c["default"].Component);var n=w(r);function r(t){var e;return g(this,r),(e=n.call(this,t)).state={peerAddresses:[],invalid:!1,m:function(e){return t.pydio.MessageHash["ajxp_admin.ds.editor."+e]||e}},e}return b(r,[{key:"compareAddresses",value:function(e,t){var n=e.split("|"),r=t.split("|");return r.filter(function(e){return-1<n.indexOf(e)}).length||n.filter(function(e){return-1<r.indexOf(e)}).length}},{key:"componentDidMount",value:function(){var t=this,n=this.props.model;new l.ConfigServiceApi(u.default.getRestClient()).listPeersAddresses().then(function(e){e=e.PeerAddresses||[];1!==e||n.PeerAddress||(n.PeerAddress=e[0]),t.setState({peerAddresses:e}),n.PeerAddress&&-1===e.indexOf(n.PeerAddress)&&((e=e.filter(function(e){return t.compareAddresses(e,n.PeerAddress)})).length?n.PeerAddress=e[0]:t.setState({invalidAddress:n.PeerAddress}))})}},{key:"baseIsInvalid",value:function(e){var t=this.state.m,n=!1,r=f.default.getBasename(e);return i.default.trim(e,"/").split("/").length<2?n=t("selector.error.depth"):i.default.computeStringSlug(r)!==r&&(n=t("selector.error.dnsname")),n}},{key:"onPathChange",value:function(e,t){var n=this.props.model,r=this.baseIsInvalid(e);n.invalid=r,n.StorageConfiguration.folder=e,t?void 0!==n.StorageConfiguration.create&&delete n.StorageConfiguration.create:n.StorageConfiguration.create="true",this.setState({invalid:r})}},{key:"onPeerChange",value:function(e){var t=this.props.model,n=this.state.invalidAddress;e!==n&&(t.PeerAddress=e,n&&this.setState({invalidAddress:null}))}},{key:"render",value:function(){var r=this,e=this.props,t=e.model,n=e.pydio,o=e.styles,a=this.state,i=a.peerAddresses,u=a.invalidAddress,e=a.invalid,l=a.m,i=h(i),i=["ANY"].concat(h(i));return u&&"ANY"!==u&&(i=[u].concat(h(i))),c.default.createElement("div",null,c.default.createElement("div",{style:{paddingBottom:8}},c.default.createElement("div",{style:o.subLegend},l("storage.legend.fs.peer")),c.default.createElement(C,{value:t.PeerAddress||"",variant:"v2",hintText:l("selector.peer")+" *",onChange:function(e,t,n){return r.onPeerChange(n)},fullWidth:!0},i.map(function(e){var t=l("selector.peer.any");return"ANY"!==e&&(t=l("selector.peer.word")+" : "+e.replace("|"," | ")+(e===u?" ("+l("selector.peer.invalid")+")":"")),c.default.createElement(s.MenuItem,{value:e,primaryText:t})}))),c.default.createElement("div",null,c.default.createElement("div",{style:y(y({},o.subLegend),{},{paddingBottom:6})},l("storage.legend.fs.path")),t.PeerAddress&&c.default.createElement(P,{pydio:n,value:t.StorageConfiguration.folder,peerAddress:t.PeerAddress,onChange:this.onPathChange.bind(this),fieldLabel:l("selector.completer")+(t.StorageConfiguration.create?" ("+l("selector.completer.create")+")":"")+" *",hintText:l("selector.completer.hint")}),!t.PeerAddress&&c.default.createElement(O,{style:{marginTop:-3},fullWidth:!0,variant:"v2",disabled:!0,value:t.StorageConfiguration.folder,floatingLabelText:l("selector.folder")+" *",hintText:l("selector.folder.hint")})),e&&c.default.createElement("div",{style:{color:"#c62828"}},e))}}]),r}();n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk","lodash.debounce":"lodash.debounce","material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/lang":"pydio/util/lang","pydio/util/path":"pydio/util/path",react:"react"}],11:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("react")),u=r(e("pydio/util/dom"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return e=r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){s(t,i["default"].Component);var e=d(t);function t(){return a(this,t),e.apply(this,arguments)}return c(t,[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.selected,r=e.value,o=e.primaryText,a=e.image,e={cont:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",padding:"10px 10px 0 10px",backgroundColor:"transparent",borderBottom:"2px solid transparent",transition:u.default.getBeziersTransition()},image:{width:30,height:30,opacity:.3,transition:u.default.getBeziersTransition()},label:{margin:5,marginTop:8,fontSize:11,fontWeight:500,color:"rgba(0,0,0,.3)",textAlign:"center",transition:u.default.getBeziersTransition()}};return n&&(e.cont.borderBottom="2px solid #0e4d6d",e.image.opacity=1,e.label.color="#0e4d6d"),i.default.createElement("div",{zDepth:0,style:e.cont,onClick:function(e){t(r)},rounded:!1},a&&i.default.createElement("img",{style:e.image,src:"/plug/access.settings/res/images/"+a}),i.default.createElement("div",{style:e.label},o))}}]),t}(),e=function(){s(n,i["default"].Component);var t=d(n);function n(e){return a(this,n),t.call(this,e)}return c(n,[{key:"onChange",value:function(e){var t=this.props,n=t.values;(0,t.onChange)(null,Object.keys(n).indexOf(e),e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.values,r=e.value,o=e.disabled;return i.default.createElement("div",{style:{display:"flex",padding:"0 1px",backgroundColor:"rgb(251, 251, 252)"}},Object.keys(n).map(function(e){return i.default.createElement(y,{value:e,selected:e===r,onSelect:o?function(){}:t.onChange.bind(t),primaryText:n[e].primaryText,image:n[e].image})}))}}]),n}();n.default=e,t.exports=n.default},{"pydio/util/dom":"pydio/util/dom",react:"react"}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==x(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("react")),r=a(e("prop-types")),h=a(e("pydio")),m=e("material-ui"),g=e("cells-sdk"),o=a(e("../model/Metadata")),v=a(e("pydio/http/api")),i=a(e("pydio/util/func")),u=a(e("pydio/http/resources-manager"));function a(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=C(n);return e=r?(e=C(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==x(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e=h.default.requireLib("hoc"),P=e.ModernTextField,j=e.ModernStyles;var R=function(){k(n,y["default"].Component);var t=O(n);function n(e){return p(this,n),t.call(this,e)}return w(n,[{key:"togglePolicies",value:function(t,e){var n=this.props,r=n.policies,r=void 0===r?[]:r,n=n.onChangePolicies,r=r.filter(function(e){return e.Action!==t});r.push(g.ServiceResourcePolicy.constructFromObject({Action:t,Effect:"allow",Subject:e?"profile:admin":"*"})),"READ"===t&&e&&(r=r.filter(function(e){return"WRITE"!==e.Action})).push(g.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Effect:"allow",Subject:"profile:admin"})),n(r)}},{key:"render",value:function(){var t,n,r=this,e=this.props,o=e.readonly,a=e.policies,i=e.pydio,e=function(e){return i.MessageHash["ajxp_admin.metadata."+e]||e};return a&&a.map(function(e){"profile:admin"===e.Subject&&"READ"===e.Action&&(t=!0),"profile:admin"===e.Subject&&"WRITE"===e.Action&&(n=!0)}),y.default.createElement(y.Fragment,null,y.default.createElement("div",null,y.default.createElement(m.Toggle,S({label:e("toggle.read"),disabled:o,labelPosition:"left",toggled:t,onToggle:function(e,t){r.togglePolicies("READ",t)}},j.toggleFieldV2))),y.default.createElement("div",null,y.default.createElement(m.Toggle,S({label:e("toggle.write"),labelPosition:"left",disabled:t||o,toggled:n,onToggle:function(e,t){r.togglePolicies("WRITE",t)}},j.toggleFieldV2))))}}]),n}(),e=function(){k(r,y["default"].Component);var e=O(r);function r(t){var n;return p(this,r),(n=e.call(this,t)).state={namespace:n.cloneNs(t.namespace),m:function(e){return t.pydio.MessageHash["ajxp_admin.metadata."+e]||e},selectorNewKey:"",selectorNewValue:"",PoliciesBuilder:R},u.default.loadClass("ReactMeta").then(function(e){n.setState({metaModule:e});e=n.props.policiesBuilder;e&&!function(e,t){var n=0<arguments.length&&void 0!==e?e:"",r=1<arguments.length?t:void 0;if(!n)return Promise.resolve(r);var o=(t=n.split(".")).shift(),a=t.join(".");return u.default.loadClass(o).then(function(e){var t=i.default.getFunctionByName(a,e);if(t)return t;if("object"===x(e)&&e[o]){e=i.default.getFunctionByName(a,e[o]);if(e)return e}if(r)return console.error("Cannot find editor component, using default instead",n,r),r;throw new Error("cannot find editor component")}).catch(function(e){if(r)return console.error("Cannot find editor component, using default instead",n,r),r;throw e})}(e,R).then(function(e){return n.setState({PoliciesBuilder:e})})}),n}return w(r,[{key:"cloneNs",value:function(e){return g.IdmUserMetaNamespace.constructFromObject(JSON.parse(JSON.stringify(e)))}},{key:"componentWillReceiveProps",value:function(e){var t,n;e.open!==this.props.open&&(t=e.create,n=e.namespaces,e=this.cloneNs(e.namespace),t&&n.length&&(e.Order=n.map(function(e){return e.Order||0}).reduce(function(e,t){return Math.max(e,t)},0)+1),this.setState({namespace:e}))}},{key:"save",value:function(){var e=this,t=this.state.namespace;o.default.putNS(t).then(function(){e.props.onRequestClose(),e.props.reloadList()})}},{key:"getHideValue",value:function(){var e=this.state.namespace;try{return JSON.parse(e.JsonDefinition).hide}catch(e){return!1}}},{key:"setHideValue",value:function(e){var t=this.state.namespace,n=JSON.parse(t.JsonDefinition);t.JsonDefinition=JSON.stringify(b(b({},n),{},{hide:e})),this.setState({namespace:t})}},{key:"getAdditionalData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.state.namespace;try{var n=JSON.parse(t.JsonDefinition).data||e;return e.items&&n.split?{items:n.split(",").map(function(e){e=c(e.split("|"),2);return{key:e[0],value:e[1]}})}:n}catch(e){}return e}},{key:"setAdditionalDataKey",value:function(e,t){var n=this.state.namespace,r=JSON.parse(n.JsonDefinition),t=d({},e,t);r.data=b(b({},r.data),t),n.JsonDefinition=JSON.stringify(r),this.setState({namespace:n})}},{key:"togglePolicies",value:function(t,e){var n=this,r=this.state.namespace,o=(r.Policies||[]).filter(function(e){return e.Action!==t});o.push(g.ServiceResourcePolicy.constructFromObject({Action:t,Effect:"allow",Subject:e?"profile:admin":"*"})),r.Policies=o,this.setState({namespace:r},function(){"READ"===t&&e&&n.togglePolicies("WRITE",!0)})}},{key:"render",value:function(){var n=this,e=this.props,t=e.create,r=e.namespaces,o=e.pydio,a=e.readonly,i=this.state,u=i.namespace,l=i.m,c=i.PoliciesBuilder,s=i.metaModule;if(!s)return null;var f=s.TypeEditor,e=u.Label||l("editor.title.create"),i="string";u.JsonDefinition&&(i=JSON.parse(u.JsonDefinition).type);var d,p,s=!1;u.Label?u.Namespace&&"usermeta-"!==u.Namespace||(s=!0,d=l("editor.ns.error")):(s=!0,p=l("editor.label.error")),t&&r.filter(function(e){return e.Namespace===u.Namespace}).length&&(s=!0,d=l("editor.ns.exists")),"choice"===i&&((r=this.getAdditionalData({items:[]}).items)&&r.length||(s=!0)),u.Policies&&u.Policies.map(function(e){"profile:admin"===e.Subject&&e.Action,"profile:admin"===e.Subject&&e.Action});s=[y.default.createElement(m.FlatButton,{primary:!0,label:o.MessageHash[54],onClick:this.props.onRequestClose}),y.default.createElement(m.FlatButton,{primary:!0,disabled:s||a,label:o.MessageHash[53],onClick:function(){n.save()}})];"tags"!==i||a||s.unshift(y.default.createElement(m.FlatButton,{primary:!1,label:l("editor.tags.reset"),onClick:function(){new g.UserMetaServiceApi(v.default.getRestClient()).deleteUserMetaTags(u.Namespace,"*").then(function(){o.UI.displayMessage("SUCCESS",l("editor.tags.cleared").replace("%s",u.Namespace))}).catch(function(e){o.UI.displayMessage("ERROR",e.message)})}}));i={section:{marginTop:10,fontWeight:500,fontSize:12}};return y.default.createElement(m.Dialog,{title:e,actions:s,modal:!1,contentStyle:{width:520},open:this.props.open,onRequestClose:this.props.onRequestClose,autoScrollBodyContent:!0,bodyStyle:{padding:20}},y.default.createElement(f,{m:l,pydio:o,namespace:u,forcePrefix:"usermeta-",onChange:function(e){return n.setState({namespace:e})},readonly:a,create:t,labelError:p,nameError:d,styles:i}),y.default.createElement("div",{style:i.section},h.default.getInstance().MessageHash[310]),y.default.createElement(m.Toggle,S({label:l("toggle.list-visibility"),disabled:a,labelPosition:"left",toggled:!this.getHideValue(),onToggle:function(e,t){n.setHideValue(!t)}},j.toggleFieldV2)),y.default.createElement(m.Toggle,S({label:l("toggle.index"),disabled:a,labelPosition:"left",toggled:u.Indexable,onToggle:function(e,t){u.Indexable=t,n.setState({namespace:u})}},j.toggleFieldV2)),c&&y.default.createElement(c,{policies:u.Policies,readonly:a,onChangePolicies:function(e){return n.setState({namespace:b(b({},u),{},{Policies:e})})},pydio:o}),y.default.createElement("div",{style:i.section},l("order")),y.default.createElement(P,{floatingLabelText:l("order"),value:u.Order||"0",onChange:function(e,t){u.Order=parseInt(t),n.setState({namespace:u})},fullWidth:!0,type:"number",readOnly:a,variant:"v2"}))}}]),r}();e.PropTypes={namespace:r.default.instanceOf(g.IdmUserMetaNamespace).isRequired,namespaces:r.default.arrayOf(g.IdmUserMetaNamespace),create:r.default.bool,reloadList:r.default.func,onRequestClose:r.default.func},n.default=e,t.exports=n.default},{"../model/Metadata":19,"cells-sdk":"cells-sdk","material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/util/func":"pydio/util/func",react:"react"}],13:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var y=s(e("react")),a=s(e("pydio/http/resources-manager")),h=e("material-ui"),r=e("material-ui/styles"),l=e("cells-sdk"),i=s(e("pydio/http/api")),u=s(e("pydio/util/xml")),c=s(e("pydio")),m=s(e("./VersionPolicyPeriods"));function s(e){return e&&e.__esModule?e:{default:e}}function f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function d(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return e=r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=c.default.requireLib("form"),c=AdminComponents,_=c.PaperEditorLayout,w=c.AdminStyles,c=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(p,y["default"].Component);var e,t,n,r=b(p);function p(t){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(e=r.call(this,t)).state={dirty:!1,policy:t.versionPolicy,loaded:!0,valid:!0,parameters:null,m:function(e){return t.pydio.MessageHash["ajxp_admin.versions.editor."+e]||e}},e}return e=p,n=[{key:"valuesToTreeVersioningPolicy",value:function(e){for(var t=[],n="IntervalStart",r="MaxNumber",o=n,a=r,i=0;void 0!==e[o]&&void 0!==e[a];){var u=new l.TreeVersioningKeepPeriod;u.IntervalStart=e[o],u.MaxNumber=e[a],t.push(u),delete e[a],delete e[o],o=n+"_"+ ++i,a=r+"_"+i}return e.KeepPeriods=t,l.TreeVersioningPolicy.constructFromObject(e)}},{key:"TreeVersioningPolicyToValues",value:function(e){var t,n=d({},e);return n.KeepPeriods&&(t=0,n.KeepPeriods.map(function(e){0<t?(n["IntervalStart_"+t]=e.IntervalStart||0,n["MaxNumber_"+t]=e.MaxNumber||0):(n.IntervalStart=e.IntervalStart||0,n.MaxNumber=e.MaxNumber||0),t++})),n.NodeDeletedStrategy||(n.NodeDeletedStrategy="KeepAll"),n}}],(t=[{key:"componentWillReceiveProps",value:function(e){this.state.policy!==e.versionPolicy&&this.setState({policy:e.versionPolicy})}},{key:"componentDidMount",value:function(){var t=this;i.default.getRestClient().callApi("/config/discovery/forms/{ServiceName}","GET",{ServiceName:"pydio.grpc.versions"},{},{},{},null,[],["application/json"],["application/json"],"String").then(function(e){e=e.data,e=u.default.parseXml(e);t.setState({parameters:S.Manager.parseParameters(e,"//param"),loaded:!0})})}},{key:"resetForm",value:function(){this.setState({valid:!0,dirty:!1,saveValue:null})}},{key:"deleteSource",value:function(){var t=this,e=this.state,n=e.m,r=e.policy;this.props.pydio.UI.openConfirmDialog({message:n("delete.confirm"),destructive:[r.Label],validCallback:function(){a.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(i.default.getRestClient()).deleteVersioningPolicy(r.Uuid).then(function(e){t.props.closeEditor()})})}})}},{key:"saveSource",value:function(){var t,n=this;this.state.saveValue&&(t=this.state.saveValue,a.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(i.default.getRestClient()).putVersioningPolicy(t.Uuid,t).then(function(){n.props.reloadList(),n.setState({dirty:!1,policy:t,saveValue:null})})}))}},{key:"onFormChange",value:function(e){var t=this.state.m,n=p.valuesToTreeVersioningPolicy(e),r=n.KeepPeriods||[],e=r.findIndex(function(e){return 0===e.MaxNumber});if(-1<e&&e<r.length-1){pydio.UI.displayMessage("ERROR",t("error.lastdelete"));for(var o=r.length-1-e;0<o;)r.pop(),o--}n.KeepPeriods=r,this.setState({saveValue:n,dirty:!0})}},{key:"updateValidStatus",value:function(e){}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.create,o=n.readonly,a=n.pydio,i=n.muiTheme,u=n.internalSources,l=this.state,c=l.loaded,s=l.policy,f=l.saveValue,n=l.m,l=this.state.parameters,i=i.palette,i=w(i);l&&c&&(u&&(l=l.map(function(e){return"VersionsDataSourceName"===e.name&&(e.choices+=","+u.map(function(e){return e+"|DataSource "+e}).join(",")),e})),d=p.TreeVersioningPolicyToValues(s),f&&(d=p.TreeVersioningPolicyToValues(f)),e=y.default.createElement(S.FormPanel,{parameters:l,values:d,className:"full-width",onChange:this.onFormChange.bind(this),onValidStatusChange:this.updateValidStatus.bind(this),disabled:o,depth:-2,variant:"v2"}));var d=[];o||(r||(d.push(_.actionButton(n("delete"),"mdi mdi-delete",function(){t.deleteSource()})),d.push(_.actionButton(a.MessageHash["ajxp_admin.plugins.6"],"mdi mdi-undo",function(){t.resetForm()},!this.state.dirty))),d.push(_.actionButton(a.MessageHash[53],"mdi mdi-content-save",function(){t.saveSource()},!this.state.valid||!this.state.dirty)));r=(r=(f||s).Name)||"";return y.default.createElement(_,{title:c&&l?n("title").replace("%s",r):a.MessageHash["ajxp_admin.loading"],titleLeftIcon:"mdi mdi-clock-start",titleActionBar:d,closeAction:this.props.closeEditor,className:"workspace-editor",contentFill:!0},y.default.createElement(h.Paper,{zDepth:0,style:{backgroundColor:i.body.block.header.backgroundColor,padding:"0px 20px",height:64,display:"flex",alignItems:"center"}},y.default.createElement("div",{style:{overflowX:"auto",width:"100%"}},y.default.createElement(m.default,{pydio:a,policy:f||s}))),e,i.formSimpleCss())}}])&&g(e.prototype,t),n&&g(e,n),p}();n.default=c,n.default=c=(0,r.muiThemeable)()(c),t.exports=n.default},{"./VersionPolicyPeriods":14,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/util/xml":"pydio/util/xml",react:"react"}],14:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,c=(r=e("react"))&&r.__esModule?r:{default:r},s=e("material-ui");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(n);return e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,c["default"].Component);var e,t,n,r=u(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(t=[{key:"render",value:function(){function a(e){return o.MessageHash["ajxp_admin.versions.period."+e]||e}var e,t=this.props,n=t.policy,r=t.rendering,o=t.pydio,t=n.KeepPeriods,t=void 0===t?[]:t,n=n.NodeDeletedStrategy;if("short"===r)return 1===t.length?u=-1===(e=t[0]).MaxNumber?a("keep-all.always"):a("keep-n").replace("%s",e.MaxNumber):(u=a("retentions-n").replace("%s",t.length),0===(e=t[t.length-1]).MaxNumber||void 0===e.MaxNumber?u+=" | "+a("remove-all-after").replace("%s",e.IntervalStart):u+=" | "+a("keep-n-after").replace("%1",e.MaxNumber).replace("%2",e.IntervalStart)),c.default.createElement("span",null,u);var i,u=t.map(function(e){var t,n=e.MaxNumber,r=c.default.createElement(s.FontIcon,{className:"mdi mdi-ray-start-arrow"}),o={};return void 0===e.IntervalStart||"0"===e.IntervalStart?r=c.default.createElement(s.FontIcon,{className:"mdi mdi-clock-start"}):t=c.default.createElement("span",{style:{fontWeight:500,fontSize:16}},e.IntervalStart," "),-1===e.MaxNumber?n=a("keep-all"):e.MaxNumber?n=a("max-n").replace("%s",n):(n=a("remove-all"),r=c.default.createElement(s.FontIcon,{className:"mdi mdi-clock-end",style:{color:"#c62828"}}),o={color:"#c62828"}),c.default.createElement(s.Step,null,c.default.createElement(s.StepLabel,{icon:r,style:o},t,n))}),l={color:"#c62828",fontWeight:500,fontSize:16};switch(n){case"KeepLast":i="Backup last";break;case"KeepAll":l.color=null,i="Backup all";break;case"KeepNone":i="Clean all";break;default:l.color=null,i="Backup all"}return u.push(c.default.createElement(s.Step,null,c.default.createElement(s.StepLabel,{style:l,icon:c.default.createElement(s.FontIcon,{className:"mdi mdi-delete",style:l})},i))),c.default.createElement(s.Stepper,{activeStep:t.length-1,linear:!1},u)}}])&&a(e.prototype,t),n&&a(e,n),o}();n.default=f,t.exports=n.default},{"material-ui":"material-ui",react:"react"}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var p=a(e("react")),r=a(e("pydio")),y=e("material-ui"),o=a(e("lodash.debounce")),h=a(e("pydio/util/path")),i=e("cells-sdk");function a(e){return e&&e.__esModule?e:{default:e}}function u(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function m(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?u(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function g(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n);return e=r?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==c(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=r.default.requireLib("hoc"),b=r.ModernAutoComplete,S=r.ModernStyles,r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,p["default"].Component);var e,t,n,r=v(d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=r.call(this,e),e=e.value,e=void 0===e?"":e;return t.debounced=(0,o.default)(function(){var e=t.state.value;t.loadValues(e)},300),t.state={nodes:[],value:e},t}return e=d,n=[{key:"renderNode",value:function(e,t){var n,r=p.default.createElement("span",null,e.Path),o="mdi mdi-folder",a="folder";return e.MetaStore&&e.MetaStore.resolution?(o="mdi mdi-file-tree",a="templatePath",n=e.MetaStore.resolution.split("\n").pop(),r=p.default.createElement("span",null,e.Path," ",p.default.createElement("i",{style:{color:"#9e9e9e"}},"- ",t("ws.complete.resolves")," ",n))):"LEAF"===e.Type&&(o="mdi mdi-file"),{key:e.Path,text:e.Path,node:e,categ:a,value:p.default.createElement(y.MenuItem,null,p.default.createElement(y.FontIcon,{className:o,color:"#607d8b",style:{float:"left",marginRight:8}})," ",r)}}}],(t=[{key:"componentDidMount",value:function(){var r=this,o=this.props.validateOnLoad,e=this.state.value;this.loadValues(e,function(){var e=r.state,t=e.nodes,n=e.value;t.filter(function(e){return e.Path===n&&(!e.Type||"COLLECTION"==e.Type&&!e.MetaStore&&!e.MetaStore.resolution)}).map(function(e){r.loadValues(n+"/")});o&&r.handleNewRequest(n)})}},{key:"handleUpdateInput",value:function(e){this.debounced(),this.setState({value:e})}},{key:"handleNewRequest",value:function(t){var e,n,r=this.state.nodes,o=this.props,a=o.onChange,i=void 0===a?function(){}:a,a=o.onDelete,a=void 0===a?function(){}:a,o=o.onError,o=void 0===o?function(){}:o;if("string"==typeof t){if(""===t)return void a();e=t,n=(n=r.filter(function(e){return e.Path===t})[0])||r.filter(function(e){return 0===e.Path.indexOf(t)})[0]}else"object"===c(t)&&(e=t.key,n=t.node);if(!n)return o();this.setState({value:e}),i(e,n)}},{key:"loadValues",value:function(e){var t,n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},o=e.lastIndexOf("/"),a=e.substr(0,o);null!==this.lastSearch&&this.lastSearch===a||(this.lastSearch=a,this.setState({loading:!0}),t=new i.AdminTreeServiceApi(PydioApi.getRestClient()),e=new i.TreeListNodesRequest,(o=new i.TreeNode).Path=a+"/",e.Node=o,t.listAdminTree(e).then(function(e){n.setState({nodes:e.Children||[],loading:!1},function(){return r()})}).catch(function(){n.setState({loading:!1},function(){return r()})}))}},{key:"render",value:function(){function t(e){return l.MessageHash["ajxp_admin."+e]||e}var n,r=this,e=this.state,o=e.value,a=e.nodes,i=e.loading,u=this.props,l=u.pydio,c=u.onDelete,s=u.skipTemplates,f=u.label,e=u.zDepth,u=void 0===e?0:e,e=[];return a&&(n={},a.forEach(function(e){e.MetaStore&&e.MetaStore.resolution&&"cells"===e.Uuid||h.default.getBasename(e.Path).startsWith(".")||(e=d.renderNode(e,t),n[e.categ]||(n[e.categ]=[]),n[e.categ].push(e))}),1<Object.keys(n).length?(e.push({key:"h1",text:"",value:p.default.createElement(y.MenuItem,{primaryText:t("ws.complete.datasources"),style:{fontSize:13,fontWeight:500},disabled:!0})}),(a=n[Object.keys(n)[0]]).sort(LangUtils.arraySorter("text")),e.push.apply(e,g(a)),s||(e.push({key:"h2",text:"",value:p.default.createElement(y.MenuItem,{primaryText:t("ws.complete.templates"),style:{fontSize:13,fontWeight:500},disabled:!0})}),(s=n[Object.keys(n)[1]]).sort(LangUtils.arraySorter("text")),e.push.apply(e,g(s)))):1===Object.keys(n).length&&e.push.apply(e,g(n[Object.keys(n)[0]]))),p.default.createElement(y.Paper,{zDepth:u,style:m({display:"flex",alignItems:"center",margin:"2px 0"},this.props.style)},p.default.createElement("div",{style:{position:"relative",flex:1,height:60}},p.default.createElement("div",{style:{position:"absolute",right:0,top:30,width:30}},p.default.createElement(y.RefreshIndicator,{size:30,left:0,top:0,status:i?"loading":"hide"})),p.default.createElement(b,{fullWidth:!0,searchText:o,onUpdateInput:function(e){return r.handleUpdateInput(e)},onNewRequest:function(e){return r.handleNewRequest(e)},onClose:function(){return r.handleNewRequest(o)},dataSource:e,filter:function(e,t){return 0===t.toLowerCase().indexOf(e.toLowerCase())},floatingLabelText:f||t("ws.complete.label"),openOnFocus:!0,menuProps:{maxHeight:200},hasRightBlock:!0})),p.default.createElement("div",{style:S.fillBlockV2Right},p.default.createElement(y.IconButton,{style:{marginTop:2},iconStyle:{color:c?"#9e9e9e":"#eee"},iconClassName:"mdi mdi-delete",onClick:c,disabled:!c})))}}])&&s(e.prototype,t),n&&s(e,n),d}();n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk","lodash.debounce":"lodash.debounce","material-ui":"material-ui",pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],16:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("pydio")),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("react")),m=e("material-ui"),o=e("material-ui/styles"),g=a(e("../model/Ws")),v=a(e("./WsAutoComplete"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function a(e){return e&&e.__esModule?e:{default:e}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function S(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n);return e=r?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e=r.default.requireLib("hoc"),_=e.ModernTextField,w=e.ModernSelectField,k=e.ModernStyles,E=r.default.requireLib("form").InputIntegerBytes,r=AdminComponents,O=r.PaperEditorLayout,C=r.AdminStyles,r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,h.Component);var e,t,n,r=f(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=r.call(this,e),e=new g.default(e.workspace);return e.observe("update",function(){t.forceUpdate()}),t.state={workspace:e.getModel(),container:e,newFolderKey:Math.random(),showDialog:!1},t}return e=o,(t=[{key:"enableSync",value:function(e){e?this.setState({showDialog:"enableSync",dialogTargetValue:e}):this.setState({showDialog:"disableSync",dialogTargetValue:e})}},{key:"confirmSync",value:function(e){this.state.workspace.Attributes.ALLOW_SYNC=e,this.setState({showDialog:!1,dialogTargetValue:null})}},{key:"revert",value:function(){var e=this,t=this.state.container;t.revert(),this.setState({workspace:t.getModel()},function(){e.forceUpdate()})}},{key:"save",value:function(){var e=this,t=this.state.container,n=this.props,r=n.reloadList,o=n.closeEditor;this.setState({saving:!0});var a=t.create;t.save().then(function(){r(),e.setState({workspace:t.getModel(),saving:!1},function(){e.forceUpdate()}),a&&o()}).catch(function(){e.setState({saving:!1})})}},{key:"remove",value:function(){var e=this.state.container,t=this.props,n=t.closeEditor,r=t.reloadList,t=t.pydio;t.UI.openConfirmDialog({message:t.MessageHash["settings.35"],destructive:[e.getModel().Label],validCallback:function(){e.remove().then(function(){r(),n()})}})}},{key:"render",value:function(){function t(e){return a.MessageHash["ajxp_admin."+e]||e}function e(e){return a.MessageHash["settings."+e]||e}var r=this,n=this.props,o=n.closeEditor,a=n.pydio,i=n.advanced,u=this.state,l=u.workspace,c=u.container,s=u.newFolderKey,f=u.saving,d=u.showDialog,p=u.dialogTargetValue,n=!l.PoliciesContextEditable,u=[];c.create||n||u.push(O.actionButton(t("plugins.6"),"mdi mdi-undo",function(){r.revert()},!c.isDirty())),n||u.push(O.actionButton(a.MessageHash[53],"mdi mdi-content-save",function(){r.save()},f||!(c.isDirty()&&c.isValid())));var n=C(this.props.muiTheme.palette),f={title:S(S({},n.body.block.headerFull),{},{margin:"0 -20px"}),legend:{padding:"16px 4px 8px"},section:S({padding:"0 20px 20px",margin:10,backgroundColor:"white"},n.body.block.container),toggleDiv:{},divider:{margin:"24px -20px 0px",height:1,border:"none",backgroundColor:"rgb(236 239 241)"}},y=l.RootNodes,n=Object.keys(y).map(function(n){var e=t("ws.editor.path.folder");return g.default.rootIsTemplatePath(y[n])&&(e=t("ws.editor.path.template")),h.default.createElement(v.default,{key:y[n].Uuid,pydio:a,label:e,value:y[n].Path,onDelete:function(){delete y[n],r.forceUpdate()},onChange:function(e,t){delete y[n],""!==e&&(y[t.Uuid]=t)},skipTemplates:c.hasFolderRoots()})});return c.hasTemplatePath()||n.push(h.default.createElement(v.default,{key:s,pydio:a,value:"",onChange:function(e,t){t&&(y[t.Uuid]=t,r.setState({newFolderKey:Math.random()}))},skipTemplates:c.hasFolderRoots()})),h.default.createElement(O,{title:l.Label||e("90"),titleLeftIcon:"mdi mdi-folder-open",titleActionBar:u,closeAction:o,className:"workspace-editor",contentFill:!1},h.default.createElement(m.Dialog,{open:d,title:t("ws.editor.sync.warning"),onRequestClose:function(){r.confirmSync(!p)},actions:[h.default.createElement(m.FlatButton,{label:a.MessageHash[54],onClick:function(){r.confirmSync(!p)}}),h.default.createElement(m.FlatButton,{label:t("ws.editor.sync.warning.validate"),onClick:function(){r.confirmSync(p)}})]},"enableSync"===d&&h.default.createElement("div",null,t("ws.editor.sync.warning.enable")),"disableSync"===d&&h.default.createElement("div",null,t("ws.editor.sync.warning.disable"))),h.default.createElement(m.Paper,{zDepth:0,style:f.section},h.default.createElement("div",{style:f.title},t("ws.30")),h.default.createElement("div",{style:f.legend},t("ws.editor.options.legend")),h.default.createElement(_,{fullWidth:!0,errorText:l.Label?"":t("ws.editor.label.legend"),floatingLabelText:e("8"),value:l.Label,onChange:function(e,t){l.Label=t},variant:"v2"}),h.default.createElement(_,{fullWidth:!0,floatingLabelText:t("ws.editor.description"),value:l.Description,onChange:function(e,t){l.Description=t},variant:"v2"}),h.default.createElement(_,{fullWidth:!0,errorText:l.Label&&!l.Slug?t("ws.editor.slug.legend"):"",floatingLabelText:t("ws.5"),value:l.Slug,onChange:function(e,t){l.Slug=t},variant:"v2"})),h.default.createElement(m.Paper,{zDepth:0,style:f.section},h.default.createElement("div",{style:f.title},t("ws.editor.data.title")),h.default.createElement("div",{style:f.legend},t("ws.editor.data.legend")," ",t("ws.editor.default_rights")),n,h.default.createElement(w,{fullWidth:!0,value:l.Attributes.DEFAULT_RIGHTS||"",onChange:function(e,t,n){l.Attributes.DEFAULT_RIGHTS=n},hintText:"Default Rights",variant:"v2"},h.default.createElement(m.MenuItem,{primaryText:t("ws.editor.default_rights.none"),value:""}),h.default.createElement(m.MenuItem,{primaryText:t("ws.editor.default_rights.read"),value:"r"}),h.default.createElement(m.MenuItem,{primaryText:t("ws.editor.default_rights.readwrite"),value:"rw"}),h.default.createElement(m.MenuItem,{primaryText:t("ws.editor.default_rights.write"),value:"w"}))),h.default.createElement(m.Paper,{zDepth:0,style:f.section},h.default.createElement("div",{style:f.title},t("ws.editor.other")),h.default.createElement("div",{style:S({},f.legend)},t("ws.editor.other.skiprecycle.legend")),h.default.createElement("div",{style:f.toggleDiv},h.default.createElement(m.Checkbox,b({label:t("ws.editor.other.skiprecycle"),labelPosition:"right",checked:l.Attributes.SKIP_RECYCLE,onCheck:function(e,t){l.Attributes.SKIP_RECYCLE=t}},k.toggleFieldV2))),i&&h.default.createElement(h.Fragment,null,h.default.createElement("hr",{style:f.divider}),h.default.createElement("div",{style:S({},f.legend)},t("ws.editor.other.sync.legend")),h.default.createElement("div",{style:f.toggleDiv},h.default.createElement(m.Checkbox,b({label:t("ws.editor.other.sync"),labelPosition:"right",checked:l.Attributes.ALLOW_SYNC,onCheck:function(e,t){(c.hasTemplatePath()||!t)&&t?l.Attributes.ALLOW_SYNC=t:r.enableSync(t)}},k.toggleFieldV2))),h.default.createElement("hr",{style:f.divider}),h.default.createElement("div",{style:S({},f.legend)},t("ws.editor.other.quota")),h.default.createElement(E,{variant:"v2",attributes:{label:"Quota"},value:l.Attributes.QUOTA||0,onChange:function(e){0<e?l.Attributes.QUOTA=e+"":(l.Attributes.QUOTA="0",delete l.Attributes.QUOTA)}}),h.default.createElement("hr",{style:f.divider}),h.default.createElement("div",{style:S({},f.legend)},t("ws.editor.other.layout")),h.default.createElement(w,{fullWidth:!0,floatingLabelText:t("ws.editor.other.layout"),variant:"v2",value:l.Attributes.META_LAYOUT||"",onChange:function(e,t,n){l.Attributes.META_LAYOUT=n}},h.default.createElement(m.MenuItem,{primaryText:t("ws.editor.other.layout.default"),value:""}),h.default.createElement(m.MenuItem,{primaryText:t("ws.editor.other.layout.easy"),value:"meta.layout_sendfile"})))))}}])&&c(e.prototype,t),n&&c(e,n),o}();n.default=r,n.default=r=(0,o.muiThemeable)()(r),t.exports=n.default},{"../model/Ws":21,"./WsAutoComplete":15,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],17:[function(e,t,n){"use strict";var r=d(e("./board/WsDashboard")),o=d(e("./board/VirtualNodes")),a=d(e("./board/DataSourcesBoard")),i=d(e("./board/MetadataBoard")),u=d(e("./editor/DataSourceEditor")),l=d(e("./model/Ws")),c=d(e("./model/DataSource")),s=d(e("./editor/WsAutoComplete")),f=d(e("./virtual/NodeCard")),e=d(e("./model/VirtualNode"));function d(e){return e&&e.__esModule?e:{default:e}}window.AdminWorkspaces={VirtualNodes:o.default,WsDashboard:r.default,DataSourcesBoard:a.default,MetadataBoard:i.default,DataSourceEditor:u.default,WsAutoComplete:s.default,TemplatePathEditor:f.default,TemplatePath:e.default,Workspace:l.default,DataSource:c.default}},{"./board/DataSourcesBoard":1,"./board/MetadataBoard":3,"./board/VirtualNodes":4,"./board/WsDashboard":6,"./editor/DataSourceEditor":9,"./editor/WsAutoComplete":15,"./model/DataSource":18,"./model/VirtualNode":20,"./model/Ws":21,"./virtual/NodeCard":22}],18:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("pydio/util/lang"))&&r.__esModule?r:{default:r},u=e("cells-sdk");function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(n);return e=r?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("pydio/lang/observable"),d=e("pydio/http/api"),p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,f);var e,t,n,o=s(a);function a(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"flat";if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).internalInvalid=!1,t.nameInvalid=!1,t.existingNames=n,e)(t.model=e).StorageConfiguration||(e.StorageConfiguration={}),t.snapshot=JSON.parse(JSON.stringify(e));else switch(t.model=new u.ObjectDataSource,t.model.EncryptionMode=u.ObjectEncryptionMode.constructFromObject("CLEAR"),t.model.StorageType=u.ObjectStorageType.constructFromObject("LOCAL"),r){case"flat":t.model.StorageConfiguration={folder:"",normalize:"false"},t.model.FlatStorage=!0;break;case"structured":t.model.StorageConfiguration={folder:"",normalize:"false"},t.model.FlatStorage=!1;break;case"internal":t.model.StorageConfiguration={folder:"",normalize:"false",cellsInternal:"true"},t.model.FlatStorage=!0}return t.observableModel=t.buildProxy(t.model),t}return e=a,n=[{key:"loadDatasources",value:function(){return new u.ConfigServiceApi(d.getRestClient()).listDataSources()}},{key:"loadVersioningPolicies",value:function(){return new u.ConfigServiceApi(d.getRestClient()).listVersioningPolicies()}},{key:"loadStatuses",value:function(){return new u.ConfigServiceApi(d.getRestClient()).listServices("STARTED")}},{key:"loadEncryptionKeys",value:function(){return new u.ConfigServiceApi(d.getRestClient()).listEncryptionKeys(new u.EncryptionAdminListKeysRequest)}},{key:"loadBuckets",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=new u.ConfigServiceApi(d.getRestClient()),r=new u.RestListStorageBucketsRequest;return r.DataSource=e,t&&(r.BucketsRegexp=t),n.listStorageBuckets(r)}},{key:"createBucket",value:function(e,t){var n=new u.ConfigServiceApi(d.getRestClient()),r=new u.RestCreateStorageBucketRequest;return r.DataSource=e,n.createStorageBucket(t,r)}}],(t=[{key:"buildProxy",value:function(e){var o=this;return new Proxy(e,{set:function(e,t,n){var r=n;if("StorageType"===t)e.StorageConfiguration={},"LOCAL"===r?e.StorageConfiguration={folder:"",normalize:"false"}:"S3"===r?e.StorageConfiguration={customEndpoint:""}:"GCS"===r&&(e.StorageConfiguration={jsonCredentials:""}),o.internalInvalid=!1,e.ApiKey=e.ApiSecret="";else if("Name"===t)r=i.default.computeStringSlug(r).replace("-","").substr(0,33),o.existingNames&&-1<o.existingNames.indexOf(r)?o.nameInvalid=!0:o.nameInvalid=!1;else if("folder"===t)"/"!==r[0]&&(r="/"+r);else{if("invalid"===t)return o.internalInvalid=n,o.notify("update"),!0;"PeerAddress"===t&&"ANY"===n&&(r="")}return e[t]=r,o.notify("update"),!0},get:function(e,t){e=e[t];return e instanceof Array?e:e instanceof Object?o.buildProxy(e):"StorageType"===t?e||"LOCAL":"PeerAddress"===t?e||"ANY":e}})}},{key:"getModel",value:function(){return this.observableModel}},{key:"isValid",value:function(){return!this.internalInvalid&&!this.nameInvalid&&("S3"===this.model.StorageType||"AZURE"===this.model.StorageType?this.model.ApiKey&&this.model.ApiSecret&&this.model.Name&&(this.model.ObjectsBucket||this.model.StorageConfiguration.bucketsRegexp):"GCS"===this.model.StorageType?this.model.Name&&this.model.ObjectsBucket&&this.model.StorageConfiguration&&this.model.StorageConfiguration.jsonCredentials:this.model.Name&&this.model.StorageConfiguration&&this.model.StorageConfiguration.folder)}},{key:"getNameError",value:function(e){return this.nameInvalid?e("name.inuse"):null}},{key:"deleteSource",value:function(){return new u.ConfigServiceApi(d.getRestClient()).deleteDataSource(this.model.Name)}},{key:"resyncSource",value:function(){var e=new u.JobsServiceApi(d.getRestClient()),t=new u.RestUserJobRequest;return t.JobName="datasource-resync",t.JsonParameters=JSON.stringify({dsName:this.model.Name}),e.userCreateJob("datasource-resync",t)}},{key:"revert",value:function(){return this.model=this.snapshot,this.observableModel=this.buildProxy(this.model),this.snapshot=JSON.parse(JSON.stringify(this.model)),this.observableModel}},{key:"saveSource",value:function(){var t=this;return new u.ConfigServiceApi(d.getRestClient()).putDataSource(this.model.Name,this.model).then(function(e){t.snapshot=JSON.parse(JSON.stringify(t.model)),t.notify("update")})}},{key:"stripPrefix",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(!n)return t;var r={};return Object.keys(t).map(function(e){r[e.replace(n,"")]=t[e]}),r}},{key:"getDataWithPrefix",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(""===n)return this.model;var r={};return Object.keys(this.model).forEach(function(e){r[n+e]=t.model[e],"EncryptionMode"!==e||t.model[e]||(r[n+e]="CLEAR")}),r}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=p,t.exports=n.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api","pydio/lang/observable":"pydio/lang/observable","pydio/util/lang":"pydio/util/lang"}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("pydio/http/api")),a=(r(e("pydio/http/resources-manager")),e("cells-sdk"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}var e,t,n;return e=r,n=[{key:"loadNamespaces",value:function(){return new a.UserMetaServiceApi(o.default.getRestClient()).listUserMetaNamespace()}},{key:"putNS",value:function(e){var t=new a.UserMetaServiceApi(o.default.getRestClient()),n=new a.IdmUpdateUserMetaNamespaceRequest;return n.Operation=a.UpdateUserMetaNamespaceRequestUserMetaNsOp.constructFromObject("PUT"),n.Namespaces=[e],r.clearLocalCache(),t.updateUserMetaNamespace(n)}},{key:"deleteNS",value:function(e){var t=new a.UserMetaServiceApi(o.default.getRestClient()),n=new a.IdmUpdateUserMetaNamespaceRequest;return n.Operation=a.UpdateUserMetaNamespaceRequestUserMetaNsOp.constructFromObject("DELETE"),n.Namespaces=[e],r.clearLocalCache(),t.updateUserMetaNamespace(n)}},{key:"clearLocalCache",value:function(){try{window.ReactMeta&&ReactMeta.Renderer.getClient().clearConfigs()}catch(e){}}}],(t=null)&&i(e.prototype,t),n&&i(e,n),r}();(n.default=e).MetaTypes={string:"Text",textarea:"Long Text",integer:"Number",boolean:"Boolean",date:"Date",choice:"Selection",tags:"Extensible Tags",stars_rate:"Stars Rating",css_label:"Color Labels",json:"JSON"},t.exports=n.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager"}],20:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("pydio")),u=a(e("pydio/util/lang")),l=a(e("pydio/lang/observable")),c=a(e("pydio/http/api")),s=a(e("pydio/http/resources-manager")),f=e("cells-sdk");function a(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=i(n);return e=r?(e=i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?h(t):e}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,l["default"]);var e,t,n,a=y(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this),n=h(t),o=void 0,(r="data")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e?t.data=e:(t.data=new f.TreeNode,t.data.Type=f.TreeNodeType.constructFromObject("COLLECTION"),t.data.MetaStore={name:"",resolution:"",onDelete:"rename-uuid",contentType:"text/javascript"}),t}return e=i,n=[{key:"loadNodes",value:function(n){var e=new f.ConfigServiceApi(c.default.getRestClient());r.default.startLoading(),e.listVirtualNodes().then(function(e){r.default.endLoading();var t=[];e.Children&&e.Children.map(function(e){t.push(new i(e))}),n(t)}).catch(function(){r.default.endLoading()})}}],(t=[{key:"getName",value:function(){return this.data.MetaStore.name}},{key:"setName",value:function(e){this.data.MetaStore.name=e;e=u.default.computeStringSlug(e);this.data.Uuid=e,this.data.Path=e,this.notify("update")}},{key:"getValue",value:function(){return this.data.MetaStore.resolution}},{key:"setValue",value:function(e){this.data.MetaStore.resolution=e,this.notify("update")}},{key:"getOnDelete",value:function(){return this.data.MetaStore.onDelete}},{key:"setOnDelete",value:function(e){this.data.MetaStore.onDelete=e,this.notify("update")}},{key:"save",value:function(t){var n=this;s.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(c.default.getRestClient()).putVirtualNode(n.data.Uuid,n.data).then(function(){t()})})}},{key:"remove",value:function(t){var n=this;s.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(c.default.getRestClient()).deleteVirtualNode(n.data.Uuid).then(function(){t()})})}}])&&d(e.prototype,t),n&&d(e,n),i}();n.default=e,t.exports=n.default},{"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/lang/observable":"pydio/lang/observable","pydio/util/lang":"pydio/util/lang"}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;r(e("pydio"));var a=r(e("pydio/http/api")),i=r(e("pydio/util/lang")),u=r(e("pydio/lang/observable")),l=e("cells-sdk");function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(n);return e=r?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==c(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,u["default"]);var e,t,n,r=d(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).internalAttributes={},t.dirty=!1,e?t.initModel(e):(t.create=!0,t.model=new l.IdmWorkspace,t.model.Scope=l.IdmWorkspaceScope.constructFromObject("ADMIN"),t.model.RootNodes={},t.internalAttributes={DEFAULT_RIGHTS:""},t.model.PoliciesContextEditable=!0,t.model.Attributes=JSON.stringify(t.internalAttributes)),t.observableModel=t.buildProxy(t.model),t}return e=o,n=[{key:"rootIsTemplatePath",value:function(e){return!(!e.MetaStore||!e.MetaStore.resolution)}},{key:"listWorkspaces",value:function(){var e=new l.WorkspaceServiceApi(a.default.getRestClient()),t=new l.RestSearchWorkspaceRequest,n=new l.IdmWorkspaceSingleQuery;return n.scope=l.IdmWorkspaceScope.constructFromObject("ADMIN"),t.Queries=[n],e.searchWorkspaces(t)}}],(t=[{key:"buildProxy",value:function(e){var r=this;return new Proxy(e,{set:function(e,t,n){return"Slug"===t?n=i.default.computeStringSlug(n):"Label"===t&&r.create&&(e.Slug=i.default.computeStringSlug(n)),e[t]=n,r.dirty=!0,r.notify("update"),!0},get:function(e,t){e=e[t];return!((e="Attributes"===t?r.internalAttributes:e)instanceof Array)&&e instanceof Object?r.buildProxy(e):e}})}},{key:"initModel",value:function(e){var t;this.create=!1,this.dirty=!1,this.model=e,this.snapshot=JSON.parse(JSON.stringify(e)),e.Attributes?"object"===c(t=JSON.parse(e.Attributes))&&Object.keys(t).length&&(this.internalAttributes=t):this.internalAttributes={},e.RootNodes||(e.RootNodes={})}},{key:"getModel",value:function(){return this.observableModel}},{key:"hasTemplatePath",value:function(){var t=this;return 0<Object.keys(this.model.RootNodes).filter(function(e){return o.rootIsTemplatePath(t.model.RootNodes[e])}).length}},{key:"hasFolderRoots",value:function(){var t=this;return 0<Object.keys(this.model.RootNodes).filter(function(e){return!o.rootIsTemplatePath(t.model.RootNodes[e])}).length}},{key:"save",value:function(){var t=this;return this.model.Attributes=JSON.stringify(this.internalAttributes),new l.WorkspaceServiceApi(a.default.getRestClient()).putWorkspace(this.model.Slug,this.model).then(function(e){t.initModel(e),t.observableModel=t.buildProxy(t.model)})}},{key:"remove",value:function(){return new l.WorkspaceServiceApi(a.default.getRestClient()).deleteWorkspace(this.model.Slug)}},{key:"revert",value:function(){var e=l.IdmWorkspace.constructFromObject(this.snapshot||{});this.initModel(e),this.observableModel=this.buildProxy(this.model)}},{key:"isValid",value:function(){return this.model.Slug&&this.model.Label&&0<Object.keys(this.model.RootNodes).length}},{key:"isDirty",value:function(){return this.dirty}}])&&s(e.prototype,t),n&&s(e,n),o}();n.default=e,t.exports=n.default},{"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/lang/observable":"pydio/lang/observable","pydio/util/lang":"pydio/util/lang"}],22:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,f=(r=e("react"))&&r.__esModule?r:{default:r},d=e("material-ui");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(n);return e=r?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,f["default"].Component);var e,t,n,o=l(a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=o.call(this,e),n=e.node.getValue(),r=!1;return n||(n='// Compute the Path variable that this node must resolve to. \n// Use Ctrl+Space to see the objects available for completion.\nPath = "";',r=!0),t.state={value:n,cleanOnDelete:"rename-uuid"===e.node.getOnDelete(),dirty:r},t}return e=a,(t=[{key:"onChange",value:function(e,t){this.setState({value:t,dirty:!0})}},{key:"save",value:function(){var e=this,t=this.props,n=t.node,r=t.onSave,o=void 0===r?function(){}:r,t=this.state,r=t.value,t=t.cleanOnDelete;n.setValue(r),t?n.setOnDelete("rename-uuid"):n.setOnDelete(""),n.save(function(){e.setState({dirty:!1},o)})}},{key:"remove",value:function(){var e=this;this.props.node.remove(function(){e.props.reloadList()})}},{key:"render",value:function(){var n=this,e=this.props,t=e.pydio,r=e.dataSources,o=e.readonly,a=e.oneLiner,i=e.onClose,u=void 0===i?function(){}:i,l=this.state,c=l.value,e=l.dirty,i=l.cleanOnDelete,l=function(e){return t.MessageHash["ajxp_admin.virtual."+e]||e},s={};r&&r.map(function(e){s[e.Name]=e.Name});r={Path:"",DataSources:s,User:{Name:"",Uuid:"",GroupPath:"",GroupFlat:"",Profile:"",DisplayName:"",Email:"",AuthSource:"",Roles:[]}},c=f.default.createElement(AdminComponents.CodeMirrorField,{mode:"javascript",globalScope:r,value:c,onChange:this.onChange.bind(this),readOnly:o});return a?f.default.createElement("div",{style:{display:"flex"}},f.default.createElement("div",{style:{flex:1,lineHeight:"40px"}},c),f.default.createElement("div",{style:{display:"flex"}},f.default.createElement(d.IconButton,{iconClassName:"mdi mdi-content-save",onClick:this.save.bind(this),disabled:!e,tooltip:"Save"}),f.default.createElement(d.IconButton,{iconClassName:"mdi mdi-close",onClick:function(){return u()},tooltip:"Close"}))):f.default.createElement("div",{style:{backgroundColor:"#f5f5f5",paddingBottom:12}},f.default.createElement("div",{style:{padding:o?"16px 24px 8px":"10px 24px 0",fontWeight:500,display:"flex",alignItems:"center"}},f.default.createElement("div",{style:{flex:1}},l("card.title")),!o&&f.default.createElement(d.FlatButton,{onClick:this.save.bind(this),primary:!0,disabled:!e,label:l("save")})),f.default.createElement("div",{style:{margin:"6px 24px 0 24px",border:"1px solid #e0e0e0"}},c),f.default.createElement("div",{style:{margin:"12px 24px"}},f.default.createElement(d.Checkbox,{disabled:o,checked:i,onCheck:function(e,t){n.setState({cleanOnDelete:t,dirty:!0})},label:l("card.cleanOnDelete")})))}}])&&i(e.prototype,t),n&&i(e,n),a}();n.default=c,t.exports=n.default},{"material-ui":"material-ui",react:"react"}],23:[function(e,A,T){!function(R){!function(){!function(){var Va,Ka="Expected a function",za="__lodash_hash_undefined__",qa="__lodash_placeholder__",Ha=128,Ja=9007199254740991,$a=NaN,Ya=4294967295,Ga=[["ary",Ha],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Za="[object Arguments]",Qa="[object Array]",Xa="[object Boolean]",ei="[object Date]",ti="[object Error]",ni="[object Function]",ri="[object GeneratorFunction]",oi="[object Map]",ai="[object Number]",ii="[object Object]",ui="[object Promise]",li="[object RegExp]",ci="[object Set]",si="[object String]",fi="[object Symbol]",di="[object WeakMap]",pi="[object ArrayBuffer]",yi="[object DataView]",hi="[object Float32Array]",mi="[object Float64Array]",gi="[object Int8Array]",vi="[object Int16Array]",bi="[object Int32Array]",Si="[object Uint8Array]",_i="[object Uint8ClampedArray]",wi="[object Uint16Array]",ki="[object Uint32Array]",Ei=/\b__p \+= '';/g,Oi=/\b(__p \+=) '' \+/g,Ci=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xi=/&(?:amp|lt|gt|quot|#39);/g,Pi=/[&<>"']/g,ji=RegExp(xi.source),Ri=RegExp(Pi.source),Ai=/<%-([\s\S]+?)%>/g,Ti=/<%([\s\S]+?)%>/g,Ni=/<%=([\s\S]+?)%>/g,Mi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Di=/^\w*$/,Li=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/[\\^$.*+?()[\]{}|]/g,Bi=RegExp(Ii.source),Wi=/^\s+/,n=/\s/,Fi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ui=/\{\n\/\* \[wrapped with (.+)\] \*/,Vi=/,? & /,Ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zi=/[()=,{}\[\]\/\s]/,qi=/\\(\\)?/g,Hi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ji=/\w*$/,$i=/^[-+]0x[0-9a-f]+$/i,Yi=/^0b[01]+$/i,Gi=/^\[object .+?Constructor\]$/,Zi=/^0o[0-7]+$/i,Qi=/^(?:0|[1-9]\d*)$/,Xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,eu=/($^)/,tu=/['\n\r\u2028\u2029\\]/g,e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",r="\\u2700-\\u27bf",o="a-z\\xdf-\\xf6\\xf8-\\xff",a="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",u="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",l="['’]",c="["+e+"]",s="["+u+"]",f="["+t+"]",d="\\d+",p="["+r+"]",y="["+o+"]",h="[^"+e+u+d+r+o+a+"]",m="\\ud83c[\\udffb-\\udfff]",g="[^"+e+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",S="["+a+"]",_="\\u200d",w="(?:"+y+"|"+h+")",u="(?:"+S+"|"+h+")",r="(?:['’](?:d|ll|m|re|s|t|ve))?",o="(?:['’](?:D|LL|M|RE|S|T|VE))?",a="(?:"+f+"|"+m+")"+"?",h="["+i+"]?",a=h+a+("(?:"+_+"(?:"+[g,v,b].join("|")+")"+h+a+")*"),p="(?:"+[p,v,b].join("|")+")"+a,c="(?:"+[g+f+"?",f,v,b,c].join("|")+")",nu=RegExp(l,"g"),ru=RegExp(f,"g"),k=RegExp(m+"(?="+m+")|"+c+a,"g"),ou=RegExp([S+"?"+y+"+"+r+"(?="+[s,S,"$"].join("|")+")",u+"+"+o+"(?="+[s,S+w,"$"].join("|")+")",S+"?"+w+"+"+r,S+"+"+o,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",d,p].join("|"),"g"),E=RegExp("["+_+e+t+i+"]"),au=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,iu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uu=-1,lu={};lu[hi]=lu[mi]=lu[gi]=lu[vi]=lu[bi]=lu[Si]=lu[_i]=lu[wi]=lu[ki]=!0,lu[Za]=lu[Qa]=lu[pi]=lu[Xa]=lu[yi]=lu[ei]=lu[ti]=lu[ni]=lu[oi]=lu[ai]=lu[ii]=lu[li]=lu[ci]=lu[si]=lu[di]=!1;var cu={};cu[Za]=cu[Qa]=cu[pi]=cu[yi]=cu[Xa]=cu[ei]=cu[hi]=cu[mi]=cu[gi]=cu[vi]=cu[bi]=cu[oi]=cu[ai]=cu[ii]=cu[li]=cu[ci]=cu[si]=cu[fi]=cu[Si]=cu[_i]=cu[wi]=cu[ki]=!0,cu[ti]=cu[ni]=cu[di]=!1;var O={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},su=parseFloat,fu=parseInt,t="object"==typeof R&&R&&R.Object===Object&&R,i="object"==typeof self&&self&&self.Object===Object&&self,du=t||i||Function("return this")(),i="object"==typeof T&&T&&!T.nodeType&&T,C=i&&"object"==typeof A&&A&&!A.nodeType&&A,pu=C&&C.exports===i,x=pu&&t.process,t=function(){try{var e=C&&C.require&&C.require("util").types;return e?e:x&&x.binding&&x.binding("util")}catch(e){}}(),yu=t&&t.isArrayBuffer,hu=t&&t.isDate,mu=t&&t.isMap,gu=t&&t.isRegExp,vu=t&&t.isSet,bu=t&&t.isTypedArray;function Su(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function _u(e,t,n,r){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];t(r,i,n(i),e)}return r}function wu(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ku(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Eu(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ou(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}function Cu(e,t){return!!(null==e?0:e.length)&&-1<Du(e,t,0)}function xu(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function Pu(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function ju(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Ru(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}function Au(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Tu(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var P=Wu("length");function Nu(e,r,t){var o;return t(e,function(e,t,n){if(r(e,t,n))return o=t,!1}),o}function Mu(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function Du(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Mu(e,Iu,n)}function Lu(e,t,n,r){for(var o=n-1,a=e.length;++o<a;)if(r(e[o],t))return o;return-1}function Iu(e){return e!=e}function Bu(e,t){var n=null==e?0:e.length;return n?Uu(e,t)/n:$a}function Wu(t){return function(e){return null==e?Va:e[t]}}function j(t){return function(e){return null==t?Va:t[e]}}function Fu(e,r,o,a,t){return t(e,function(e,t,n){o=a?(a=!1,e):r(o,e,t,n)}),o}function Uu(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==Va&&(n=n===Va?a:n+a)}return n}function Vu(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Ku(e){return e&&e.slice(0,al(e)+1).replace(Wi,"")}function zu(t){return function(e){return t(e)}}function qu(t,e){return Pu(e,function(e){return t[e]})}function Hu(e,t){return e.has(t)}function Ju(e,t){for(var n=-1,r=e.length;++n<r&&-1<Du(t,e[n],0););return n}function $u(e,t){for(var n=e.length;n--&&-1<Du(t,e[n],0););return n}var Yu=j({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Gu=j({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zu(e){return"\\"+O[e]}function Qu(e){return E.test(e)}function Xu(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function el(t,n){return function(e){return t(n(e))}}function tl(e,t){for(var n=-1,r=e.length,o=0,a=[];++n<r;){var i=e[n];i!==t&&i!==qa||(e[n]=qa,a[o++]=n)}return a}function nl(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function rl(e){return(Qu(e)?function(e){var t=k.lastIndex=0;for(;k.test(e);)++t;return t}:P)(e)}function ol(e){return Qu(e)?e.match(k)||[]:e.split("")}function al(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}var il=j({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var ul=function e(t){var k=(t=null==t?du:ul.defaults(du.Object(),t,ul.pick(du,iu))).Array,n=t.Date,f=t.Error,d=t.Function,o=t.Math,h=t.Object,p=t.RegExp,s=t.String,v=t.TypeError,a=k.prototype,r=d.prototype,y=h.prototype,i=t["__core-js_shared__"],u=r.toString,b=y.hasOwnProperty,l=0,c=(Na=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+Na:"",m=y.toString,g=u.call(h),S=du._,_=p("^"+u.call(b).replace(Ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=pu?t.Buffer:Va,E=t.Symbol,O=t.Uint8Array,C=w?w.allocUnsafe:Va,x=el(h.getPrototypeOf,h),P=h.create,j=y.propertyIsEnumerable,R=a.splice,A=E?E.isConcatSpreadable:Va,T=E?E.iterator:Va,N=E?E.toStringTag:Va,M=function(){try{var e=Vn(h,"defineProperty");return e({},"",{}),e}catch(e){}}(),D=t.clearTimeout!==du.clearTimeout&&t.clearTimeout,L=n&&n.now!==du.Date.now&&n.now,I=t.setTimeout!==du.setTimeout&&t.setTimeout,B=o.ceil,W=o.floor,F=h.getOwnPropertySymbols,U=w?w.isBuffer:Va,V=t.isFinite,K=a.join,z=el(h.keys,h),q=o.max,H=o.min,J=n.now,$=t.parseInt,Y=o.random,G=a.reverse,Z=Vn(t,"DataView"),Q=Vn(t,"Map"),X=Vn(t,"Promise"),ee=Vn(t,"Set"),te=Vn(t,"WeakMap"),ne=Vn(h,"create"),re=te&&new te,oe={},ae=mr(Z),ie=mr(Q),ue=mr(X),le=mr(ee),ce=mr(te),se=E?E.prototype:Va,fe=se?se.valueOf:Va,de=se?se.toString:Va;function pe(e){if(Mo(e)&&!ko(e)&&!(e instanceof ve)){if(e instanceof ge)return e;if(b.call(e,"__wrapped__"))return gr(e)}return new ge(e)}var ye=function(e){if(!No(e))return{};if(P)return P(e);he.prototype=e;e=new he;return he.prototype=Va,e};function he(){}function me(){}function ge(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=Va}function ve(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ya,this.__views__=[]}function be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function we(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new _e;++t<n;)this.add(e[t])}function ke(e){e=this.__data__=new Se(e);this.size=e.size}function Ee(e,t){var n,r=ko(e),o=!r&&wo(e),a=!r&&!o&&xo(e),i=!r&&!o&&!a&&Vo(e),u=r||o||a||i,l=u?Vu(e.length,s):[],c=l.length;for(n in e)!t&&!b.call(e,n)||u&&("length"==n||a&&("offset"==n||"parent"==n)||i&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Yn(n,c))||l.push(n);return l}function Oe(e){var t=e.length;return t?e[wt(0,t-1)]:Va}function Ce(e,t){return fr(rn(e),De(t,0,e.length))}function xe(e){return fr(rn(e))}function Pe(e,t,n){(n===Va||bo(e[t],n))&&(n!==Va||t in e)||Ne(e,t,n)}function je(e,t,n){var r=e[t];b.call(e,t)&&bo(r,n)&&(n!==Va||t in e)||Ne(e,t,n)}function Re(e,t){for(var n=e.length;n--;)if(bo(e[n][0],t))return n;return-1}function Ae(e,r,o,a){return Fe(e,function(e,t,n){r(a,e,o(e),n)}),a}function Te(e,t){return e&&on(t,sa(t),e)}function Ne(e,t,n){"__proto__"==t&&M?M(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Me(e,t){for(var n=-1,r=t.length,o=k(r),a=null==e;++n<r;)o[n]=a?Va:aa(e,t[n]);return o}function De(e,t,n){return e==e&&(n!==Va&&(e=e<=n?e:n),t!==Va&&(e=t<=e?e:t)),e}function Le(n,r,o,e,t,a){var i,u=1&r,l=2&r,c=4&r;if((i=o?t?o(n,e,t,a):o(n):i)!==Va)return i;if(!No(n))return n;var s,f,d=ko(n);if(d){if(i=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&b.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(n),!u)return rn(n,i)}else{var p=qn(n),e=p==ni||p==ri;if(xo(n))return Zt(n,u);if(p==ii||p==Za||e&&!t){if(i=l||e?{}:Jn(n),!u)return l?(e=s=n,f=(f=i)&&on(e,fa(e),f),on(s,zn(s),f)):(f=Te(i,s=n),on(s,Kn(s),f))}else{if(!cu[p])return t?n:{};i=function(e,t,n){var r=e.constructor;switch(t){case pi:return Qt(e);case Xa:case ei:return new r(+e);case yi:return function(e,t){t=t?Qt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case hi:case mi:case gi:case vi:case bi:case Si:case _i:case wi:case ki:return Xt(e,n);case oi:return new r;case ai:case si:return new r(e);case li:return function(e){var t=new e.constructor(e.source,Ji.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ci:return new r;case fi:return function(e){return fe?h(fe.call(e)):{}}(e)}}(n,p,u)}}u=(a=a||new ke).get(n);if(u)return u;a.set(n,i),Wo(n)?n.forEach(function(e){i.add(Le(e,r,o,e,n,a))}):Do(n)&&n.forEach(function(e,t){i.set(t,Le(e,r,o,t,n,a))});var y=d?Va:(c?l?Dn:Mn:l?fa:sa)(n);return wu(y||n,function(e,t){y&&(e=n[t=e]),je(i,t,Le(e,r,o,t,n,a))}),i}function Ie(e,t,n){var r=n.length;if(null==e)return!r;for(e=h(e);r--;){var o=n[r],a=t[o],i=e[o];if(i===Va&&!(o in e)||!a(i))return!1}return!0}function Be(e,t,n){if("function"!=typeof e)throw new v(Ka);return ur(function(){e.apply(Va,n)},t)}function We(e,t,n,r){var o=-1,a=Cu,i=!0,u=e.length,l=[],c=t.length;if(!u)return l;n&&(t=Pu(t,zu(n))),r?(a=xu,i=!1):200<=t.length&&(a=Hu,i=!1,t=new we(t));e:for(;++o<u;){var s=e[o],f=null==n?s:n(s),s=r||0!==s?s:0;if(i&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;l.push(s)}else a(t,f,r)||l.push(s)}return l}pe.templateSettings={escape:Ai,evaluate:Ti,interpolate:Ni,variable:"",imports:{_:pe}},(pe.prototype=me.prototype).constructor=pe,(ge.prototype=ye(me.prototype)).constructor=ge,(ve.prototype=ye(me.prototype)).constructor=ve,be.prototype.clear=function(){this.__data__=ne?ne(null):{},this.size=0},be.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},be.prototype.get=function(e){var t=this.__data__;if(ne){var n=t[e];return n===za?Va:n}return b.call(t,e)?t[e]:Va},be.prototype.has=function(e){var t=this.__data__;return ne?t[e]!==Va:b.call(t,e)},be.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ne&&t===Va?za:t,this},Se.prototype.clear=function(){this.__data__=[],this.size=0},Se.prototype.delete=function(e){var t=this.__data__;return!((e=Re(t,e))<0)&&(e==t.length-1?t.pop():R.call(t,e,1),--this.size,!0)},Se.prototype.get=function(e){var t=this.__data__;return(e=Re(t,e))<0?Va:t[e][1]},Se.prototype.has=function(e){return-1<Re(this.__data__,e)},Se.prototype.set=function(e,t){var n=this.__data__,r=Re(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},_e.prototype.clear=function(){this.size=0,this.__data__={hash:new be,map:new(Q||Se),string:new be}},_e.prototype.delete=function(e){return e=Fn(this,e).delete(e),this.size-=e?1:0,e},_e.prototype.get=function(e){return Fn(this,e).get(e)},_e.prototype.has=function(e){return Fn(this,e).has(e)},_e.prototype.set=function(e,t){var n=Fn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,za),this},we.prototype.has=function(e){return this.__data__.has(e)},ke.prototype.clear=function(){this.__data__=new Se,this.size=0},ke.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},ke.prototype.get=function(e){return this.__data__.get(e)},ke.prototype.has=function(e){return this.__data__.has(e)},ke.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var r=n.__data__;if(!Q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new _e(r)}return n.set(e,t),this.size=n.size,this};var Fe=ln($e),Ue=ln(Ye,!0);function Ve(e,r){var o=!0;return Fe(e,function(e,t,n){return o=!!r(e,t,n)}),o}function Ke(e,t,n){for(var r=-1,o=e.length;++r<o;){var a,i,u=e[r],l=t(u);null!=l&&(a===Va?l==l&&!Uo(l):n(l,a))&&(a=l,i=u)}return i}function ze(e,r){var o=[];return Fe(e,function(e,t,n){r(e,t,n)&&o.push(e)}),o}function qe(e,t,n,r,o){var a=-1,i=e.length;for(n=n||$n,o=o||[];++a<i;){var u=e[a];0<t&&n(u)?1<t?qe(u,t-1,n,r,o):ju(o,u):r||(o[o.length]=u)}return o}var He=cn(),Je=cn(!0);function $e(e,t){return e&&He(e,t,sa)}function Ye(e,t){return e&&Je(e,t,sa)}function Ge(t,e){return Ou(e,function(e){return Ro(t[e])})}function Ze(e,t){for(var n=0,r=(t=Jt(t,e)).length;null!=e&&n<r;)e=e[hr(t[n++])];return n&&n==r?e:Va}function Qe(e,t,n){t=t(e);return ko(e)?t:ju(t,n(e))}function Xe(e){return null==e?e===Va?"[object Undefined]":"[object Null]":N&&N in h(e)?function(e){var t=b.call(e,N),n=e[N];try{e[N]=Va;var r=!0}catch(e){}var o=m.call(e);r&&(t?e[N]=n:delete e[N]);return o}(e):(e=e,m.call(e))}function et(e,t){return t<e}function tt(e,t){return null!=e&&b.call(e,t)}function nt(e,t){return null!=e&&t in h(e)}function rt(e,t,n){for(var r=n?xu:Cu,o=e[0].length,a=e.length,i=a,u=k(a),l=1/0,c=[];i--;){var s=e[i];i&&t&&(s=Pu(s,zu(t))),l=H(s.length,l),u[i]=!n&&(t||120<=o&&120<=s.length)?new we(i&&s):Va}var s=e[0],f=-1,d=u[0];e:for(;++f<o&&c.length<l;){var p=s[f],y=t?t(p):p,p=n||0!==p?p:0;if(!(d?Hu(d,y):r(c,y,n))){for(i=a;--i;){var h=u[i];if(!(h?Hu(h,y):r(e[i],y,n)))continue e}d&&d.push(y),c.push(p)}}return c}function ot(e,t,n){t=null==(e=or(e,t=Jt(t,e)))?e:e[hr(Pr(t))];return null==t?Va:Su(t,e,n)}function at(e){return Mo(e)&&Xe(e)==Za}function it(e,t,n,r,o){return e===t||(null==e||null==t||!Mo(e)&&!Mo(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var i=ko(e),u=ko(t),l=i?Qa:qn(e),c=u?Qa:qn(t),s=(l=l==Za?ii:l)==ii,u=(c=c==Za?ii:c)==ii,c=l==c;if(c&&xo(e)){if(!xo(t))return!1;s=!(i=!0)}if(c&&!s)return a=a||new ke,i||Vo(e)?Tn(e,t,n,r,o,a):function(e,t,n,r,o,a,i){switch(n){case yi:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pi:return e.byteLength==t.byteLength&&a(new O(e),new O(t))?!0:!1;case Xa:case ei:case ai:return bo(+e,+t);case ti:return e.name==t.name&&e.message==t.message;case li:case si:return e==t+"";case oi:var u=Xu;case ci:var l=1&r;if(u=u||nl,e.size!=t.size&&!l)return!1;l=i.get(e);if(l)return l==t;r|=2,i.set(e,t);u=Tn(u(e),u(t),r,o,a,i);return i.delete(e),u;case fi:if(fe)return fe.call(e)==fe.call(t)}return!1}(e,t,l,n,r,o,a);if(!(1&n)){s=s&&b.call(e,"__wrapped__"),u=u&&b.call(t,"__wrapped__");if(s||u){s=s?e.value():e,u=u?t.value():t;return a=a||new ke,o(s,u,n,r,a)}}return c&&(a=a||new ke,function(e,t,n,r,o,a){var i=1&n,u=Mn(e),l=u.length,c=Mn(t).length;if(l!=c&&!i)return!1;var s=l;for(;s--;){var f=u[s];if(!(i?f in t:b.call(t,f)))return!1}var d=a.get(e),c=a.get(t);if(d&&c)return d==t&&c==e;var p=!0;a.set(e,t),a.set(t,e);var y=i;for(;++s<l;){f=u[s];var h,m=e[f],g=t[f];if(!((h=r?i?r(g,m,f,t,e,a):r(m,g,f,e,t,a):h)===Va?m===g||o(m,g,n,r,a):h)){p=!1;break}y=y||"constructor"==f}p&&!y&&(d=e.constructor,c=t.constructor,d!=c&&"constructor"in e&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof c&&c instanceof c)&&(p=!1));return a.delete(e),a.delete(t),p}(e,t,n,r,o,a))}(e,t,n,r,it,o))}function ut(e,t,n,r){var o=n.length,a=o,i=!r;if(null==e)return!a;for(e=h(e);o--;){var u=n[o];if(i&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=n[o])[0],c=e[l],s=u[1];if(i&&u[2]){if(c===Va&&!(l in e))return!1}else{var f,d=new ke;if(!((f=r?r(c,s,l,e,t,d):f)===Va?it(s,c,3,r,d):f))return!1}}return!0}function lt(e){return!(!No(e)||(t=e,c&&c in t))&&(Ro(e)?_:Gi).test(mr(e));var t}function ct(e){return"function"==typeof e?e:null==e?Ma:"object"==typeof e?ko(e)?ht(e[0],e[1]):yt(e):Ba(e)}function st(e){if(!er(e))return z(e);var t,n=[];for(t in h(e))b.call(e,t)&&"constructor"!=t&&n.push(t);return n}function ft(e){if(!No(e))return function(e){var t=[];if(null!=e)for(var n in h(e))t.push(n);return t}(e);var t,n=er(e),r=[];for(t in e)("constructor"!=t||!n&&b.call(e,t))&&r.push(t);return r}function dt(e,t){return e<t}function pt(e,r){var o=-1,a=Oo(e)?k(e.length):[];return Fe(e,function(e,t,n){a[++o]=r(e,t,n)}),a}function yt(t){var n=Un(t);return 1==n.length&&n[0][2]?nr(n[0][0],n[0][1]):function(e){return e===t||ut(e,t,n)}}function ht(n,r){return Zn(n)&&tr(r)?nr(hr(n),r):function(e){var t=aa(e,n);return t===Va&&t===r?ia(e,n):it(r,t,3)}}function mt(r,o,a,i,u){r!==o&&He(o,function(e,t){var n;u=u||new ke,No(e)?function(e,t,n,r,o,a,i){var u=ar(e,n),l=ar(t,n),c=i.get(l);if(c)return Pe(e,n,c);var s=a?a(u,l,n+"",e,t,i):Va,f=s===Va;{var d;f&&(d=ko(l),c=!d&&xo(l),t=!d&&!c&&Vo(l),s=l,d||c||t?s=ko(u)?u:Co(u)?rn(u):c?Zt(l,!(f=!1)):t?Xt(l,!(f=!1)):[]:Io(l)||wo(l)?wo(s=u)?s=Go(u):No(u)&&!Ro(u)||(s=Jn(l)):f=!1)}f&&(i.set(l,s),o(s,l,r,a,i),i.delete(l));Pe(e,n,s)}(r,o,t,a,mt,i,u):(n=i?i(ar(r,t),e,t+"",r,o,u):Va,Pe(r,t,n=n===Va?e:n))},fa)}function gt(e,t){var n=e.length;if(n)return Yn(t+=t<0?n:0,n)?e[t]:Va}function vt(e,r,n){r=r.length?Pu(r,function(t){return ko(t)?function(e){return Ze(e,1===t.length?t[0]:t)}:t}):[Ma];var o=-1;return r=Pu(r,zu(Wn())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(pt(e,function(t,e,n){return{criteria:Pu(r,function(e){return e(t)}),index:++o,value:t}}),function(e,t){return function(e,t,n){var r=-1,o=e.criteria,a=t.criteria,i=o.length,u=n.length;for(;++r<i;){var l=en(o[r],a[r]);if(l){if(u<=r)return l;var c=n[r];return l*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)})}function bt(e,t,n){for(var r=-1,o=t.length,a={};++r<o;){var i=t[r],u=Ze(e,i);n(u,i)&&xt(a,Jt(i,e),u)}return a}function St(e,t,n,r){var o=r?Lu:Du,a=-1,i=t.length,u=e;for(e===t&&(t=rn(t)),n&&(u=Pu(e,zu(n)));++a<i;)for(var l=0,c=t[a],s=n?n(c):c;-1<(l=o(u,s,l,r));)u!==e&&R.call(u,l,1),R.call(e,l,1);return e}function _t(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o,a=t[n];n!=r&&a===o||(Yn(o=a)?R.call(e,a,1):Wt(e,a))}return e}function wt(e,t){return e+W(Y()*(t-e+1))}function kt(e,t){var n="";if(!e||t<1||Ja<t)return n;for(;t%2&&(n+=e),(t=W(t/2))&&(e+=e),t;);return n}function Et(e,t){return lr(rr(e,t,Ma),e+"")}function Ot(e){return Oe(ba(e))}function Ct(e,t){e=ba(e);return fr(e,De(t,0,e.length))}function xt(e,t,n,r){if(!No(e))return e;for(var o=-1,a=(t=Jt(t,e)).length,i=a-1,u=e;null!=u&&++o<a;){var l,c=hr(t[o]),s=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;o!=i&&(l=u[c],(s=r?r(l,c,u):Va)===Va&&(s=No(l)?l:Yn(t[o+1])?[]:{})),je(u,c,s),u=u[c]}return e}var Pt=re?function(e,t){return re.set(e,t),e}:Ma,jt=M?function(e,t){return M(e,"toString",{configurable:!0,enumerable:!1,value:Ta(t),writable:!0})}:Ma;function Rt(e){return fr(ba(e))}function At(e,t,n){var r=-1,o=e.length;(n=o<n?o:n)<0&&(n+=o),o=n<(t=t<0?o<-t?0:o+t:t)?0:n-t>>>0,t>>>=0;for(var a=k(o);++r<o;)a[r]=e[r+t];return a}function Tt(e,r){var o;return Fe(e,function(e,t,n){return!(o=r(e,t,n))}),!!o}function Nt(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var a=r+o>>>1,i=e[a];null!==i&&!Uo(i)&&(n?i<=t:i<t)?r=1+a:o=a}return o}return Mt(e,t,Ma,n)}function Mt(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var i=(t=n(t))!=t,u=null===t,l=Uo(t),c=t===Va;o<a;){var s=W((o+a)/2),f=n(e[s]),d=f!==Va,p=null===f,y=f==f,h=Uo(f),f=i?r||y:c?y&&(r||d):u?y&&d&&(r||!p):l?y&&d&&!p&&(r||!h):!p&&!h&&(r?f<=t:f<t);f?o=s+1:a=s}return H(a,4294967294)}function Dt(e,t){for(var n=-1,r=e.length,o=0,a=[];++n<r;){var i,u=e[n],l=t?t(u):u;n&&bo(l,i)||(i=l,a[o++]=0===u?0:u)}return a}function Lt(e){return"number"==typeof e?e:Uo(e)?$a:+e}function It(e){if("string"==typeof e)return e;if(ko(e))return Pu(e,It)+"";if(Uo(e))return de?de.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bt(e,t,n){var r=-1,o=Cu,a=e.length,i=!0,u=[],l=u;if(n)i=!1,o=xu;else if(200<=a){var c=t?null:Cn(e);if(c)return nl(c);i=!1,o=Hu,l=new we}else l=t?[]:u;e:for(;++r<a;){var s=e[r],f=t?t(s):s,s=n||0!==s?s:0;if(i&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),u.push(s)}else o(l,f,n)||(l!==u&&l.push(f),u.push(s))}return u}function Wt(e,t){return null==(e=or(e,t=Jt(t,e)))||delete e[hr(Pr(t))]}function Ft(e,t,n,r){return xt(e,t,n(Ze(e,t)),r)}function Ut(e,t,n,r){for(var o=e.length,a=r?o:-1;(r?a--:++a<o)&&t(e[a],a,e););return n?At(e,r?0:a,r?a+1:o):At(e,r?a+1:0,r?o:a)}function Vt(e,t){return Ru(t,function(e,t){return t.func.apply(t.thisArg,ju([e],t.args))},e=e instanceof ve?e.value():e)}function Kt(e,t,n){var r=e.length;if(r<2)return r?Bt(e[0]):[];for(var o=-1,a=k(r);++o<r;)for(var i=e[o],u=-1;++u<r;)u!=o&&(a[o]=We(a[o]||i,e[u],t,n));return Bt(qe(a,1),t,n)}function zt(e,t,n){for(var r=-1,o=e.length,a=t.length,i={};++r<o;){var u=r<a?t[r]:Va;n(i,e[r],u)}return i}function qt(e){return Co(e)?e:[]}function Ht(e){return"function"==typeof e?e:Ma}function Jt(e,t){return ko(e)?e:Zn(e,t)?[e]:yr(Zo(e))}var $t=Et;function Yt(e,t,n){var r=e.length;return n=n===Va?r:n,!t&&r<=n?e:At(e,t,n)}var Gt=D||function(e){return du.clearTimeout(e)};function Zt(e,t){if(t)return e.slice();t=e.length,t=C?C(t):new e.constructor(t);return e.copy(t),t}function Qt(e){var t=new e.constructor(e.byteLength);return new O(t).set(new O(e)),t}function Xt(e,t){t=t?Qt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function en(e,t){if(e!==t){var n=e!==Va,r=null===e,o=e==e,a=Uo(e),i=t!==Va,u=null===t,l=t==t,c=Uo(t);if(!u&&!c&&!a&&t<e||a&&i&&l&&!u&&!c||r&&i&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&e<t||c&&n&&o&&!r&&!a||u&&n&&o||!i&&o||!l)return-1}return 0}function tn(e,t,n,r){for(var o=-1,a=e.length,i=n.length,u=-1,l=t.length,c=q(a-i,0),s=k(l+c),f=!r;++u<l;)s[u]=t[u];for(;++o<i;)(f||o<a)&&(s[n[o]]=e[o]);for(;c--;)s[u++]=e[o++];return s}function nn(e,t,n,r){for(var o=-1,a=e.length,i=-1,u=n.length,l=-1,c=t.length,s=q(a-u,0),f=k(s+c),d=!r;++o<s;)f[o]=e[o];for(var p=o;++l<c;)f[p+l]=t[l];for(;++i<u;)(d||o<a)&&(f[p+n[i]]=e[o++]);return f}function rn(e,t){var n=-1,r=e.length;for(t=t||k(r);++n<r;)t[n]=e[n];return t}function on(e,t,n,r){var o=!n;n=n||{};for(var a=-1,i=t.length;++a<i;){var u=t[a],l=r?r(n[u],e[u],u,n,e):Va;(o?Ne:je)(n,u,l=l===Va?e[u]:l)}return n}function an(o,a){return function(e,t){var n=ko(e)?_u:Ae,r=a?a():{};return n(e,o,Wn(t,2),r)}}function un(u){return Et(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:Va,a=2<r?t[2]:Va,o=3<u.length&&"function"==typeof o?(r--,o):Va;for(a&&Gn(t[0],t[1],a)&&(o=r<3?Va:o,r=1),e=h(e);++n<r;){var i=t[n];i&&u(e,i,n,o)}return e})}function ln(a,i){return function(e,t){if(null==e)return e;if(!Oo(e))return a(e,t);for(var n=e.length,r=i?n:-1,o=h(e);(i?r--:++r<n)&&!1!==t(o[r],r,o););return e}}function cn(l){return function(e,t,n){for(var r=-1,o=h(e),a=n(e),i=a.length;i--;){var u=a[l?i:++r];if(!1===t(o[u],u,o))break}return e}}function sn(r){return function(e){var t=Qu(e=Zo(e))?ol(e):Va,n=t?t[0]:e.charAt(0),e=t?Yt(t,1).join(""):e.slice(1);return n[r]()+e}}function fn(t){return function(e){return Ru(Ra(wa(e).replace(nu,"")),t,"")}}function dn(r){return function(){var e=arguments;switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=ye(r.prototype),n=r.apply(t,e);return No(n)?n:t}}function pn(a,i,u){var l=dn(a);return function e(){for(var t=arguments.length,n=k(t),r=t,o=Bn(e);r--;)n[r]=arguments[r];o=t<3&&n[0]!==o&&n[t-1]!==o?[]:tl(n,o);return(t-=o.length)<u?En(a,i,mn,e.placeholder,Va,n,o,Va,Va,u-t):Su(this&&this!==du&&this instanceof e?l:a,this,n)}}function yn(a){return function(e,t,n){var r,o=h(e);Oo(e)||(r=Wn(t,3),e=sa(e),t=function(e){return r(o[e],e,o)});n=a(e,t,n);return-1<n?o[r?e[n]:n]:Va}}function hn(l){return Nn(function(o){var a=o.length,e=a,t=ge.prototype.thru;for(l&&o.reverse();e--;){var n=o[e];if("function"!=typeof n)throw new v(Ka);t&&!u&&"wrapper"==In(n)&&(u=new ge([],!0))}for(e=u?e:a;++e<a;)var r=In(n=o[e]),i="wrapper"==r?Ln(n):Va,u=i&&Qn(i[0])&&424==i[1]&&!i[4].length&&1==i[9]?u[In(i[0])].apply(u,i[3]):1==n.length&&Qn(n)?u[r]():u.thru(n);return function(){var e=arguments,t=e[0];if(u&&1==e.length&&ko(t))return u.plant(t).value();for(var n=0,r=a?o[n].apply(this,e):t;++n<a;)r=o[n].call(this,r);return r}})}function mn(u,l,c,s,f,d,p,y,h,m){var g=l&Ha,v=1&l,b=2&l,S=24&l,_=512&l,w=b?Va:dn(u);return function e(){for(var t,n=k(i=arguments.length),r=i;r--;)n[r]=arguments[r];if(S&&(t=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(n,a=Bn(e))),s&&(n=tn(n,s,f,S)),d&&(n=nn(n,d,p,S)),i-=t,S&&i<m){var o=tl(n,a);return En(u,l,mn,e.placeholder,c,n,o,y,h,m-i)}var a=v?c:this,o=b?a[u]:u,i=n.length;return y?n=function(e,t){for(var n=e.length,r=H(t.length,n),o=rn(e);r--;){var a=t[r];e[r]=Yn(a,n)?o[a]:Va}return e}(n,y):_&&1<i&&n.reverse(),g&&h<i&&(n.length=h),(o=this&&this!==du&&this instanceof e?w||dn(o):o).apply(a,n)}}function gn(n,i){return function(e,t){return e=e,r=n,o=i(t),a={},$e(e,function(e,t,n){r(a,o(e),t,n)}),a;var r,o,a}}function vn(r,o){return function(e,t){var n;if(e===Va&&t===Va)return o;if(e!==Va&&(n=e),t!==Va){if(n===Va)return t;t="string"==typeof e||"string"==typeof t?(e=It(e),It(t)):(e=Lt(e),Lt(t)),n=r(e,t)}return n}}function bn(r){return Nn(function(e){return e=Pu(e,zu(Wn())),Et(function(t){var n=this;return r(e,function(e){return Su(e,n,t)})})})}function Sn(e,t){var n=(t=t===Va?" ":It(t)).length;if(n<2)return n?kt(t,e):t;n=kt(t,B(e/rl(t)));return Qu(t)?Yt(ol(n),0,e).join(""):n.slice(0,e)}function _n(u,e,l,c){var s=1&e,f=dn(u);return function e(){for(var t=-1,n=arguments.length,r=-1,o=c.length,a=k(o+n),i=this&&this!==du&&this instanceof e?f:u;++r<o;)a[r]=c[r];for(;n--;)a[r++]=arguments[++t];return Su(i,s?l:this,a)}}function wn(r){return function(e,t,n){return n&&"number"!=typeof n&&Gn(e,t,n)&&(t=n=Va),e=Ho(e),t===Va?(t=e,e=0):t=Ho(t),function(e,t,n,r){for(var o=-1,a=q(B((t-e)/(n||1)),0),i=k(a);a--;)i[r?a:++o]=e,e+=n;return i}(e,t,n=n===Va?e<t?1:-1:Ho(n),r)}}function kn(n){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=Yo(e),t=Yo(t)),n(e,t)}}function En(e,t,n,r,o,a,i,u,l,c){var s=8&t;t|=s?32:64,4&(t&=~(s?64:32))||(t&=-4);c=[e,t,o,s?a:Va,s?i:Va,s?Va:a,s?Va:i,u,l,c],n=n.apply(Va,c);return Qn(e)&&ir(n,c),n.placeholder=r,cr(n,e,t)}function On(e){var r=o[e];return function(e,t){if(e=Yo(e),(t=null==t?0:H(Jo(t),292))&&V(e)){var n=(Zo(e)+"e").split("e");return+((n=(Zo(r(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(+n[1]-t))}return r(e)}}var Cn=ee&&1/nl(new ee([,-0]))[1]==1/0?function(e){return new ee(e)}:Ia;function xn(a){return function(e){var t,n,r,o=qn(e);return o==oi?Xu(e):o==ci?(o=e,t=-1,n=Array(o.size),o.forEach(function(e){n[++t]=[e,e]}),n):Pu(a(r=e),function(e){return[e,r[e]]})}}function Pn(e,t,n,r,o,a,i,u){var l=2&t;if(!l&&"function"!=typeof e)throw new v(Ka);var c,s,f=r?r.length:0;f||(t&=-97,r=o=Va),i=i===Va?i:q(Jo(i),0),u=u===Va?u:Jo(u),f-=o?o.length:0,64&t&&(c=r,s=o,r=o=Va);var d,p,y,h,m=l?Va:Ln(e),i=[e,t,n,r,o,c,s,a,i,u];m&&function(e,t){var n=e[1],r=t[1],o=n|r,a=o<131,i=r==Ha&&8==n||r==Ha&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!i)return;1&r&&(e[2]=t[2],o|=1&n?0:4);n=t[3];{var u;n&&(u=e[3],e[3]=u?tn(u,n,t[4]):n,e[4]=u?tl(e[3],qa):t[4])}(n=t[5])&&(u=e[5],e[5]=u?nn(u,n,t[6]):n,e[6]=u?tl(e[5],qa):t[6]);(n=t[7])&&(e[7]=n);r&Ha&&(e[8]=null==e[8]?t[8]:H(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(i,m),e=i[0],t=i[1],n=i[2],r=i[3],o=i[4],!(u=i[9]=i[9]===Va?l?0:e.length:q(i[9]-f,0))&&24&t&&(t&=-25);n=t&&1!=t?8==t||16==t?pn(e,t,u):32!=t&&33!=t||o.length?mn.apply(Va,i):_n(e,t,n,r):(p=n,y=1&t,h=dn(d=e),function e(){return(this&&this!==du&&this instanceof e?h:d).apply(y?p:this,arguments)});return cr((m?Pt:ir)(n,i),e,t)}function jn(e,t,n,r){return e===Va||bo(e,y[n])&&!b.call(r,n)?t:e}function Rn(e,t,n,r,o,a){return No(e)&&No(t)&&(a.set(t,e),mt(e,t,Va,Rn,a),a.delete(t)),e}function An(e){return Io(e)?Va:e}function Tn(e,t,n,r,o,a){var i=1&n,u=e.length,l=t.length;if(u!=l&&!(i&&u<l))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var s=-1,f=!0,d=2&n?new we:Va;for(a.set(e,t),a.set(t,e);++s<u;){var p,y=e[s],h=t[s];if((p=r?i?r(h,y,s,t,e,a):r(y,h,s,e,t,a):p)!==Va){if(p)continue;f=!1;break}if(d){if(!Tu(t,function(e,t){return!Hu(d,t)&&(y===e||o(y,e,n,r,a))&&d.push(t)})){f=!1;break}}else if(y!==h&&!o(y,h,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Nn(e){return lr(rr(e,Va,kr),e+"")}function Mn(e){return Qe(e,sa,Kn)}function Dn(e){return Qe(e,fa,zn)}var Ln=re?function(e){return re.get(e)}:Ia;function In(e){for(var t=e.name+"",n=oe[t],r=b.call(oe,t)?n.length:0;r--;){var o=n[r],a=o.func;if(null==a||a==e)return o.name}return t}function Bn(e){return(b.call(pe,"placeholder")?pe:e).placeholder}function Wn(){var e=(e=pe.iteratee||Da)===Da?ct:e;return arguments.length?e(arguments[0],arguments[1]):e}function Fn(e,t){var n,r=e.__data__;return("string"==(e=typeof(n=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Un(e){for(var t=sa(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,tr(o)]}return t}function Vn(e,t){t=t,t=null==(e=e)?Va:e[t];return lt(t)?t:Va}var Kn=F?function(t){return null==t?[]:(t=h(t),Ou(F(t),function(e){return j.call(t,e)}))}:Wa,zn=F?function(e){for(var t=[];e;)ju(t,Kn(e)),e=x(e);return t}:Wa,qn=Xe;function Hn(e,t,n){for(var r=-1,o=(t=Jt(t,e)).length,a=!1;++r<o;){var i=hr(t[r]);if(!(a=null!=e&&n(e,i)))break;e=e[i]}return a||++r!=o?a:!!(o=null==e?0:e.length)&&To(o)&&Yn(i,o)&&(ko(e)||wo(e))}function Jn(e){return"function"!=typeof e.constructor||er(e)?{}:ye(x(e))}function $n(e){return ko(e)||wo(e)||!!(A&&e&&e[A])}function Yn(e,t){var n=typeof e;return!!(t=null==t?Ja:t)&&("number"==n||"symbol"!=n&&Qi.test(e))&&-1<e&&e%1==0&&e<t}function Gn(e,t,n){if(No(n)){var r=typeof t;return("number"==r?Oo(n)&&Yn(t,n.length):"string"==r&&t in n)&&bo(n[t],e)}}function Zn(e,t){if(!ko(e)){var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Uo(e)||(Di.test(e)||!Mi.test(e)||null!=t&&e in h(t))}}function Qn(e){var t=In(e),n=pe[t];if("function"==typeof n&&t in ve.prototype){if(e===n)return 1;n=Ln(n);return n&&e===n[0]}}(Z&&qn(new Z(new ArrayBuffer(1)))!=yi||Q&&qn(new Q)!=oi||X&&qn(X.resolve())!=ui||ee&&qn(new ee)!=ci||te&&qn(new te)!=di)&&(qn=function(e){var t=Xe(e),e=t==ii?e.constructor:Va,e=e?mr(e):"";if(e)switch(e){case ae:return yi;case ie:return oi;case ue:return ui;case le:return ci;case ce:return di}return t});var Xn=i?Ro:Fa;function er(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||y)}function tr(e){return e==e&&!No(e)}function nr(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==Va||t in h(e)))}}function rr(a,i,u){return i=q(i===Va?a.length-1:i,0),function(){for(var e=arguments,t=-1,n=q(e.length-i,0),r=k(n);++t<n;)r[t]=e[i+t];for(var t=-1,o=k(i+1);++t<i;)o[t]=e[t];return o[i]=u(r),Su(a,this,o)}}function or(e,t){return t.length<2?e:Ze(e,At(t,0,-1))}function ar(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ir=sr(Pt),ur=I||function(e,t){return du.setTimeout(e,t)},lr=sr(jt);function cr(e,t,n){var r,o,t=t+"";return lr(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(1<n?"& ":"")+t[r],t=t.join(2<n?", ":" "),e.replace(Fi,"{\n/* [wrapped with "+t+"] */\n")}(t,(r=(t=(t=t).match(Ui))?t[1].split(Vi):[],o=n,wu(Ga,function(e){var t="_."+e[0];o&e[1]&&!Cu(r,t)&&r.push(t)}),r.sort())))}function sr(n){var r=0,o=0;return function(){var e=J(),t=16-(e-o);if(o=e,0<t){if(800<=++r)return arguments[0]}else r=0;return n.apply(Va,arguments)}}function fr(e,t){var n=-1,r=e.length,o=r-1;for(t=t===Va?r:t;++n<t;){var a=wt(n,o),i=e[a];e[a]=e[n],e[n]=i}return e.length=t,e}var dr,pr,yr=(pr=(dr=po(dr=function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(Li,function(e,t,n,r){o.push(n?r.replace(qi,"$1"):t||e)}),o},function(e){return 500===pr.size&&pr.clear(),e})).cache,dr);function hr(e){if("string"==typeof e||Uo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function mr(e){if(null!=e){try{return u.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function gr(e){if(e instanceof ve)return e.clone();var t=new ge(e.__wrapped__,e.__chain__);return t.__actions__=rn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var vr=Et(function(e,t){return Co(e)?We(e,qe(t,1,Co,!0)):[]}),br=Et(function(e,t){var n=Pr(t);return Co(n)&&(n=Va),Co(e)?We(e,qe(t,1,Co,!0),Wn(n,2)):[]}),Sr=Et(function(e,t){var n=Pr(t);return Co(n)&&(n=Va),Co(e)?We(e,qe(t,1,Co,!0),Va,n):[]});function _r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;n=null==n?0:Jo(n);return n<0&&(n=q(r+n,0)),Mu(e,Wn(t,3),n)}function wr(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==Va&&(o=Jo(n),o=n<0?q(r+o,0):H(o,r-1)),Mu(e,Wn(t,3),o,!0)}function kr(e){return(null==e?0:e.length)?qe(e,1):[]}function Er(e){return e&&e.length?e[0]:Va}var Or=Et(function(e){var t=Pu(e,qt);return t.length&&t[0]===e[0]?rt(t):[]}),Cr=Et(function(e){var t=Pr(e),n=Pu(e,qt);return t===Pr(n)?t=Va:n.pop(),n.length&&n[0]===e[0]?rt(n,Wn(t,2)):[]}),xr=Et(function(e){var t=Pr(e),n=Pu(e,qt);return(t="function"==typeof t?t:Va)&&n.pop(),n.length&&n[0]===e[0]?rt(n,Va,t):[]});function Pr(e){var t=null==e?0:e.length;return t?e[t-1]:Va}var jr=Et(Rr);function Rr(e,t){return e&&e.length&&t&&t.length?St(e,t):e}var Ar=Nn(function(e,t){var n=null==e?0:e.length,r=Me(e,t);return _t(e,Pu(t,function(e){return Yn(e,n)?+e:e}).sort(en)),r});function Tr(e){return null==e?e:G.call(e)}var Nr=Et(function(e){return Bt(qe(e,1,Co,!0))}),Mr=Et(function(e){var t=Pr(e);return Co(t)&&(t=Va),Bt(qe(e,1,Co,!0),Wn(t,2))}),Dr=Et(function(e){var t="function"==typeof(t=Pr(e))?t:Va;return Bt(qe(e,1,Co,!0),Va,t)});function Lr(t){if(!t||!t.length)return[];var n=0;return t=Ou(t,function(e){return Co(e)&&(n=q(e.length,n),1)}),Vu(n,function(e){return Pu(t,Wu(e))})}function Ir(e,t){if(!e||!e.length)return[];e=Lr(e);return null==t?e:Pu(e,function(e){return Su(t,Va,e)})}var Br=Et(function(e,t){return Co(e)?We(e,t):[]}),Wr=Et(function(e){return Kt(Ou(e,Co))}),Fr=Et(function(e){var t=Pr(e);return Co(t)&&(t=Va),Kt(Ou(e,Co),Wn(t,2))}),Ur=Et(function(e){var t="function"==typeof(t=Pr(e))?t:Va;return Kt(Ou(e,Co),Va,t)}),Vr=Et(Lr);var Kr=Et(function(e){var t=e.length,t="function"==typeof(t=1<t?e[t-1]:Va)?(e.pop(),t):Va;return Ir(e,t)});function zr(e){e=pe(e);return e.__chain__=!0,e}function qr(e,t){return t(e)}var Hr=Nn(function(t){function e(e){return Me(e,t)}var n=t.length,r=n?t[0]:0,o=this.__wrapped__;return!(1<n||this.__actions__.length)&&o instanceof ve&&Yn(r)?((o=o.slice(r,+r+(n?1:0))).__actions__.push({func:qr,args:[e],thisArg:Va}),new ge(o,this.__chain__).thru(function(e){return n&&!e.length&&e.push(Va),e})):this.thru(e)});var Jr=an(function(e,t,n){b.call(e,n)?++e[n]:Ne(e,n,1)});var $r=yn(_r),Yr=yn(wr);function Gr(e,t){return(ko(e)?wu:Fe)(e,Wn(t,3))}function Zr(e,t){return(ko(e)?ku:Ue)(e,Wn(t,3))}var Qr=an(function(e,t,n){b.call(e,n)?e[n].push(t):Ne(e,n,[t])});var Xr=Et(function(e,t,n){var r=-1,o="function"==typeof t,a=Oo(e)?k(e.length):[];return Fe(e,function(e){a[++r]=o?Su(t,e,n):ot(e,t,n)}),a}),eo=an(function(e,t,n){Ne(e,n,t)});function to(e,t){return(ko(e)?Pu:pt)(e,Wn(t,3))}var no=an(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var ro=Et(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&Gn(e,t[0],t[1])?t=[]:2<n&&Gn(t[0],t[1],t[2])&&(t=[t[0]]),vt(e,qe(t,1),[])}),oo=L||function(){return du.Date.now()};function ao(e,t,n){return t=n?Va:t,t=e&&null==t?e.length:t,Pn(e,Ha,Va,Va,Va,Va,t)}function io(e,t){var n;if("function"!=typeof t)throw new v(Ka);return e=Jo(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=Va),n}}var uo=Et(function(e,t,n){var r,o=1;return n.length&&(r=tl(n,Bn(uo)),o|=32),Pn(e,o,t,n,r)}),lo=Et(function(e,t,n){var r,o=3;return n.length&&(r=tl(n,Bn(lo)),o|=32),Pn(t,o,e,n,r)});function co(r,n,e){var o,a,i,u,l,c,s=0,f=!1,d=!1,t=!0;if("function"!=typeof r)throw new v(Ka);function p(e){var t=o,n=a;return o=a=Va,s=e,u=r.apply(n,t)}function y(e){var t=e-c;return c===Va||n<=t||t<0||d&&i<=e-s}function h(){var e,t=oo();if(y(t))return m(t);l=ur(h,(t=n-((e=t)-c),d?H(t,i-(e-s)):t))}function m(e){return l=Va,t&&o?p(e):(o=a=Va,u)}function g(){var e=oo(),t=y(e);if(o=arguments,a=this,c=e,t){if(l===Va)return s=t=c,l=ur(h,n),f?p(t):u;if(d)return Gt(l),l=ur(h,n),p(c)}return l===Va&&(l=ur(h,n)),u}return n=Yo(n)||0,No(e)&&(f=!!e.leading,d="maxWait"in e,i=d?q(Yo(e.maxWait)||0,n):i,t="trailing"in e?!!e.trailing:t),g.cancel=function(){l!==Va&&Gt(l),s=0,o=c=a=l=Va},g.flush=function(){return l===Va?u:m(oo())},g}var so=Et(function(e,t){return Be(e,1,t)}),fo=Et(function(e,t,n){return Be(e,Yo(t)||0,n)});function po(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new v(Ka);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);e=r.apply(this,e);return a.cache=n.set(t,e)||n,e};return a.cache=new(po.Cache||_e),a}function yo(t){if("function"!=typeof t)throw new v(Ka);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}po.Cache=_e;var ho=$t(function(r,o){var a=(o=1==o.length&&ko(o[0])?Pu(o[0],zu(Wn())):Pu(qe(o,1),zu(Wn()))).length;return Et(function(e){for(var t=-1,n=H(e.length,a);++t<n;)e[t]=o[t].call(this,e[t]);return Su(r,this,e)})}),mo=Et(function(e,t){var n=tl(t,Bn(mo));return Pn(e,32,Va,t,n)}),go=Et(function(e,t){var n=tl(t,Bn(go));return Pn(e,64,Va,t,n)}),vo=Nn(function(e,t){return Pn(e,256,Va,Va,Va,t)});function bo(e,t){return e===t||e!=e&&t!=t}var So=kn(et),_o=kn(function(e,t){return t<=e}),wo=at(function(){return arguments}())?at:function(e){return Mo(e)&&b.call(e,"callee")&&!j.call(e,"callee")},ko=k.isArray,Eo=yu?zu(yu):function(e){return Mo(e)&&Xe(e)==pi};function Oo(e){return null!=e&&To(e.length)&&!Ro(e)}function Co(e){return Mo(e)&&Oo(e)}var xo=U||Fa,Po=hu?zu(hu):function(e){return Mo(e)&&Xe(e)==ei};function jo(e){if(!Mo(e))return!1;var t=Xe(e);return t==ti||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Io(e)}function Ro(e){if(!No(e))return!1;e=Xe(e);return e==ni||e==ri||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ao(e){return"number"==typeof e&&e==Jo(e)}function To(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=Ja}function No(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Mo(e){return null!=e&&"object"==typeof e}var Do=mu?zu(mu):function(e){return Mo(e)&&qn(e)==oi};function Lo(e){return"number"==typeof e||Mo(e)&&Xe(e)==ai}function Io(e){if(!Mo(e)||Xe(e)!=ii)return!1;e=x(e);if(null===e)return!0;e=b.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&u.call(e)==g}var Bo=gu?zu(gu):function(e){return Mo(e)&&Xe(e)==li};var Wo=vu?zu(vu):function(e){return Mo(e)&&qn(e)==ci};function Fo(e){return"string"==typeof e||!ko(e)&&Mo(e)&&Xe(e)==si}function Uo(e){return"symbol"==typeof e||Mo(e)&&Xe(e)==fi}var Vo=bu?zu(bu):function(e){return Mo(e)&&To(e.length)&&!!lu[Xe(e)]};var Ko=kn(dt),zo=kn(function(e,t){return e<=t});function qo(e){if(!e)return[];if(Oo(e))return(Fo(e)?ol:rn)(e);if(T&&e[T])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[T]());var t=qn(e);return(t==oi?Xu:t==ci?nl:ba)(e)}function Ho(e){return e?(e=Yo(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}function Jo(e){var t=Ho(e),e=t%1;return t==t?e?t-e:t:0}function $o(e){return e?De(Jo(e),0,Ya):0}function Yo(e){if("number"==typeof e)return e;if(Uo(e))return $a;if("string"!=typeof(e=No(e)?No(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=Ku(e);var t=Yi.test(e);return t||Zi.test(e)?fu(e.slice(2),t?2:8):$i.test(e)?$a:+e}function Go(e){return on(e,fa(e))}function Zo(e){return null==e?"":It(e)}var Qo=un(function(e,t){if(er(t)||Oo(t))on(t,sa(t),e);else for(var n in t)b.call(t,n)&&je(e,n,t[n])}),Xo=un(function(e,t){on(t,fa(t),e)}),ea=un(function(e,t,n,r){on(t,fa(t),e,r)}),ta=un(function(e,t,n,r){on(t,sa(t),e,r)}),na=Nn(Me);var ra=Et(function(e,t){e=h(e);var n=-1,r=t.length,o=2<r?t[2]:Va;for(o&&Gn(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],i=fa(a),u=-1,l=i.length;++u<l;){var c=i[u],s=e[c];(s===Va||bo(s,y[c])&&!b.call(e,c))&&(e[c]=a[c])}return e}),oa=Et(function(e){return e.push(Va,Rn),Su(pa,Va,e)});function aa(e,t,n){t=null==e?Va:Ze(e,t);return t===Va?n:t}function ia(e,t){return null!=e&&Hn(e,t,nt)}var ua=gn(function(e,t,n){e[t=null!=t&&"function"!=typeof t.toString?m.call(t):t]=n},Ta(Ma)),la=gn(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=m.call(t)),b.call(e,t)?e[t].push(n):e[t]=[n]},Wn),ca=Et(ot);function sa(e){return(Oo(e)?Ee:st)(e)}function fa(e){return Oo(e)?Ee(e,!0):ft(e)}var da=un(function(e,t,n){mt(e,t,n)}),pa=un(function(e,t,n,r){mt(e,t,n,r)}),ya=Nn(function(t,e){var n={};if(null==t)return n;var r=!1;e=Pu(e,function(e){return e=Jt(e,t),r=r||1<e.length,e}),on(t,Dn(t),n),r&&(n=Le(n,7,An));for(var o=e.length;o--;)Wt(n,e[o]);return n});var ha=Nn(function(e,t){return null==e?{}:bt(n=e,t,function(e,t){return ia(n,t)});var n});function ma(e,n){if(null==e)return{};var t=Pu(Dn(e),function(e){return[e]});return n=Wn(n),bt(e,t,function(e,t){return n(e,t[0])})}var ga=xn(sa),va=xn(fa);function ba(e){return null==e?[]:qu(e,sa(e))}var Sa=fn(function(e,t,n){return t=t.toLowerCase(),e+(n?_a(t):t)});function _a(e){return ja(Zo(e).toLowerCase())}function wa(e){return(e=Zo(e))&&e.replace(Xi,Yu).replace(ru,"")}var ka=fn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ea=fn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Oa=sn("toLowerCase");var Ca=fn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var xa=fn(function(e,t,n){return e+(n?" ":"")+ja(t)});var Pa=fn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ja=sn("toUpperCase");function Ra(e,t,n){return e=Zo(e),(t=n?Va:t)===Va?(n=e,au.test(n)?e.match(ou)||[]:e.match(Ki)||[]):e.match(t)||[]}var Aa=Et(function(e,t){try{return Su(e,Va,t)}catch(e){return jo(e)?e:new f(e)}}),r=Nn(function(t,e){return wu(e,function(e){e=hr(e),Ne(t,e,uo(t[e],t))}),t});function Ta(e){return function(){return e}}var Na=hn(),w=hn(!0);function Ma(e){return e}function Da(e){return ct("function"==typeof e?e:Le(e,1))}n=Et(function(t,n){return function(e){return ot(e,t,n)}}),t=Et(function(t,n){return function(e){return ot(t,e,n)}});function La(r,t,e){var n=sa(t),o=Ge(t,n);null!=e||No(t)&&(o.length||!n.length)||(e=t,t=r,r=this,o=Ge(t,sa(t)));var a=!(No(e)&&"chain"in e&&!e.chain),i=Ro(r);return wu(o,function(e){var n=t[e];r[e]=n,i&&(r.prototype[e]=function(){var e=this.__chain__;if(a||e){var t=r(this.__wrapped__);return(t.__actions__=rn(this.__actions__)).push({func:n,args:arguments,thisArg:r}),t.__chain__=e,t}return n.apply(r,ju([this.value()],arguments))})}),r}function Ia(){}E=bn(Pu),se=bn(Eu),D=bn(Tu);function Ba(e){return Zn(e)?Wu(hr(e)):(t=e,function(e){return Ze(e,t)});var t}Z=wn(),X=wn(!0);function Wa(){return[]}function Fa(){return!1}te=vn(function(e,t){return e+t},0),i=On("ceil"),I=vn(function(e,t){return e/t},1),jt=On("floor");var Ua,L=vn(function(e,t){return e*t},1),$t=On("round"),U=vn(function(e,t){return e-t},0);return pe.after=function(e,t){if("function"!=typeof t)throw new v(Ka);return e=Jo(e),function(){if(--e<1)return t.apply(this,arguments)}},pe.ary=ao,pe.assign=Qo,pe.assignIn=Xo,pe.assignInWith=ea,pe.assignWith=ta,pe.at=na,pe.before=io,pe.bind=uo,pe.bindAll=r,pe.bindKey=lo,pe.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ko(e)?e:[e]},pe.chain=zr,pe.chunk=function(e,t,n){t=(n?Gn(e,t,n):t===Va)?1:q(Jo(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,a=0,i=k(B(r/t));o<r;)i[a++]=At(e,o,o+=t);return i},pe.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var a=e[t];a&&(o[r++]=a)}return o},pe.concat=function(){var e=arguments.length;if(!e)return[];for(var t=k(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return ju(ko(n)?rn(n):[n],qe(t,1))},pe.cond=function(r){var o=null==r?0:r.length,t=Wn();return r=o?Pu(r,function(e){if("function"!=typeof e[1])throw new v(Ka);return[t(e[0]),e[1]]}):[],Et(function(e){for(var t=-1;++t<o;){var n=r[t];if(Su(n[0],this,e))return Su(n[1],this,e)}})},pe.conforms=function(e){return t=Le(e,1),n=sa(t),function(e){return Ie(e,t,n)};var t,n},pe.constant=Ta,pe.countBy=Jr,pe.create=function(e,t){return e=ye(e),null==t?e:Te(e,t)},pe.curry=function e(t,n,r){n=Pn(t,8,Va,Va,Va,Va,Va,n=r?Va:n);return n.placeholder=e.placeholder,n},pe.curryRight=function e(t,n,r){n=Pn(t,16,Va,Va,Va,Va,Va,n=r?Va:n);return n.placeholder=e.placeholder,n},pe.debounce=co,pe.defaults=ra,pe.defaultsDeep=oa,pe.defer=so,pe.delay=fo,pe.difference=vr,pe.differenceBy=br,pe.differenceWith=Sr,pe.drop=function(e,t,n){var r=null==e?0:e.length;return r?At(e,(t=n||t===Va?1:Jo(t))<0?0:t,r):[]},pe.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?At(e,0,(t=r-(t=n||t===Va?1:Jo(t)))<0?0:t):[]},pe.dropRightWhile=function(e,t){return e&&e.length?Ut(e,Wn(t,3),!0,!0):[]},pe.dropWhile=function(e,t){return e&&e.length?Ut(e,Wn(t,3),!0):[]},pe.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Gn(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=Jo(n))<0&&(n=o<-n?0:o+n),(r=r===Va||o<r?o:Jo(r))<0&&(r+=o),r=r<n?0:$o(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},pe.filter=function(e,t){return(ko(e)?Ou:ze)(e,Wn(t,3))},pe.flatMap=function(e,t){return qe(to(e,t),1)},pe.flatMapDeep=function(e,t){return qe(to(e,t),1/0)},pe.flatMapDepth=function(e,t,n){return n=n===Va?1:Jo(n),qe(to(e,t),n)},pe.flatten=kr,pe.flattenDeep=function(e){return(null==e?0:e.length)?qe(e,1/0):[]},pe.flattenDepth=function(e,t){return(null==e?0:e.length)?qe(e,t=t===Va?1:Jo(t)):[]},pe.flip=function(e){return Pn(e,512)},pe.flow=Na,pe.flowRight=w,pe.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},pe.functions=function(e){return null==e?[]:Ge(e,sa(e))},pe.functionsIn=function(e){return null==e?[]:Ge(e,fa(e))},pe.groupBy=Qr,pe.initial=function(e){return(null==e?0:e.length)?At(e,0,-1):[]},pe.intersection=Or,pe.intersectionBy=Cr,pe.intersectionWith=xr,pe.invert=ua,pe.invertBy=la,pe.invokeMap=Xr,pe.iteratee=Da,pe.keyBy=eo,pe.keys=sa,pe.keysIn=fa,pe.map=to,pe.mapKeys=function(e,r){var o={};return r=Wn(r,3),$e(e,function(e,t,n){Ne(o,r(e,t,n),e)}),o},pe.mapValues=function(e,r){var o={};return r=Wn(r,3),$e(e,function(e,t,n){Ne(o,t,r(e,t,n))}),o},pe.matches=function(e){return yt(Le(e,1))},pe.matchesProperty=function(e,t){return ht(e,Le(t,1))},pe.memoize=po,pe.merge=da,pe.mergeWith=pa,pe.method=n,pe.methodOf=t,pe.mixin=La,pe.negate=yo,pe.nthArg=function(t){return t=Jo(t),Et(function(e){return gt(e,t)})},pe.omit=ya,pe.omitBy=function(e,t){return ma(e,yo(Wn(t)))},pe.once=function(e){return io(2,e)},pe.orderBy=function(e,t,n,r){return null==e?[]:vt(e,t=!ko(t)?null==t?[]:[t]:t,n=!ko(n=r?Va:n)?null==n?[]:[n]:n)},pe.over=E,pe.overArgs=ho,pe.overEvery=se,pe.overSome=D,pe.partial=mo,pe.partialRight=go,pe.partition=no,pe.pick=ha,pe.pickBy=ma,pe.property=Ba,pe.propertyOf=function(t){return function(e){return null==t?Va:Ze(t,e)}},pe.pull=jr,pe.pullAll=Rr,pe.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?St(e,t,Wn(n,2)):e},pe.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?St(e,t,Va,n):e},pe.pullAt=Ar,pe.range=Z,pe.rangeRight=X,pe.rearg=vo,pe.reject=function(e,t){return(ko(e)?Ou:ze)(e,yo(Wn(t,3)))},pe.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],a=e.length;for(t=Wn(t,3);++r<a;){var i=e[r];t(i,r,e)&&(n.push(i),o.push(r))}return _t(e,o),n},pe.rest=function(e,t){if("function"!=typeof e)throw new v(Ka);return Et(e,t=t===Va?t:Jo(t))},pe.reverse=Tr,pe.sampleSize=function(e,t,n){return t=(n?Gn(e,t,n):t===Va)?1:Jo(t),(ko(e)?Ce:Ct)(e,t)},pe.set=function(e,t,n){return null==e?e:xt(e,t,n)},pe.setWith=function(e,t,n,r){return r="function"==typeof r?r:Va,null==e?e:xt(e,t,n,r)},pe.shuffle=function(e){return(ko(e)?xe:Rt)(e)},pe.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n=n&&"number"!=typeof n&&Gn(e,t,n)?(t=0,r):(t=null==t?0:Jo(t),n===Va?r:Jo(n)),At(e,t,n)):[]},pe.sortBy=ro,pe.sortedUniq=function(e){return e&&e.length?Dt(e):[]},pe.sortedUniqBy=function(e,t){return e&&e.length?Dt(e,Wn(t,2)):[]},pe.split=function(e,t,n){return n&&"number"!=typeof n&&Gn(e,t,n)&&(t=n=Va),(n=n===Va?Ya:n>>>0)?(e=Zo(e))&&("string"==typeof t||null!=t&&!Bo(t))&&!(t=It(t))&&Qu(e)?Yt(ol(e),0,n):e.split(t,n):[]},pe.spread=function(n,r){if("function"!=typeof n)throw new v(Ka);return r=null==r?0:q(Jo(r),0),Et(function(e){var t=e[r],e=Yt(e,0,r);return t&&ju(e,t),Su(n,this,e)})},pe.tail=function(e){var t=null==e?0:e.length;return t?At(e,1,t):[]},pe.take=function(e,t,n){return e&&e.length?At(e,0,(t=n||t===Va?1:Jo(t))<0?0:t):[]},pe.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?At(e,(t=r-(t=n||t===Va?1:Jo(t)))<0?0:t,r):[]},pe.takeRightWhile=function(e,t){return e&&e.length?Ut(e,Wn(t,3),!1,!0):[]},pe.takeWhile=function(e,t){return e&&e.length?Ut(e,Wn(t,3)):[]},pe.tap=function(e,t){return t(e),e},pe.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new v(Ka);return No(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),co(e,t,{leading:r,maxWait:t,trailing:o})},pe.thru=qr,pe.toArray=qo,pe.toPairs=ga,pe.toPairsIn=va,pe.toPath=function(e){return ko(e)?Pu(e,hr):Uo(e)?[e]:rn(yr(Zo(e)))},pe.toPlainObject=Go,pe.transform=function(e,r,o){var t,n=ko(e),a=n||xo(e)||Vo(e);return r=Wn(r,4),null==o&&(t=e&&e.constructor,o=a?n?new t:[]:No(e)&&Ro(t)?ye(x(e)):{}),(a?wu:$e)(e,function(e,t,n){return r(o,e,t,n)}),o},pe.unary=function(e){return ao(e,1)},pe.union=Nr,pe.unionBy=Mr,pe.unionWith=Dr,pe.uniq=function(e){return e&&e.length?Bt(e):[]},pe.uniqBy=function(e,t){return e&&e.length?Bt(e,Wn(t,2)):[]},pe.uniqWith=function(e,t){return t="function"==typeof t?t:Va,e&&e.length?Bt(e,Va,t):[]},pe.unset=function(e,t){return null==e||Wt(e,t)},pe.unzip=Lr,pe.unzipWith=Ir,pe.update=function(e,t,n){return null==e?e:Ft(e,t,Ht(n))},pe.updateWith=function(e,t,n,r){return r="function"==typeof r?r:Va,null==e?e:Ft(e,t,Ht(n),r)},pe.values=ba,pe.valuesIn=function(e){return null==e?[]:qu(e,fa(e))},pe.without=Br,pe.words=Ra,pe.wrap=function(e,t){return mo(Ht(t),e)},pe.xor=Wr,pe.xorBy=Fr,pe.xorWith=Ur,pe.zip=Vr,pe.zipObject=function(e,t){return zt(e||[],t||[],je)},pe.zipObjectDeep=function(e,t){return zt(e||[],t||[],xt)},pe.zipWith=Kr,pe.entries=ga,pe.entriesIn=va,pe.extend=Xo,pe.extendWith=ea,La(pe,pe),pe.add=te,pe.attempt=Aa,pe.camelCase=Sa,pe.capitalize=_a,pe.ceil=i,pe.clamp=function(e,t,n){return n===Va&&(n=t,t=Va),n!==Va&&(n=(n=Yo(n))==n?n:0),t!==Va&&(t=(t=Yo(t))==t?t:0),De(Yo(e),t,n)},pe.clone=function(e){return Le(e,4)},pe.cloneDeep=function(e){return Le(e,5)},pe.cloneDeepWith=function(e,t){return Le(e,5,t="function"==typeof t?t:Va)},pe.cloneWith=function(e,t){return Le(e,4,t="function"==typeof t?t:Va)},pe.conformsTo=function(e,t){return null==t||Ie(e,t,sa(t))},pe.deburr=wa,pe.defaultTo=function(e,t){return null==e||e!=e?t:e},pe.divide=I,pe.endsWith=function(e,t,n){e=Zo(e),t=It(t);var r=e.length,r=n=n===Va?r:De(Jo(n),0,r);return 0<=(n-=t.length)&&e.slice(n,r)==t},pe.eq=bo,pe.escape=function(e){return(e=Zo(e))&&Ri.test(e)?e.replace(Pi,Gu):e},pe.escapeRegExp=function(e){return(e=Zo(e))&&Bi.test(e)?e.replace(Ii,"\\$&"):e},pe.every=function(e,t,n){return(ko(e)?Eu:Ve)(e,Wn(t=n&&Gn(e,t,n)?Va:t,3))},pe.find=$r,pe.findIndex=_r,pe.findKey=function(e,t){return Nu(e,Wn(t,3),$e)},pe.findLast=Yr,pe.findLastIndex=wr,pe.findLastKey=function(e,t){return Nu(e,Wn(t,3),Ye)},pe.floor=jt,pe.forEach=Gr,pe.forEachRight=Zr,pe.forIn=function(e,t){return null==e?e:He(e,Wn(t,3),fa)},pe.forInRight=function(e,t){return null==e?e:Je(e,Wn(t,3),fa)},pe.forOwn=function(e,t){return e&&$e(e,Wn(t,3))},pe.forOwnRight=function(e,t){return e&&Ye(e,Wn(t,3))},pe.get=aa,pe.gt=So,pe.gte=_o,pe.has=function(e,t){return null!=e&&Hn(e,t,tt)},pe.hasIn=ia,pe.head=Er,pe.identity=Ma,pe.includes=function(e,t,n,r){return e=Oo(e)?e:ba(e),n=n&&!r?Jo(n):0,r=e.length,n<0&&(n=q(r+n,0)),Fo(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<Du(e,t,n)},pe.indexOf=function(e,t,n){var r=null==e?0:e.length;return r?(n=null==n?0:Jo(n),Du(e,t,n=n<0?q(r+n,0):n)):-1},pe.inRange=function(e,t,n){return t=Ho(t),n===Va?(n=t,t=0):n=Ho(n),(e=e=Yo(e))>=H(t=t,n=n)&&e<q(t,n)},pe.invoke=ca,pe.isArguments=wo,pe.isArray=ko,pe.isArrayBuffer=Eo,pe.isArrayLike=Oo,pe.isArrayLikeObject=Co,pe.isBoolean=function(e){return!0===e||!1===e||Mo(e)&&Xe(e)==Xa},pe.isBuffer=xo,pe.isDate=Po,pe.isElement=function(e){return Mo(e)&&1===e.nodeType&&!Io(e)},pe.isEmpty=function(e){if(null==e)return!0;if(Oo(e)&&(ko(e)||"string"==typeof e||"function"==typeof e.splice||xo(e)||Vo(e)||wo(e)))return!e.length;var t,n=qn(e);if(n==oi||n==ci)return!e.size;if(er(e))return!st(e).length;for(t in e)if(b.call(e,t))return!1;return!0},pe.isEqual=function(e,t){return it(e,t)},pe.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:Va)?n(e,t):Va;return r===Va?it(e,t,Va,n):!!r},pe.isError=jo,pe.isFinite=function(e){return"number"==typeof e&&V(e)},pe.isFunction=Ro,pe.isInteger=Ao,pe.isLength=To,pe.isMap=Do,pe.isMatch=function(e,t){return e===t||ut(e,t,Un(t))},pe.isMatchWith=function(e,t,n){return n="function"==typeof n?n:Va,ut(e,t,Un(t),n)},pe.isNaN=function(e){return Lo(e)&&e!=+e},pe.isNative=function(e){if(Xn(e))throw new f("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return lt(e)},pe.isNil=function(e){return null==e},pe.isNull=function(e){return null===e},pe.isNumber=Lo,pe.isObject=No,pe.isObjectLike=Mo,pe.isPlainObject=Io,pe.isRegExp=Bo,pe.isSafeInteger=function(e){return Ao(e)&&-Ja<=e&&e<=Ja},pe.isSet=Wo,pe.isString=Fo,pe.isSymbol=Uo,pe.isTypedArray=Vo,pe.isUndefined=function(e){return e===Va},pe.isWeakMap=function(e){return Mo(e)&&qn(e)==di},pe.isWeakSet=function(e){return Mo(e)&&"[object WeakSet]"==Xe(e)},pe.join=function(e,t){return null==e?"":K.call(e,t)},pe.kebabCase=ka,pe.last=Pr,pe.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==Va&&(o=(o=Jo(n))<0?q(r+o,0):H(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Mu(e,Iu,o,!0)},pe.lowerCase=Ea,pe.lowerFirst=Oa,pe.lt=Ko,pe.lte=zo,pe.max=function(e){return e&&e.length?Ke(e,Ma,et):Va},pe.maxBy=function(e,t){return e&&e.length?Ke(e,Wn(t,2),et):Va},pe.mean=function(e){return Bu(e,Ma)},pe.meanBy=function(e,t){return Bu(e,Wn(t,2))},pe.min=function(e){return e&&e.length?Ke(e,Ma,dt):Va},pe.minBy=function(e,t){return e&&e.length?Ke(e,Wn(t,2),dt):Va},pe.stubArray=Wa,pe.stubFalse=Fa,pe.stubObject=function(){return{}},pe.stubString=function(){return""},pe.stubTrue=function(){return!0},pe.multiply=L,pe.nth=function(e,t){return e&&e.length?gt(e,Jo(t)):Va},pe.noConflict=function(){return du._===this&&(du._=S),this},pe.noop=Ia,pe.now=oo,pe.pad=function(e,t,n){e=Zo(e);var r=(t=Jo(t))?rl(e):0;return!t||t<=r?e:Sn(W(r=(t-r)/2),n)+e+Sn(B(r),n)},pe.padEnd=function(e,t,n){e=Zo(e);var r=(t=Jo(t))?rl(e):0;return t&&r<t?e+Sn(t-r,n):e},pe.padStart=function(e,t,n){e=Zo(e);var r=(t=Jo(t))?rl(e):0;return t&&r<t?Sn(t-r,n)+e:e},pe.parseInt=function(e,t,n){return t=n||null==t?0:t&&+t,$(Zo(e).replace(Wi,""),t||0)},pe.random=function(e,t,n){var r;if(n&&"boolean"!=typeof n&&Gn(e,t,n)&&(t=n=Va),n===Va&&("boolean"==typeof t?(n=t,t=Va):"boolean"==typeof e&&(n=e,e=Va)),e===Va&&t===Va?(e=0,t=1):(e=Ho(e),t===Va?(t=e,e=0):t=Ho(t)),t<e&&(r=e,e=t,t=r),n||e%1||t%1){n=Y();return H(e+n*(t-e+su("1e-"+((n+"").length-1))),t)}return wt(e,t)},pe.reduce=function(e,t,n){var r=ko(e)?Ru:Fu,o=arguments.length<3;return r(e,Wn(t,4),n,o,Fe)},pe.reduceRight=function(e,t,n){var r=ko(e)?Au:Fu,o=arguments.length<3;return r(e,Wn(t,4),n,o,Ue)},pe.repeat=function(e,t,n){return t=(n?Gn(e,t,n):t===Va)?1:Jo(t),kt(Zo(e),t)},pe.replace=function(){var e=arguments,t=Zo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pe.result=function(e,t,n){var r=-1,o=(t=Jt(t,e)).length;for(o||(o=1,e=Va);++r<o;){var a=null==e?Va:e[hr(t[r])];a===Va&&(r=o,a=n),e=Ro(a)?a.call(e):a}return e},pe.round=$t,pe.runInContext=e,pe.sample=function(e){return(ko(e)?Oe:Ot)(e)},pe.size=function(e){if(null==e)return 0;if(Oo(e))return Fo(e)?rl(e):e.length;var t=qn(e);return t==oi||t==ci?e.size:st(e).length},pe.snakeCase=Ca,pe.some=function(e,t,n){return(ko(e)?Tu:Tt)(e,Wn(t=n&&Gn(e,t,n)?Va:t,3))},pe.sortedIndex=function(e,t){return Nt(e,t)},pe.sortedIndexBy=function(e,t,n){return Mt(e,t,Wn(n,2))},pe.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Nt(e,t);if(r<n&&bo(e[r],t))return r}return-1},pe.sortedLastIndex=function(e,t){return Nt(e,t,!0)},pe.sortedLastIndexBy=function(e,t,n){return Mt(e,t,Wn(n,2),!0)},pe.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Nt(e,t,!0)-1;if(bo(e[n],t))return n}return-1},pe.startCase=xa,pe.startsWith=function(e,t,n){return e=Zo(e),n=null==n?0:De(Jo(n),0,e.length),t=It(t),e.slice(n,n+t.length)==t},pe.subtract=U,pe.sum=function(e){return e&&e.length?Uu(e,Ma):0},pe.sumBy=function(e,t){return e&&e.length?Uu(e,Wn(t,2)):0},pe.template=function(i,e,t){var n=pe.templateSettings;t&&Gn(i,e,t)&&(e=Va),i=Zo(i),e=ea({},e,n,jn);var u,l,r=sa(n=ea({},e.imports,n.imports,jn)),o=qu(n,r),c=0,n=e.interpolate||eu,s="__p += '",n=p((e.escape||eu).source+"|"+n.source+"|"+(n===Ni?Hi:eu).source+"|"+(e.evaluate||eu).source+"|$","g"),a="//# sourceURL="+(b.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uu+"]")+"\n";if(i.replace(n,function(e,t,n,r,o,a){return n=n||r,s+=i.slice(c,a).replace(tu,Zu),t&&(u=!0,s+="' +\n__e("+t+") +\n'"),o&&(l=!0,s+="';\n"+o+";\n__p += '"),n&&(s+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=a+e.length,e}),s+="';\n",e=b.call(e,"variable")&&e.variable){if(zi.test(e))throw new f("Invalid `variable` option passed into `_.template`")}else s="with (obj) {\n"+s+"\n}\n";if(s=(l?s.replace(Ei,""):s).replace(Oi,"$1").replace(Ci,"$1;"),s="function("+(e||"obj")+") {\n"+(e?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}",(e=Aa(function(){return d(r,a+"return "+s).apply(Va,o)})).source=s,jo(e))throw e;return e},pe.times=function(e,t){if((e=Jo(e))<1||Ja<e)return[];var n=Ya,r=H(e,Ya);for(t=Wn(t),e-=Ya,r=Vu(r,t);++n<e;)t(n);return r},pe.toFinite=Ho,pe.toInteger=Jo,pe.toLength=$o,pe.toLower=function(e){return Zo(e).toLowerCase()},pe.toNumber=Yo,pe.toSafeInteger=function(e){return e?De(Jo(e),-Ja,Ja):0===e?e:0},pe.toString=Zo,pe.toUpper=function(e){return Zo(e).toUpperCase()},pe.trim=function(e,t,n){return(e=Zo(e))&&(n||t===Va)?Ku(e):e&&(t=It(t))?(e=ol(e),t=ol(t),Yt(e,Ju(e,t),$u(e,t)+1).join("")):e},pe.trimEnd=function(e,t,n){return(e=Zo(e))&&(n||t===Va)?e.slice(0,al(e)+1):e&&(t=It(t))?Yt(e=ol(e),0,$u(e,ol(t))+1).join(""):e},pe.trimStart=function(e,t,n){return(e=Zo(e))&&(n||t===Va)?e.replace(Wi,""):e&&(t=It(t))?Yt(e=ol(e),Ju(e,ol(t))).join(""):e},pe.truncate=function(e,t){var n,r=30,o="...";No(t)&&(n="separator"in t?t.separator:n,r="length"in t?Jo(t.length):r,o="omission"in t?It(t.omission):o);var a,t=(e=Zo(e)).length;if((t=Qu(e)?(a=ol(e)).length:t)<=r)return e;if((t=r-rl(o))<1)return o;if(r=a?Yt(a,0,t).join(""):e.slice(0,t),n===Va)return r+o;if(a&&(t+=r.length-t),Bo(n)){if(e.slice(t).search(n)){var i,u=r;for((n=!n.global?p(n.source,Zo(Ji.exec(n))+"g"):n).lastIndex=0;i=n.exec(u);)var l=i.index;r=r.slice(0,l===Va?t:l)}}else e.indexOf(It(n),t)==t||-1<(t=r.lastIndexOf(n))&&(r=r.slice(0,t));return r+o},pe.unescape=function(e){return(e=Zo(e))&&ji.test(e)?e.replace(xi,il):e},pe.uniqueId=function(e){var t=++l;return Zo(e)+t},pe.upperCase=Pa,pe.upperFirst=ja,pe.each=Gr,pe.eachRight=Zr,pe.first=Er,La(pe,(Ua={},$e(pe,function(e,t){b.call(pe.prototype,t)||(Ua[t]=e)}),Ua),{chain:!1}),pe.VERSION="4.17.21",wu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){pe[e].placeholder=pe}),wu(["drop","take"],function(n,r){ve.prototype[n]=function(e){e=e===Va?1:q(Jo(e),0);var t=this.__filtered__&&!r?new ve(this):this.clone();return t.__filtered__?t.__takeCount__=H(e,t.__takeCount__):t.__views__.push({size:H(e,Ya),type:n+(t.__dir__<0?"Right":"")}),t},ve.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),wu(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;ve.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Wn(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),wu(["head","last"],function(e,t){var n="take"+(t?"Right":"");ve.prototype[e]=function(){return this[n](1).value()[0]}}),wu(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");ve.prototype[e]=function(){return this.__filtered__?new ve(this):this[n](1)}}),ve.prototype.compact=function(){return this.filter(Ma)},ve.prototype.find=function(e){return this.filter(e).head()},ve.prototype.findLast=function(e){return this.reverse().find(e)},ve.prototype.invokeMap=Et(function(t,n){return"function"==typeof t?new ve(this):this.map(function(e){return ot(e,t,n)})}),ve.prototype.reject=function(e){return this.filter(yo(Wn(e)))},ve.prototype.slice=function(e,t){e=Jo(e);var n=this;return n.__filtered__&&(0<e||t<0)?new ve(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),n=t!==Va?(t=Jo(t))<0?n.dropRight(-t):n.take(t-e):n)},ve.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ve.prototype.toArray=function(){return this.take(Ya)},$e(ve.prototype,function(c,e){var s=/^(?:filter|find|map|reject)|While$/.test(e),f=/^(?:head|last)$/.test(e),d=pe[f?"take"+("last"==e?"Right":""):e],p=f||/^find/.test(e);d&&(pe.prototype[e]=function(){function e(e){return e=d.apply(pe,ju([e],n)),f&&i?e[0]:e}var t=this.__wrapped__,n=f?[1]:arguments,r=t instanceof ve,o=n[0],a=r||ko(t);a&&s&&"function"==typeof o&&1!=o.length&&(r=a=!1);var i=this.__chain__,u=!!this.__actions__.length,o=p&&!i,u=r&&!u;if(p||!a)return o&&u?c.apply(this,n):(l=this.thru(e),o?f?l.value()[0]:l.value():l);var t=u?t:new ve(this),l=c.apply(t,n);return l.__actions__.push({func:qr,args:[e],thisArg:Va}),new ge(l,i)})}),wu(["pop","push","shift","sort","splice","unshift"],function(e){var n=a[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);pe.prototype[e]=function(){var t=arguments;if(!o||this.__chain__)return this[r](function(e){return n.apply(ko(e)?e:[],t)});var e=this.value();return n.apply(ko(e)?e:[],t)}}),$e(ve.prototype,function(e,t){var n,r=pe[t];r&&(n=r.name+"",b.call(oe,n)||(oe[n]=[]),oe[n].push({name:t,func:r}))}),oe[mn(Va,2).name]=[{name:"wrapper",func:Va}],ve.prototype.clone=function(){var e=new ve(this.__wrapped__);return e.__actions__=rn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rn(this.__views__),e},ve.prototype.reverse=function(){var e;return this.__filtered__?((e=new ve(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},ve.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ko(e),r=t<0,o=n?e.length:0,a=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var a=n[r],i=a.size;switch(a.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=H(t,e+i);break;case"takeRight":e=q(e,t-i)}}return{start:e,end:t}}(0,o,this.__views__),i=a.start,u=(a=a.end)-i,l=r?a:i-1,c=this.__iteratees__,s=c.length,f=0,d=H(u,this.__takeCount__);if(!n||!r&&o==u&&d==u)return Vt(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var y=-1,h=e[l+=t];++y<s;){var m=c[y],g=m.iteratee,m=m.type,g=g(h);if(2==m)h=g;else if(!g){if(1==m)continue e;break e}}p[f++]=h}return p},pe.prototype.at=Hr,pe.prototype.chain=function(){return zr(this)},pe.prototype.commit=function(){return new ge(this.value(),this.__chain__)},pe.prototype.next=function(){this.__values__===Va&&(this.__values__=qo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?Va:this.__values__[this.__index__++]}},pe.prototype.plant=function(e){for(var t,n=this;n instanceof me;){var r=gr(n);r.__index__=0,r.__values__=Va,t?o.__wrapped__=r:t=r;var o=r,n=n.__wrapped__}return o.__wrapped__=e,t},pe.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof ve){e=e;return(e=(e=this.__actions__.length?new ve(this):e).reverse()).__actions__.push({func:qr,args:[Tr],thisArg:Va}),new ge(e,this.__chain__)}return this.thru(Tr)},pe.prototype.toJSON=pe.prototype.valueOf=pe.prototype.value=function(){return Vt(this.__wrapped__,this.__actions__)},pe.prototype.first=pe.prototype.head,T&&(pe.prototype[T]=function(){return this}),pe}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(du._=ul,define(function(){return ul})):C?((C.exports=ul)._=ul,i._=ul):du._=ul}.call(this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);function a(e,t){return t=t||0,[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]]].join("")}n.default=a,t.exports=n.default},{}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return i.default}});var r=u(e("./v1.js")),o=u(e("./v3.js")),a=u(e("./v4.js")),i=u(e("./v5.js"));function u(e){return e&&e.__esModule?e:{default:e}}},{"./v1.js":29,"./v3.js":30,"./v4.js":32,"./v5.js":33}],26:[function(e,t,n){"use strict";function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function u(e,t,n,r,o,a){return f((a=f(f(t,e),f(r,a)))<<(o=o)|a>>>32-o,n)}function d(e,t,n,r,o,a,i){return u(t&n|~t&r,e,t,o,a,i)}function p(e,t,n,r,o,a,i){return u(t&r|n&~r,e,t,o,a,i)}function y(e,t,n,r,o,a,i){return u(t^n^r,e,t,o,a,i)}function h(e,t,n,r,o,a,i){return u(n^(t|~r),e,t,o,a,i)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function r(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Array(t.length);for(var n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}return function(e){var t,n,r=[],o=32*e.length,a="0123456789abcdef";for(t=0;t<o;t+=8)n=e[t>>5]>>>t%32&255,n=parseInt(a.charAt(n>>>4&15)+a.charAt(15&n),16),r.push(n);return r}(function(e,t){var n,r,o,a,i;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var u=1732584193,l=-271733879,c=-1732584194,s=271733878;for(n=0;n<e.length;n+=16)u=d(r=u,o=l,a=c,i=s,e[n],7,-680876936),s=d(s,u,l,c,e[n+1],12,-389564586),c=d(c,s,u,l,e[n+2],17,606105819),l=d(l,c,s,u,e[n+3],22,-1044525330),u=d(u,l,c,s,e[n+4],7,-176418897),s=d(s,u,l,c,e[n+5],12,1200080426),c=d(c,s,u,l,e[n+6],17,-1473231341),l=d(l,c,s,u,e[n+7],22,-45705983),u=d(u,l,c,s,e[n+8],7,1770035416),s=d(s,u,l,c,e[n+9],12,-1958414417),c=d(c,s,u,l,e[n+10],17,-42063),l=d(l,c,s,u,e[n+11],22,-1990404162),u=d(u,l,c,s,e[n+12],7,1804603682),s=d(s,u,l,c,e[n+13],12,-40341101),c=d(c,s,u,l,e[n+14],17,-1502002290),l=d(l,c,s,u,e[n+15],22,1236535329),u=p(u,l,c,s,e[n+1],5,-165796510),s=p(s,u,l,c,e[n+6],9,-1069501632),c=p(c,s,u,l,e[n+11],14,643717713),l=p(l,c,s,u,e[n],20,-373897302),u=p(u,l,c,s,e[n+5],5,-701558691),s=p(s,u,l,c,e[n+10],9,38016083),c=p(c,s,u,l,e[n+15],14,-660478335),l=p(l,c,s,u,e[n+4],20,-405537848),u=p(u,l,c,s,e[n+9],5,568446438),s=p(s,u,l,c,e[n+14],9,-1019803690),c=p(c,s,u,l,e[n+3],14,-187363961),l=p(l,c,s,u,e[n+8],20,1163531501),u=p(u,l,c,s,e[n+13],5,-1444681467),s=p(s,u,l,c,e[n+2],9,-51403784),c=p(c,s,u,l,e[n+7],14,1735328473),l=p(l,c,s,u,e[n+12],20,-1926607734),u=y(u,l,c,s,e[n+5],4,-378558),s=y(s,u,l,c,e[n+8],11,-2022574463),c=y(c,s,u,l,e[n+11],16,1839030562),l=y(l,c,s,u,e[n+14],23,-35309556),u=y(u,l,c,s,e[n+1],4,-1530992060),s=y(s,u,l,c,e[n+4],11,1272893353),c=y(c,s,u,l,e[n+7],16,-155497632),l=y(l,c,s,u,e[n+10],23,-1094730640),u=y(u,l,c,s,e[n+13],4,681279174),s=y(s,u,l,c,e[n],11,-358537222),c=y(c,s,u,l,e[n+3],16,-722521979),l=y(l,c,s,u,e[n+6],23,76029189),u=y(u,l,c,s,e[n+9],4,-640364487),s=y(s,u,l,c,e[n+12],11,-421815835),c=y(c,s,u,l,e[n+15],16,530742520),l=y(l,c,s,u,e[n+2],23,-995338651),u=h(u,l,c,s,e[n],6,-198630844),s=h(s,u,l,c,e[n+7],10,1126891415),c=h(c,s,u,l,e[n+14],15,-1416354905),l=h(l,c,s,u,e[n+5],21,-57434055),u=h(u,l,c,s,e[n+12],6,1700485571),s=h(s,u,l,c,e[n+3],10,-1894986606),c=h(c,s,u,l,e[n+10],15,-1051523),l=h(l,c,s,u,e[n+1],21,-2054922799),u=h(u,l,c,s,e[n+8],6,1873313359),s=h(s,u,l,c,e[n+15],10,-30611744),c=h(c,s,u,l,e[n+6],15,-1560198380),l=h(l,c,s,u,e[n+13],21,1309151649),u=h(u,l,c,s,e[n+4],6,-145523070),s=h(s,u,l,c,e[n+11],10,-1120210379),c=h(c,s,u,l,e[n+2],15,718787259),l=h(l,c,s,u,e[n+9],21,-343485551),u=f(u,r),l=f(l,o),c=f(c,a),s=f(s,i);return[u,l,c,s]}(function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e[t/8])<<t%32;return n}(e),8*e.length))}n.default=r,t.exports=n.default},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(r)return r(o);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")};var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);t.exports=n.default},{}],28:[function(e,t,n){"use strict";function g(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function r(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=new Array(r.length);for(var o=0;o<r.length;o++)e[o]=r.charCodeAt(o)}e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),u=new Array(i),o=0;o<i;o++){u[o]=new Array(16);for(var l=0;l<16;l++)u[o][l]=e[64*o+4*l]<<24|e[64*o+4*l+1]<<16|e[64*o+4*l+2]<<8|e[64*o+4*l+3]}for(u[i-1][14]=8*(e.length-1)/Math.pow(2,32),u[i-1][14]=Math.floor(u[i-1][14]),u[i-1][15]=8*(e.length-1)&4294967295,o=0;o<i;o++){for(var c=new Array(80),s=0;s<16;s++)c[s]=u[o][s];for(s=16;s<80;s++)c[s]=g(c[s-3]^c[s-8]^c[s-14]^c[s-16],1);for(var f=n[0],d=n[1],p=n[2],y=n[3],h=n[4],s=0;s<80;s++)var m=Math.floor(s/20),m=g(f,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}(m,d,p,y)+h+t[m]+c[s]>>>0,h=y,y=p,p=g(d,30)>>>0,d=f,f=m;n[0]=n[0]+f>>>0,n[1]=n[1]+d>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+h>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}n.default=r,t.exports=n.default},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,f,d=r(e("./rng.js")),p=r(e("./bytesToUuid.js"));function r(e){return e&&e.__esModule?e:{default:e}}var y=0,h=0;e=function(e,t,n){var r=t&&n||0,o=t||[],a=(e=e||{}).node||s,i=void 0!==e.clockseq?e.clockseq:f;null!=a&&null!=i||(l=e.random||(e.rng||d.default)(),null==a&&(a=s=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==i&&(i=f=16383&(l[6]<<8|l[7])));var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),n=void 0!==e.nsecs?e.nsecs:h+1,l=u-y+(n-h)/1e4;if(l<0&&void 0===e.clockseq&&(i=i+1&16383),1e4<=(n=(l<0||y<u)&&void 0===e.nsecs?0:n))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=u,f=i,n=(1e4*(268435455&(u+=122192928e5))+(h=n))%4294967296,o[r++]=n>>>24&255,o[r++]=n>>>16&255,o[r++]=n>>>8&255,o[r++]=255&n,u=u/4294967296*1e4&268435455,o[r++]=u>>>8&255,o[r++]=255&u,o[r++]=u>>>24&15|16,o[r++]=u>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var c=0;c<6;++c)o[r+c]=a[c];return t||(0,p.default)(o)};n.default=e,t.exports=n.default},{"./bytesToUuid.js":24,"./rng.js":27}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./v35.js")),e=o(e("./md5.js"));function o(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v3",48,e.default);n.default=e,t.exports=n.default},{"./md5.js":26,"./v35.js":31}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,l,c){function t(e,t,n,r){var o,a=n&&r||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof t&&(o=[],t.replace(/[a-fA-F0-9]{2}/g,function(e){o.push(parseInt(e,16))}),t=o),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(t)||16!==t.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var i=c(t.concat(e));if(i[6]=15&i[6]|l,i[8]=63&i[8]|128,n)for(var u=0;u<16;++u)n[a+u]=i[u];return n||(0,s.default)(i)}try{t.name=e}catch(e){}return t.DNS=o,t.URL=a,t},n.URL=n.DNS=void 0;var r,s=(r=e("./bytesToUuid.js"))&&r.__esModule?r:{default:r};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=a},{"./bytesToUuid.js":24}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("./rng.js")),u=r(e("./bytesToUuid.js"));function r(e){return e&&e.__esModule?e:{default:e}}e=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[r+a]=o[a];return t||(0,u.default)(o)};n.default=e,t.exports=n.default},{"./bytesToUuid.js":24,"./rng.js":27}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./v35.js")),e=o(e("./sha1.js"));function o(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v5",80,e.default);n.default=e,t.exports=n.default},{"./sha1.js":28,"./v35.js":31}]},{},[17]);