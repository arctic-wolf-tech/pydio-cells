!function o(n,a,i){function l(t,e){if(!a[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(s)return s(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=a[t]={exports:{}},n[t][0].call(r.exports,function(e){return l(n[t][1][e]||e)},r,r.exports,o,n,a,i)}return a[t].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("pydio")),l=o(e("pydio/http/api"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"deleteAction",value:function(e,t){var r,o=t&&t.length?t[0]:pydio.getUserSelection(),t=o.getUniqueNode();switch(t.getMetadata().get("ajxp_mime")){case"user_editable":r="settings.34";break;case"group":r="settings.126"}var n,a=function(){};t.getParent()&&(n=t.getParent(),a=function(){n.reload(null,!0)});pydio.UI.openConfirmDialog({message:MessageHash[r],validCallback:function(){var r=o.getSelectedNodes();(function t(){var e;r.length&&(e=r.shift(),l.default.getRestClient().getIdmApi().deleteIdmUser(e.getMetadata().get("IdmUser")).then(function(){a(),t()}).catch(function(e){i.default.getInstance().UI.displayMessage("ERROR",e.message),t()}))})()}})}},{key:"applyDND",value:function(e,t){t.getStep()===PydioComponents.DNDActionParameter.STEP_CAN_DROP?AdminComponents.DNDActionsManager.canDropNodeOnNode(t.getSource(),t.getTarget()):t.getStep()===PydioComponents.DNDActionParameter.STEP_END_DRAG&&AdminComponents.DNDActionsManager.dropNodeOnNode(t.getSource(),t.getTarget())}},{key:"bulkMoveAction",value:function(e,t){var r=i.default.getInstance(),o=t[0].getSelectedNodes();r.UI.openComponentInModal("AdminPeople","TreeGroupsDialog",{pydio:r,dataModel:r.getContextHolder(),submitValue:function(e,r){(function e(){var t;o.length&&(t=o.shift(),AdminComponents.DNDActionsManager.dropNodeOnNode(t,r),e())})()}})}}],(r=null)&&n(t.prototype,r),o&&n(t,o),e}();r.default=e,t.exports=r.default},{pydio:"pydio","pydio/http/api":"pydio/http/api"}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var g=f(e("react")),o=f(e("create-react-class")),n=f(e("prop-types")),b=e("material-ui"),l=f(e("../editor/Editor")),a=f(e("pydio/model/data-model")),i=e("material-ui/styles"),v=f(e("./UsersSearchBox")),s=f(e("pydio/model/node")),u=f(e("./Callbacks")),c=f(e("pydio")),d=e("../editor/util/ClassLoader");function f(e){return e&&e.__esModule?e:{default:e}}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function p(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function P(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}var y=c.default.requireLib("boot").JobsStore,n=(0,o.default)({displayName:"Dashboard",mixins:[AdminComponents.MessagesConsumerMixin],propTypes:{dataModel:n.default.instanceOf(a.default).isRequired,rootNode:n.default.instanceOf(s.default).isRequired,currentNode:n.default.instanceOf(s.default).isRequired,accessByName:n.default.func.isRequired,openEditor:n.default.func.isRequired},getInitialState:function(){var e=this.props;return{searchResultData:!1,currentNode:e.currentNode,dataModel:e.dataModel,showAnon:!1}},componentDidMount:function(){var r=this,e=y.getInstance();this._jStoreObserver=function(t){t&&0===t.indexOf("delete-group-")&&e.getJobs().then(function(e){try{"Finished"===e.get(t).Tasks[0].Status&&r.reloadList()}catch(e){}})},e.observe("tasks_updated",this._jStoreObserver)},componentWillUnmounnt:function(){y.getInstance().stopObserving("tasks_updated",this._jStoreObserver)},componentWillReceiveProps:function(e){!this.state.searchResultData&&e.currentNode&&0===e.currentNode.getPath().indexOf("/idm/users")&&this.setState({currentNode:e.currentNode,dataModel:e.dataModel})},reloadList:function(){this.refs.mainlist&&this.refs.mainlist.reload()},renderListUserAvatar:function(e){var t=e.getMetadata().get("IdmUser"),r=this.props.pydio;if(t.Attributes&&t.Attributes.avatar){t=r.Parameters.get("ENDPOINT_REST_API")+"/frontend/binaries/USER/"+t.Login+"?"+t.Attributes.avatar+"&dim=33";return g.default.createElement("div",{style:{width:33,height:33,backgroundImage:"url("+t+")",backgroundSize:"cover",borderRadius:"50%",backgroundPosition:"center",margin:16}})}e=e.isLeaf()?"mdi mdi-account":"mdi mdi-folder";return g.default.createElement(b.FontIcon,{className:e,style:{backgroundColor:"#9e9e9e",color:"white",borderRadius:"50%",margin:16,width:33,height:33,fontSize:18,padding:6,textAlign:"center"}})},renderListEntryFirstLine:function(e){var t=e.getMetadata().get("IdmUser"),r=t.Attributes?t.Attributes.profile:"",o=[],n={display:"inline-block",marginLeft:5,fontSize:14};return"shared"===r?o.push(g.default.createElement("span",{className:"mdi mdi-share-variant",style:P(P({},n),{},{color:"#009688"}),title:this.context.getMessage("user.13")})):"admin"===r&&o.push(g.default.createElement("span",{className:"mdi mdi-security",style:P(P({},n),{},{color:"#03a9f4"})})),t.Attributes&&t.Attributes.locks&&-1<t.Attributes.locks.indexOf("logout")&&o.push(g.default.createElement("span",{className:"mdi mdi-lock",style:P(P({},n),{},{color:"#E53934"})})),g.default.createElement("span",null,e.getLabel()," ",o)},renderListEntrySecondLine:function(e){var t=e.getMetadata().get("IdmUser");if(e.isLeaf()){if("/idm/users"===e.getPath())return this.context.getMessage("user.8");var r=[];r.push(t.Login);var o=t.Attributes||{};o.profile&&r.push("Profile "+o.profile),o.last_connection_readable&&r.push(this.context.getMessage("user.9")+" "+o.last_connection_readable);t=t.Roles;return t&&t.length&&r.push(this.context.getMessage("user.11").replace("%i",t.length)),r.join(" - ")}return this.context.getMessage("user.12")+": "+e.getPath().replace("/idm/users","")},renderListEntrySelector:function(e){return"/idm/users"!==e.getPath()&&e.isLeaf()},displaySearchResults:function(e,t){this.setState({searchResultTerm:e,searchResultData:{term:e,toggleState:this.hideSearchResults},currentNode:t.getContextNode(),dataModel:t})},hideSearchResults:function(){this.setState({searchResultData:!1,currentNode:this.props.currentNode,dataModel:this.props.dataModel})},createUserAction:function(){pydio.UI.openComponentInModal("AdminPeople","Forms.CreateUserForm",{dataModel:this.props.dataModel,openRoleEditor:this.openRoleEditor.bind(this)})},createGroupAction:function(){pydio.UI.openComponentInModal("AdminPeople","Forms.CreateRoleOrGroupForm",{type:"group",openRoleEditor:this.openRoleEditor.bind(this)})},openUsersImporter:function(){pydio.UI.openComponentInModal("EnterprisePeople","UsersImportDialog",{dataModel:this.props.dataModel})},openRoleEditor:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"activity",o=this.props,n=o.pydio,a=o.rolesEditorClass,o=o.rolesEditorProps;if(this.refs.editor&&this.refs.editor.isDirty()&&!window.confirm(n.MessageHash["role_editor.19"]))return!1;var i=P({ref:"editor",node:e,pydio:n,initialEditSection:r,onRequestTabClose:this.closeRoleEditor,afterSave:function(){t.reloadList()}},o);(0,d.loadEditorClass)(a,l.default).then(function(e){t.props.openRightPane({COMPONENT:e,PROPS:i})}).catch(function(e){console.log(e)})},closeRoleEditor:function(){if(this.refs.editor&&this.refs.editor.isDirty()&&!window.confirm(this.props.pydio.MessageHash["role_editor.19"]))return!1;this.props.closeRightPane()},deleteAction:function(e){var t=new a.default;t.setSelectedNodes([e]),u.default.deleteAction(null,[t])},renderNodeActions:function(t){var r=this,e=t.getAjxpMime();if(t.getMetadata().has("IdmUser")&&!t.getMetadata().get("IdmUser").PoliciesContextEditable)return g.default.createElement("div",null);var o={color:"rgba(0,0,0,0.3)",fontSize:20},n=[];return"user_editable"===e||"group"===e?(n.push(g.default.createElement(b.IconButton,{key:"edit",iconClassName:"mdi mdi-pencil",onClick:function(e){e.stopPropagation(),r.openRoleEditor(t)},iconStyle:o})),n.push(g.default.createElement(b.IconButton,{key:"delete",iconClassName:"mdi mdi-delete",onClick:function(e){e.stopPropagation(),r.deleteAction(t)},iconStyle:o}))):"user"===e&&(n.push(g.default.createElement(b.IconButton,{key:"edit",iconClassName:"mdi mdi-pencil",onClick:function(e){e.stopPropagation(),r.openRoleEditor(t)},iconStyle:o})),n.push(g.default.createElement(b.IconButton,{key:"delete",iconClassName:"mdi mdi-delete",disabled:!0,iconStyle:{color:"rgba(0,0,0,0.15)",fontSize:20},onClick:function(e){e.stopPropagation()}}))),g.default.createElement("div",null,n)},filterNodes:function(e){if(!e.getMetadata().has("IdmUser"))return!0;var t=this.state,r=t.showAnon;return!(!t.displaySearchResult&&!r)||"anon"!==(e.getMetadata().get("IdmUser").Attributes||{}).profile},applyFilter:function(e){var t,r=this;"toggle-anon"!==e?((t=this.props.currentNode).getMetadata().set("userProfileFilter",e),t.getMetadata().delete("paginationData"),this.setState({currentNode:t},function(){r.reloadList()})):this.setState({showAnon:!this.state.showAnon})},render:function(){var r=this,e=this.props,t=e.accessByName,o=e.muiTheme,n=e.rootNode,a=e.pydio,i=AdminComponents.AdminStyles(o.palette),l=this.state,s=l.searchResultData,u=l.currentNode,c=l.dataModel,d=l.showAnon,f=g.default.createElement(v.default,{displayResults:this.displaySearchResults,displayResultsState:s,hideResults:this.hideSearchResults,limit:50,textLabel:this.context.getMessage("user.7"),className:"media-small-hide"}),p=[],y=function(){return[]},m=null,h=[];t("Create")&&(y=this.renderNodeActions.bind(this),h=[a.Controller.getActionByName("move"),a.Controller.getActionByName("delete")],m=this.openRoleEditor.bind(this),p=[g.default.createElement(b.FlatButton,O({primary:!0,label:this.context.getMessage("user.1"),onClick:this.createUserAction},i.props.header.flatButton)),g.default.createElement(b.FlatButton,O({primary:!0,label:this.context.getMessage("user.2"),onClick:this.createGroupAction},i.props.header.flatButton))]);e="",l=""===(e=u.getMetadata().has("userProfileFilter")?u.getMetadata().get("userProfileFilter"):e)?"rgba(0,0,0,0.4)":o.palette.accent1Color,t=g.default.createElement(b.IconMenu,{iconButtonElement:g.default.createElement(b.IconButton,{style:{marginRight:-16,marginLeft:8},iconStyle:{color:l},iconClassName:"mdi mdi-filter-variant",tooltip:this.context.getMessage("user.filter.tooltip"),tooltipPosition:"bottom-left"}),anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},value:e,onChange:function(e,t){r.applyFilter(t)},desktop:!0},g.default.createElement(b.MenuItem,{value:"",primaryText:this.context.getMessage("user.filter.all")}),g.default.createElement(b.MenuItem,{value:"!shared",primaryText:this.context.getMessage("user.filter.internal")}),g.default.createElement(b.MenuItem,{value:"shared",primaryText:this.context.getMessage("user.filter.shared")}),g.default.createElement(b.MenuItem,{value:"admin",primaryText:this.context.getMessage("user.filter.admins")}),g.default.createElement(b.Divider,null),g.default.createElement(b.MenuItem,{value:"toggle-anon",primaryText:this.context.getMessage("user.filter.anon"),secondaryText:d?g.default.createElement(b.FontIcon,{className:"mdi mdi-check"}):null})),i=AdminComponents.AdminStyles().body,o=i.block.props,l=i.block.container,e=P(P({height:48,lineHeight:"48px",fontSize:12,fontWeight:500},i.block.header),{},{borderBottom:"1px solid "+i.tableMaster.row.borderBottomColor,padding:"0 20px"}),d={width:226,borderRight:"1px solid"+i.tableMaster.row.borderBottomColor,overflowY:"auto",flex:"none"};return!1!==s&&(d=P(P({},d),{},{opacity:.6})),g.default.createElement("div",{className:"main-layout-nav-to-stack vertical-layout people-dashboard"},g.default.createElement(AdminComponents.Header,{title:this.context.getMessage("2","settings"),icon:"mdi mdi-account-multiple",actions:p,centerContent:f}),g.default.createElement(b.Paper,O({},o,{style:l,className:"horizontal-layout layout-fill"}),g.default.createElement("div",{className:"hide-on-vertical-layout vertical-layout tab-vertical-layout",style:d},g.default.createElement("div",{style:{flex:1}},g.default.createElement("div",{style:e},this.context.getMessage("user.3")),g.default.createElement(PydioComponents.DNDTreeView,{showRoot:!0,rootLabel:this.context.getMessage("user.5"),node:n,dataModel:this.props.dataModel,className:"users-groups-tree",paddingOffset:10,noPaginator:!0}))),g.default.createElement("div",{zDepth:0,className:"layout-fill vertical-layout people-list"},g.default.createElement(PydioComponents.SimpleList,{ref:"mainlist",pydio:a,node:u,dataModel:c,clearSelectionOnReload:!1,openEditor:m,entryRenderIcon:this.renderListUserAvatar.bind(this),entryRenderFirstLine:this.renderListEntryFirstLine.bind(this),entryRenderSecondLine:this.renderListEntrySecondLine.bind(this),entryEnableSelector:this.renderListEntrySelector.bind(this),entryRenderActions:y,searchResultData:s,elementHeight:PydioComponents.SimpleList.HEIGHT_TWO_LINES,hideToolbar:!1,toolbarStyle:{backgroundColor:i.block.header.backgroundColor,height:48,borderBottom:e.borderBottom},multipleActions:h,additionalActions:t,filterNodes:this.filterNodes.bind(this)}))))}});r.default=n,r.default=n=(0,i.muiThemeable)()(n),t.exports=r.default},{"../editor/Editor":12,"../editor/util/ClassLoader":44,"./Callbacks":1,"./UsersSearchBox":5,"create-react-class":"create-react-class","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node",react:"react"}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=h(e("prop-types")),n=h(e("pydio")),p=h(e("react")),a=h(e("create-react-class")),i=h(e("pydio/model/data-model")),l=h(e("pydio/model/node")),s=h(e("pydio/http/resources-manager")),y=e("material-ui"),u=e("cells-sdk"),c=h(e("pydio/http/api")),d=e("material-ui/styles"),f=e("uuid"),m=h(e("../policies/Policy"));function h(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function b(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function v(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}var O=n.default.requireLib("components").MaterialTable,P=["acl","rest","oidc"],o=(0,a.default)({displayName:"PoliciesBoard",mixins:[AdminComponents.MessagesConsumerMixin],propTypes:{dataModel:o.default.instanceOf(i.default).isRequired,rootNode:o.default.instanceOf(l.default).isRequired,currentNode:o.default.instanceOf(l.default).isRequired,openEditor:o.default.func.isRequired,openRightPane:o.default.func.isRequired,closeRightPane:o.default.func.isRequired,readonly:o.default.bool},componentWillMount:function(){this.listPolicies()},getInitialState:function(){return{policies:{},popoverOpen:!1,anchorEl:null}},groupByResourcesGroups:function(t){var o=[],n=new RegExp("-ro$|-rw$|-wo$");return P.map(function(r){var e=t.PolicyGroups.filter(function(e){var t=e.ResourceGroup||"rest";return!e.Uuid.match(n)&&t===r});e.length&&(e.sort(function(e,t){return e.Name.toLowerCase()<t.Name.toLowerCase()?-1:e.Name.toLowerCase()===t.Name.toLowerCase()?0:1}),o[r]=e)}),o},listPolicies:function(){var t=this;this.setState({loading:!0});var e=new u.PolicyServiceApi(c.default.getRestClient());n.default.startLoading(),e.listPolicies(new u.IdmListPolicyGroupsRequest).then(function(e){n.default.endLoading();e=t.groupByResourcesGroups(e);t.setState({policies:e,loading:!1})}).catch(function(e){n.default.endLoading(),t.setState({error:e,loading:!1})})},savePolicy:function(t,e){var r=this;e?this.listPolicies():s.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterprisePolicyServiceApi(c.default.getRestClient()).putPolicy(t).then(function(){r.listPolicies()}).catch(function(e){r.setState({error:e})})})},deletePolicy:function(t){var r=this,e=this.props.pydio;e.UI.openConfirmDialog({message:e.MessageHash["ajxp_admin.policies.policy.delete.confirm"],destructive:[t.Name],validCallback:function(){s.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterprisePolicyServiceApi(c.default.getRestClient()).deletePolicy(t.Uuid).then(function(){r.listPolicies()}).catch(function(e){r.setState({error:e})})})}})},createPolicy:function(e){var t=this.refs,r=t.newPolicyName,o=t.newPolicyDescription,n=this.state.newPolicyType,t=(0,f.v4)(),r={Uuid:t,Name:r.getValue(),Description:o.getValue(),ResourceGroup:n,Policies:[]},o=v({},this.state.policies);o[n]||(o[n]=[]),o[n].push(r),this.setState({policies:o,popoverOpen:!1,newPolicyId:t,selectedPolicy:t})},openPopover:function(e){var t=this;e.preventDefault(),this.setState({newPolicyType:"acl",popoverOpen:!0,anchorEl:e.currentTarget},function(){setTimeout(function(){t.refs.newPolicyName.focus()},200)})},handleRequestClose:function(){this.setState({popoverOpen:!1})},handleChangePolicyType:function(e,t,r){this.setState({newPolicyType:r})},selectRows:function(e){var t;e.length&&(t=e[0],e=this.state.selectedPolicy,this.setState({selectedPolicy:e===t.Uuid?null:t.Uuid}))},render:function(){function n(e){return o.MessageHash["ajxp_admin.policies."+e]||e}var a=this,e=this.props,t=e.muiTheme,r=e.currentNode,o=e.pydio,e=e.accessByName,i=(i=this.props.readonly)||!e("Create"),e=this.state,l=e.policies,s=e.selectedPolicy,u=e.newPolicyId,c=AdminComponents.AdminStyles(t.palette),d=[{name:"Name",label:n("policy.name"),style:{fontSize:15},sorter:{type:"string",default:!0}},{name:"Rules",label:n("policy.rules"),style:{width:80,textAlign:"center"},headerStyle:{width:80,textAlign:"center"},renderCell:function(e){return e.Policies.length},sorter:{type:"number"}},{name:"Description",label:n("policy.description"),sorter:{type:"string"}}],f=[];i?f.push({iconClassName:"mdi mdi-eye",tooltip:n("policy.display"),onClick:function(e){return a.setState({selectedPolicy:s===e.Uuid?null:e.Uuid})}}):(f.push({iconClassName:"mdi mdi-pencil",tooltip:n("policy.edit"),onClick:function(e){return a.setState({selectedPolicy:s===e.Uuid?null:e.Uuid})}}),f.push({iconClassName:"mdi mdi-delete",tooltip:n("policy.delete"),onClick:function(e){a.deletePolicy(e)}}));e=Object.keys(l).map(function(e){if(i&&"acl"===e)return null;var t=l[e].map(function(e){return e.Uuid===s?v(v({},e),{},{expandedRow:p.default.createElement(m.default,g({},a.props,{readonly:i,key:e.Name,policy:e,savePolicy:a.savePolicy.bind(a),deletePolicy:a.deletePolicy.bind(a),newPolicyWithRule:u===e.Uuid?e.Name:null}))}):e}),r=n("type."+e+".title"),o=n("type."+e+".legend");return p.default.createElement("div",null,p.default.createElement(AdminComponents.SubHeader,{title:r,legend:o}),p.default.createElement(y.Paper,g({},c.body.block.props,{style:c.body.block.container}),p.default.createElement(O,{data:t,columns:d,actions:f,onSelectRows:function(e){return a.selectRows(e)},deselectOnClickAway:!0,showCheckboxes:!1,masterStyles:c.body.tableMaster,storageKey:"console.policies."+e+".list"})))}),t=p.default.createElement("div",null,p.default.createElement(y.FlatButton,g({},c.props.header.flatButton,{primary:!0,onClick:this.openPopover.bind(this),label:n("policy.new")})),p.default.createElement(y.Popover,{open:this.state.popoverOpen,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},onRequestClose:this.handleRequestClose.bind(this)},p.default.createElement("div",null,p.default.createElement("div",{style:{padding:"0 12px"}},p.default.createElement(y.TextField,{floatingLabelText:n("policy.name"),ref:"newPolicyName"}),p.default.createElement("br",null),p.default.createElement(y.TextField,{floatingLabelText:n("policy.description"),ref:"newPolicyDescription"}),p.default.createElement("br",null),p.default.createElement(y.SelectField,{floatingLabelText:n("policy.type"),ref:"newPolicyType",value:this.state.newPolicyType||"rest",onChange:this.handleChangePolicyType.bind(this)},P.map(function(e){return p.default.createElement(y.MenuItem,{value:e,primaryText:n("type."+e+".title")})}))),p.default.createElement(y.Divider,null),p.default.createElement("div",{style:{textAlign:"right",padding:"6px 12px"}},p.default.createElement(y.FlatButton,{label:o.MessageHash[54],onClick:this.handleRequestClose.bind(this)}),p.default.createElement(y.FlatButton,{label:n("policy.create"),onClick:this.createPolicy.bind(this)})))));return p.default.createElement("div",{className:"vertical-layout",style:{height:"100%"}},p.default.createElement(AdminComponents.Header,{title:r.getLabel(),icon:r.getMetadata().get("icon_class"),actions:i?null:t,reloadAction:this.listPolicies.bind(this),loading:this.state.loading}),p.default.createElement("div",{className:"layout-fill"},e))}});r.default=o,r.default=o=(0,d.muiThemeable)()(o),t.exports=r.default},{"../policies/Policy":50,"cells-sdk":"cells-sdk","create-react-class":"create-react-class","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node",react:"react",uuid:53}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=i(e("react")),o=i(e("create-react-class")),f=e("material-ui"),l=i(e("../editor/Editor")),n=i(e("pydio/http/api")),a=i(e("pydio")),s=e("../editor/util/ClassLoader");function i(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function u(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function c(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}var e=e("material-ui/styles").muiThemeable,y=a.default.requireLib("components").MaterialTable,m=a.default.requireLib("hoc").ModernTextField,o=(0,o.default)({displayName:"RolesDashboard",mixins:[AdminComponents.MessagesConsumerMixin],getInitialState:function(){return{roles:[],loading:!1,showTechnical:!1}},load:function(){var t=this,e=this.state.showTechnical;this.setState({loading:!0}),a.default.startLoading(),n.default.getRestClient().getIdmApi().listRoles(e,0,-1).then(function(e){a.default.endLoading(),t.setState({roles:e,loading:!1})}).catch(function(e){a.default.endLoading(),t.setState({loading:!1})})},componentDidMount:function(){this.load()},openTableRows:function(e){e.length&&e[0].role.PoliciesContextEditable&&this.openRoleEditor(e[0].role)},openRoleEditor:function(t){var r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"activity",e=this.props,n=e.pydio,a=e.rolesEditorClass,i=e.rolesEditorProps;return!(this.refs.editor&&this.refs.editor.isDirty()&&!window.confirm(n.MessageHash["role_editor.19"]))&&((0,s.loadEditorClass)(a,l.default).then(function(e){r.props.openRightPane({COMPONENT:e,PROPS:c({ref:"editor",idmRole:t,pydio:n,initialEditSection:o,onRequestTabClose:r.closeRoleEditor},i)})}).catch(function(e){console.log(e)}),!0)},closeRoleEditor:function(){return!(this.refs.editor&&this.refs.editor.isDirty()&&!window.confirm(this.props.pydio.MessageHash["role_editor.19"]))&&(this.props.closeRightPane(),!0)},deleteAction:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,o=this.props.pydio;o.UI.openConfirmDialog({message:o.MessageHash["settings.126"],destructive:[r||e],validCallback:function(){n.default.getRestClient().getIdmApi().deleteRole(e).then(function(){t.load()})}})},createRoleAction:function(){var e=this;pydio.UI.openComponentInModal("AdminPeople","Forms.CreateRoleOrGroupForm",{type:"role",roleNode:this.state.currentNode,openRoleEditor:this.openRoleEditor.bind(this),roles:this.state.roles,reload:function(){e.load()}})},computeTableData:function(r){var e=this.state.roles,o=[];return e.map(function(e){var t=e.Label;r&&-1===t.toLowerCase().indexOf(r.toLowerCase())||o.push({role:e,roleId:e.Uuid,roleLabel:t,isDefault:e.AutoApplies.join(", ")||"-",lastUpdated:e.LastUpdated})}),o},render:function(){var r=this,e=this.props,t=e.muiTheme,o=e.accessByName,n=AdminComponents.AdminStyles(t.palette),a=this.state,i=a.searchRoleString,l=a.showTechnical,s=o("Create"),u=null,c=[];s&&(c.push(d.default.createElement(f.FlatButton,p({},n.props.header.flatButton,{primary:!0,label:this.context.getMessage("user.6"),onClick:this.createRoleAction.bind(this)}))),u=this.openTableRows.bind(this)),c.push(d.default.createElement(f.IconMenu,{iconButtonElement:d.default.createElement(f.IconButton,p({iconClassName:"mdi mdi-filter-variant"},n.props.header.iconButton)),anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},onChange:function(){r.setState({showTechnical:!l},function(){r.load()})}},d.default.createElement(f.MenuItem,{primaryText:this.context.getMessage("dashboard.technical.show","role_editor"),value:"show",rightIcon:l?d.default.createElement(f.FontIcon,{className:"mdi mdi-check"}):null}),d.default.createElement(f.MenuItem,{primaryText:this.context.getMessage("dashboard.technical.hide","role_editor"),value:"hide",rightIcon:l?null:d.default.createElement(f.FontIcon,{className:"mdi mdi-check"})})));e=d.default.createElement("div",{style:{display:"flex"}},d.default.createElement("div",{style:{flex:1}}),d.default.createElement("div",{style:{width:190}},d.default.createElement(m,{fullWidth:!0,hintText:this.context.getMessage("47","role_editor")+"...",value:i||"",onChange:function(e,t){return r.setState({searchRoleString:t})}}))),t=[{name:"roleLabel",label:this.context.getMessage("32","role_editor"),style:{width:"35%",fontSize:15},headerStyle:{width:"35%"},sorter:{type:"string",default:!0}},{name:"lastUpdated",useMoment:!0,label:this.context.getMessage("last_update","role_editor"),hideSmall:!0,sorter:{type:"number"}},{name:"isDefault",label:this.context.getMessage("114","settings"),style:{width:"20%"},headerStyle:{width:"20%"},hideSmall:!0,sorter:{type:"string"}}],a=[];s&&(a.push({iconClassName:"mdi mdi-pencil",tooltip:"Edit",onClick:function(e){r.openRoleEditor(e.role)},disable:function(e){return!e.role.PoliciesContextEditable}}),a.push({iconClassName:"mdi mdi-delete",tooltip:"Delete",onClick:function(e){r.deleteAction(e.role.Uuid,e.role.Label)},disable:function(e){return!e.role.PoliciesContextEditable}}));o=this.computeTableData(i),n=AdminComponents.AdminStyles().body,s=n.tableMaster,i=n.block.props,n=n.block.container;return d.default.createElement("div",{className:"main-layout-nav-to-stack vertical-layout"},d.default.createElement(AdminComponents.Header,{title:this.context.getMessage("69","settings"),icon:"mdi mdi-account-multiple",actions:c,centerContent:e,reloadAction:function(){r.load()},loading:this.state.loading}),d.default.createElement("div",{className:"layout-fill"},d.default.createElement(AdminComponents.SubHeader,{legend:this.context.getMessage("dashboard.description","role_editor")}),d.default.createElement(f.Paper,p({},i,{style:n}),d.default.createElement(y,{data:o,columns:t,actions:a,onSelectRows:u,deselectOnClickAway:!0,showCheckboxes:!1,masterStyles:s,paginate:[10,25,50,100],storageKey:"console.roles.list"}))))}});r.default=o,r.default=o=e()(o),t.exports=r.default},{"../editor/Editor":12,"../editor/util/ClassLoader":44,"create-react-class":"create-react-class","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react"}],5:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=f(e("prop-types")),a=f(e("pydio")),i=f(e("react")),l=(e("material-ui"),f(e("lodash.debounce"))),s=f(e("pydio/http/api")),u=f(e("pydio/model/data-model")),c=f(e("pydio/model/node")),d=f(e("pydio/util/lang"));function f(e){return e&&e.__esModule?e:{default:e}}function p(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function y(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function m(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=b(r);return e=o?(e=b(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=a.default.requireLib("hoc").ModernTextField,a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,i["default"].Component);var e,t,r,o=g(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=o.call(this,e),r=new u.default;return r.setRootNode(new c.default),t.state={dataModel:r,displayResult:e.displayResultsState,crtValue:""},t.searchDebounced=(0,l.default)(t.triggerSearch,350),t}return e=n,(t=[{key:"displayResultsState",value:function(){this.setState({displayResult:!0})}},{key:"hideResultsState",value:function(){this.setState({displayResult:!1}),this.props.hideResults()}},{key:"triggerSearch",value:function(){var r=this,o=this.state.crtValue;if(o){var n=this.state.dataModel,e=this.props.limit||100;n.getRootNode().setChildren([]);var t=s.default.getRestClient().getIdmApi().listGroups("/",o,!0,0,e),e=s.default.getRestClient().getIdmApi().listUsers("/",o,!0,0,e);Promise.all([t,e]).then(function(e){var t=e[0],e=e[1];t.Groups.map(function(e){var t=e.Attributes&&e.Attributes.displayName?e.Attributes.displayName:e.GroupLabel,t=new c.default("/idm/users"+d.default.trimRight(e.GroupPath,"/")+"/"+e.GroupLabel,!1,t);t.getMetadata().set("IdmUser",e),t.getMetadata().set("ajxp_mime","group"),n.getRootNode().addChild(t)}),e.Users.map(function(e){var t=e.Attributes&&e.Attributes.displayName?e.Attributes.displayName:e.Login,t=new c.default("/idm/users"+e.Login,!0,t);t.getMetadata().set("IdmUser",e),t.getMetadata().set("ajxp_mime","user_editable"),n.getRootNode().addChild(t)}),n.getRootNode().setLoaded(!0),r.displayResultsState(),r.props.displayResults(o,n)})}else{this.hideResultsState();try{this.refs.query.refs.input.blur()}catch(e){}}}},{key:"keyDown",value:function(e){"Enter"===e.key?(e.preventDefault(),this.triggerSearch()):this.searchDebounced()}},{key:"render",value:function(){var r=this,e=this.state.crtValue;return i.default.createElement("div",{className:this.props.className||"",style:y({display:"flex",alignItems:"center"},this.props.style)},i.default.createElement("div",{style:{flex:1}}),i.default.createElement("div",{style:{maxWidth:190}},i.default.createElement("form",{autoComplete:"off"},i.default.createElement(v,{ref:"query",onKeyDown:this.keyDown.bind(this),hintText:this.props.textLabel,fullWidth:!0,value:e,onChange:function(e,t){r.setState({crtValue:t})}}))))}}])&&m(e.prototype,t),r&&m(e,r),n}();(r.default=a).PropTypes={textLabel:o.default.string,displayResults:o.default.func,hideResults:o.default.func,displayResultsState:o.default.bool,limit:o.default.number,style:o.default.object},t.exports=r.default},{"lodash.debounce":"lodash.debounce","material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react"}],6:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(e("react")),l=a(e("pydio/util/lang")),s=e("cells-sdk"),u=a(e("./WorkspaceAcl"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=i(r);return e=o?(e=i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,o["default"].Component);var e,t,r,a=f(i);function i(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);function e(e){return t.pydio.MessageHash["pydio_role."+e]||e}var r=a.call(this,t),o=[],n=new s.IdmWorkspace;return n.UUID="homepage",n.Label=e("workspace.statics.home.title"),n.Description=e("workspace.statics.home.description"),n.Slug="homepage",n.RootNodes={"homepage-ROOT":s.TreeNode.constructFromObject({Uuid:"homepage-ROOT"})},o.push(n),t.showSettings&&((n=new s.IdmWorkspace).UUID="settings",n.Label=e("workspace.statics.settings.title"),n.Description=e("workspace.statics.settings.description"),n.Slug="settings",n.RootNodes={"settings-ROOT":s.TreeNode.constructFromObject({Uuid:"settings-ROOT"})},o.push(n)),o.sort(l.default.arraySorter("Label",!1,!0)),r.state={workspaces:o},r}return e=i,(t=[{key:"render",value:function(){var t=this.props.role,e=this.state.workspaces;return t?o.default.createElement("div",{style:{backgroundColor:"white"},className:"material-list"},e.map(function(e){return o.default.createElement(u.default,{workspace:e,role:t})})):o.default.createElement("div",null)}}])&&c(e.prototype,t),r&&c(e,r),i}();r.default=e,t.exports=r.default},{"./WorkspaceAcl":9,"cells-sdk":"cells-sdk","pydio/util/lang":"pydio/util/lang",react:"react"}],7:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("react"))&&o.__esModule?o:{default:o},l=e("material-ui"),a=e("../util/MessagesMixin");function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(r);return e=o?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,i["default"].Component);var e,t,r,o=c(n);function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=o.call(this,e)).state={acl:e.acl},t}return e=n,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({acl:e.acl})}},{key:"getAcl",value:function(){return this.state.acl}},{key:"updateAcl",value:function(){var e,t,r,o;this.props.disabled||(t=!(e=this.refs.deny.isChecked())&&this.refs.read.isChecked(),r=!e&&this.refs.write.isChecked(),o=[],e?o.push("deny"):(t&&o.push("read"),r&&o.push("write")),o=o.join(","),this.props.onChange&&this.props.onChange(o,this.props.acl),this.setState({acl:o}))}},{key:"handleChangePolicy",value:function(e,t){t="policy:"+t;this.props.onChange?this.props.onChange(t,this.props.acl):this.setState({acl:t})}},{key:"render",value:function(){var e=this.props,t=e.hideDeny,r=e.hideLabels,o=e.disabled,n=e.getMessage,a=this.state.acl||"";if(a.startsWith("policy:"))return i.default.createElement("div",{style:{display:"flex",alignItems:"center",width:132,height:40}},"Custom policy");e={width:44};return i.default.createElement("div",{style:{display:"flex",alignItems:"center",width:132,height:40}},i.default.createElement(l.Checkbox,{ref:"read",label:r?"":n("react.5a","ajxp_admin"),value:"read",onCheck:this.updateAcl.bind(this),disabled:o||-1<a.indexOf("deny"),checked:-1===a.indexOf("deny")&&-1!==a.indexOf("read"),style:e}),i.default.createElement(l.Checkbox,{ref:"write",label:r?"":n("react.5b","ajxp_admin"),value:"write",onCheck:this.updateAcl.bind(this),disabled:o||-1<a.indexOf("deny"),checked:-1===a.indexOf("deny")&&-1!==a.indexOf("write"),style:e}),!t&&i.default.createElement(l.Checkbox,{ref:"deny",label:r?"":n("react.5","ajxp_admin"),value:"-",disabled:o,onCheck:this.updateAcl.bind(this),checked:-1!==a.indexOf("deny"),style:e}))}}])&&s(e.prototype,t),r&&s(e,r),n}(),f=(0,a.withRoleMessages)(f);r.default=f,t.exports=r.default},{"../util/MessagesMixin":45,"material-ui":"material-ui",react:"react"}],8:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,a=(o=e("react"))&&o.__esModule?o:{default:o},i=e("../util/MessagesMixin");function l(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(r);return e=o?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,a["default"].Component);var e,t,r,o=u(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e,t=this.props.getMessage;switch(this.props.acl){case"read,write":e=t("8");break;case"read":e=t("9");break;case"write":e=t("10");break;case"PYDIO_VALUE_CLEAR":e=t("11");break;default:e=t("12")}return a.default.createElement("span",{className:"summary-rights summary"},e)}}])&&l(e.prototype,t),r&&l(e,r),n}(),d=(0,i.withRoleMessages)(d);r.default=d,t.exports=r.default},{"../util/MessagesMixin":45,react:"react"}],9:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=l(e("react")),o=e("../util/MessagesMixin"),i=l(e("./RightsSelector"));e("cells-sdk"),e("material-ui");function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(r);return e=o?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,a["default"].Component);var e,t,r,o=c(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o.apply(this,arguments)}return e=n,(t=[{key:"onAclChange",value:function(e,t){var r=this.props,o=r.role,r=r.workspace;o.updateAcl(r,null,e)}},{key:"render",value:function(){var e=this.props,t=e.workspace,r=e.role,o=e.getPydioRoleMessage;if(!t.RootNodes||!Object.keys(t.RootNodes).length)return a.default.createElement(PydioComponents.ListEntry,{className:"workspace-acl-entry",firstLine:a.default.createElement("span",{style:{textDecoration:"line-through",color:"#ef9a9a"}},t.Label+" ("+o("workspace.roots.invalid")+")")});e=r.getAclString(t),r=e.aclString,e=e.inherited,r=a.default.createElement(i.default,{acl:r,onChange:this.onAclChange.bind(this),hideLabels:!0}),o=t.Label+(e?" ("+o("38")+")":"");return a.default.createElement(PydioComponents.ListEntry,{className:(e?"workspace-acl-entry-inherited ":"")+"workspace-acl-entry",firstLine:o,actions:r})}}])&&s(e.prototype,t),r&&s(e,r),n}(),e=(0,o.withRoleMessages)(e);r.default=e,t.exports=r.default},{"../util/MessagesMixin":45,"./RightsSelector":7,"cells-sdk":"cells-sdk","material-ui":"material-ui",react:"react"}],10:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("react")),i=o(e("pydio/http/api")),l=o(e("pydio/util/lang")),s=e("cells-sdk"),u=o(e("./WorkspaceAcl")),c=o(e("pydio"));function o(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r);return e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=c.default.requireLib("components").MaterialTable,e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,a["default"].Component);var e,t,r,o=p(n);function n(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=o.call(this,e)).state={loading:!0,workspaces:[]};var r=new s.WorkspaceServiceApi(i.default.getRestClient()),e=new s.RestSearchWorkspaceRequest;return e.Queries=[s.IdmWorkspaceSingleQuery.constructFromObject({scope:"ADMIN"})],r.searchWorkspaces(e).then(function(e){e=e.Workspaces||[];e.sort(l.default.arraySorter("Label",!1,!0)),t.setState({workspaces:e,loading:!1})}).catch(function(e){t.setState({loading:!1})}),t}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.role,r=e.advancedAcl,o=this.state,n=o.workspaces,e=o.loading;if(!t)return a.default.createElement("div",null);o=[{name:"acl",label:"",style:{paddingLeft:0,paddingRight:0},renderCell:function(e){return a.default.createElement(u.default,{workspace:e,role:t,advancedAcl:r})}}];return a.default.createElement("div",{className:"material-list"},a.default.createElement(m,{data:n,columns:o,hideHeaders:!0,paginate:[10,25,50,100],defaultPageSize:25,showCheckboxes:!1,emptyStateString:e?c.default.getInstance().MessageHash["ajxp_admin.loading"]:""}))}}])&&d(e.prototype,t),r&&d(e,r),n}();r.default=e,t.exports=r.default},{"./WorkspaceAcl":9,"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/lang":"pydio/util/lang",react:"react"}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=l(e("./PagesAcls")),n=l(e("./RightsSelector")),a=l(e("./RightsSummary")),i=l(e("./WorkspaceAcl")),e=l(e("./WorkspacesAcls"));function l(e){return e&&e.__esModule?e:{default:e}}i={PagesAcls:o.default,RightsSelector:n.default,RightsSummary:a.default,WorkspacesAcls:e.default,WorkspaceAcl:i.default};r.default=i,t.exports=r.default},{"./PagesAcls":6,"./RightsSelector":7,"./RightsSummary":8,"./WorkspaceAcl":9,"./WorkspacesAcls":10}],12:[function(m,h,_){!function(y){!function(){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var e=o(m("prop-types")),t=o(m("pydio")),a=o(m("./model/Role")),i=o(m("./model/User")),g=o(m("./acl/WorkspacesAcls")),b=o(m("./acl/PagesAcls")),v=o(m("react")),l=o(m("pydio/util/path")),O=m("material-ui"),r=m("material-ui/styles"),P=o(m("./info/RoleInfo")),R=o(m("./info/UserInfo")),w=o(m("./info/GroupInfo")),E=o(m("./params/ParametersPanel"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(r);return e=o?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=AdminComponents,S=f.PaperEditorLayout,p=(f.PaperEditorNavEntry,f.PaperEditorNavHeader,f.PluginsLoader),M=f.AdminStyles,f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,v["default"].Component);var e,t,r,o=c(n);function n(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=o.call(this,e,t),e.node?r.state=r.nodeToState(e.node):e.idmRole&&(r.state={idmRole:e.idmRole,roleType:"role",currentPane:"info"},r.loadRoleData(!0)),p.getInstance(r.props.pydio).loadPlugins().then(function(e){r.setState({pluginsRegistry:e})}),r}return e=n,(t=[{key:"componentWillReceiveProps",value:function(e){var t=this,r=this.props,o=r.node,r=r.idmRole;e.node===o&&e.idmRole===r||(e.node?this.setState(this.nodeToState(e.node)):e.idmRole&&this.setState({idmRole:e.idmRole,roleType:"role",currentPane:"info"},function(){t.loadRoleData(!0)}))}},{key:"nodeToState",value:function(e){var t=this,r="group"===e.getAjxpMime()?"group":"user",o=e.getMetadata().get("IdmUser"),o=new i.default(o);return o.observe("update",function(){t.forceUpdate()}),o.load(),{observableUser:o,roleLabel:l.default.getBasename(e.getPath()),roleType:r,dirty:!1,currentPane:"info",localModalContent:{}}}},{key:"loadRoleData",value:function(e){var t=this;e&&this.setState({loadingMessage:this.getMessage("loading","ajxp_admin")});var e=this.state.idmRole,r=new a.default(e);r.load().then(function(){t.setState({loadingMessage:null,observableRole:r}),r.observe("update",function(){t.forceUpdate()})})}},{key:"getChildContext",value:function(){var r=this.context.pydio.MessageHash;return{messages:r,getMessage:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pydio_role";return r[t+(t?".":"")+e]||e},getPydioRoleMessage:function(e){return r["role_editor."+e]||e},getRootMessage:function(e){return r[e]||e}}}},{key:"getMessage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pydio_role";return this.getChildContext().getMessage(e,t)}},{key:"getPydioRoleMessage",value:function(e){return this.getChildContext().getMessage(e,"role_editor")}},{key:"getRootMessage",value:function(e){return this.getChildContext().getMessage(e,"")}},{key:"setSelectedPane",value:function(e){this.setState({currentPane:e})}},{key:"componentDidMount",value:function(){var e=this;this.loadRoleData(!0),this.props.registerCloseCallback&&this.props.registerCloseCallback(function(){if(e.state&&e.state.dirty&&!y.confirm(e.getPydioRoleMessage("19")))return!1})}},{key:"showModal",value:function(e){this.setState({modal:e})}},{key:"hideModal",value:function(){this.setState({modal:null})}},{key:"logAction",value:function(e){this.setState({snackbar:e,snackOpen:!0})}},{key:"hideSnackBar",value:function(){this.setState({snackOpen:!1})}},{key:"render",value:function(){var e,t=this,r=this.props,o=r.advancedAcl,n=r.pydio,a=r.muiTheme,i=this.state,l=i.observableRole,s=i.observableUser,u=i.pluginsRegistry,c=i.currentPane,d=i.modal,f="",p="",y=this.getMessage("24"),m=!1;"user"===this.state.roleType?(f=(h=s.getIdmUser()).Attributes&&h.Attributes.displayName?h.Attributes.displayName:h.Login,m="admin"===h.Attributes.profile,e=v.default.createElement(R.default,{user:s,pydio:n,pluginsRegistry:u})):"group"===this.state.roleType?(p=this.getMessage("26"),y=this.getMessage("27"),f=s.getIdmUser().GroupLabel,s.getIdmUser().Attributes&&s.getIdmUser().Attributes.displayName&&(f=s.getIdmUser().Attributes.displayName),e=v.default.createElement(w.default,{group:s,pydio:n,pluginsRegistry:u})):"role"===this.state.roleType&&(f=l?l.getIdmRole().Label:"...",p=this.getMessage("28"),y=this.getMessage("29"),m=!0,e=v.default.createElement(P.default,{role:l,pydio:n,pluginsRegistry:u}));var r=!0,i=function(){},h=function(){};s?(r=!s.isDirty(),i=function(){s.save().then(t.props.afterSave)},h=function(){s.revert()}):l&&(r=!l.isDirty(),i=function(){l.save(t.props.afterSave)},h=function(){l.revert()});u=[S.actionButton(this.getMessage("plugins.6","ajxp_admin"),"mdi mdi-undo",h,r),S.actionButton(this.getRootMessage("53"),"mdi mdi-content-save",i,r)],h=[{value:"info",label:y},{value:"workspaces",label:this.getMessage("35")},{value:"pages",label:this.getMessage("36")},{value:"params",label:this.getMessage("38")}],i=[],r=function(e){return c===e?"layout-fill":""},y=function(e){return c===e?{overflow:"auto"}:{height:0,overflow:"hidden"}};i.push(v.default.createElement("div",{key:"info",className:"avatar-provider "+r("info"),style:y("info")},p&&!this.state.loadingMessage?v.default.createElement("h3",{className:"paper-right-title"},p):null,e)),"workspaces"===c?i.push(v.default.createElement("div",{key:"workspaces",className:r("workspaces"),style:y("workspaces")},v.default.createElement("h3",{className:"paper-right-title"},this.getRootMessage("250"),v.default.createElement("div",{className:"section-legend"},this.getMessage("43")),v.default.createElement("div",{className:"read-write-header"},v.default.createElement("span",{className:"header-read"},this.getMessage("react.5a","ajxp_admin")),v.default.createElement("span",{className:"header-write"},this.getMessage("react.5b","ajxp_admin")),v.default.createElement("span",{className:"header-deny"},this.getMessage("react.5","ajxp_admin"))),v.default.createElement("br",null)),v.default.createElement(g.default,{key:"workspaces-list",role:s?s.getRole():l,roleType:this.state.roleType,advancedAcl:o,showModal:this.showModal.bind(this),hideModal:this.hideModal.bind(this)}))):"pages"===c?i.push(v.default.createElement("div",{key:"pages",className:r("pages"),style:y("pages")},v.default.createElement("h3",{className:"paper-right-title"},this.getMessage("44"),v.default.createElement("div",{className:"section-legend"},this.getMessage("45")),v.default.createElement("div",{className:"read-write-header"},v.default.createElement("span",{className:"header-read"},this.getMessage("react.5a","ajxp_admin")),v.default.createElement("span",{className:"header-write"},this.getMessage("react.5b","ajxp_admin")),v.default.createElement("span",{className:"header-deny"},this.getMessage("react.5","ajxp_admin"))),v.default.createElement("br",null)),v.default.createElement(b.default,{key:"pages-list",role:s?s.getRole():l,roleType:this.state.roleType,advancedAcl:o,showModal:this.showModal.bind(this),hideModal:this.hideModal.bind(this),showSettings:m,pydio:n}))):"params"===c&&i.push(v.default.createElement("div",{key:"params",className:r("params"),style:y("params")},v.default.createElement(E.default,{pydio:n,role:s?s.getRole():l,roleType:this.state.roleType})));n=null;return this.state.loadingMessage&&(n=v.default.createElement("div",{className:"loader-container layout-fill vertical-layout"},v.default.createElement("div",{className:"loader-message",style:{margin:"auto",color:"rgba(0,0,0,0.33)",fontWeight:"500",fontSize:16}},this.state.loadingMessage))),v.default.createElement(S,{title:f,titleLeftIcon:"mdi mdi-account",titleActionBar:u,closeAction:function(){t.props.onRequestTabClose()},contentFill:!0,leftNavItems:h,leftNavSelected:c,leftNavChange:function(e){t.setSelectedPane(e)},className:"edit-object-"+this.state.roleType},v.default.createElement(O.Snackbar,{message:this.state.snackbar||"",open:this.state.snackOpen,autoHideDuration:4e3,ref:"snack",action:"Dismiss",onRequestClose:this.hideSnackBar.bind(this)}),d,n,i,M(a.palette).formSimpleCss())}}])&&s(e.prototype,t),r&&s(e,r),n}();(_.default=f).contextTypes={pydio:e.default.instanceOf(t.default)},f.childContextTypes={messages:e.default.object,getMessage:e.default.func,getPydioRoleMessage:e.default.func,getRootMessage:e.default.func},f.propTypes={node:e.default.instanceOf(AjxpNode),closeEditor:e.default.func,registerCloseCallback:e.default.func},_.default=f=(0,r.muiThemeable)()(f),h.exports=_.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./acl/PagesAcls":32,"./acl/WorkspacesAcls":35,"./info/GroupInfo":36,"./info/RoleInfo":37,"./info/UserInfo":38,"./model/Role":39,"./model/User":40,"./params/ParametersPanel":42,"material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],13:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=s(e("react")),o=s(e("prop-types")),i=s(e("pydio")),l=s(e("../model/User"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r);return e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=i.default.requireLib("form").FormPanel,e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,a["default"].Component);var e,t,r,o=p(n);function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=o.call(this,e)).state={parameters:[]},AdminComponents.PluginsLoader.getInstance(e.pydio).formParameters('//global_param[contains(@scope,"group")]|//param[contains(@scope,"group")]').then(function(e){t.setState({parameters:e})}),t}return e=n,(t=[{key:"getPydioRoleMessage",value:function(e){return this.props.pydio.MessageHash["role_editor."+e]||e}},{key:"onParameterChange",value:function(t,e,r){var o=this.props.group,n=this.state.parameters.filter(function(e){return e.name===t}),a=o.getIdmUser(),o=o.getRole();"displayName"===t||"email"===t||"profile"===t?a.Attributes[t]=e:n.length&&n[0].aclKey&&o.setParameter(n[0].aclKey,e)}},{key:"render",value:function(){var e=this.props,t=e.group,r=(e.pydio,this.state.parameters);if(!r)return a.default.createElement("div",null,"Loading...");var o,n={};t&&(e=t.getIdmUser(),o=t.getRole(),t=e.GroupLabel,e.Attributes&&e.Attributes.displayName&&(t=e.Attributes.displayName),n={groupPath:LangUtils.trimRight(e.GroupPath,"/")+"/"+e.GroupLabel,displayName:t},r.map(function(e){e.aclKey&&o.getParameterValue(e.aclKey)&&(n[e.name]=o.getParameterValue(e.aclKey))}));r=[{name:"groupPath",label:this.getPydioRoleMessage("34"),type:"string",readonly:!0},{name:"displayName",label:this.getPydioRoleMessage("35"),type:"string"}].concat(u(r));return a.default.createElement("div",null,a.default.createElement(m,{parameters:r,onParameterChange:this.onParameterChange.bind(this),values:n,depth:-2}))}}])&&d(e.prototype,t),r&&d(e,r),n}();(r.default=e).PropTypes={pydio:o.default.instanceOf(i.default).isRequired,pluginsRegistry:o.default.instanceOf(XMLDocument),group:o.default.instanceOf(l.default)},t.exports=r.default},{"../model/User":40,"prop-types":"prop-types",pydio:"pydio",react:"react"}],14:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=s(e("react")),o=s(e("prop-types")),a=s(e("pydio")),l=s(e("../model/Role"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r);return e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=a.default.requireLib("form").FormPanel,e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,i["default"].Component);var e,t,r,o=p(n);function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=o.call(this,e)).state={parameters:[]},AdminComponents.PluginsLoader.getInstance(e.pydio).formParameters("//global_param[contains(@scope,'role')]|//param[contains(@scope,'role')]").then(function(e){t.setState({parameters:e})}),t}return e=n,(t=[{key:"getPydioRoleMessage",value:function(e){return this.props.pydio.MessageHash["role_editor."+e]||e}},{key:"onParameterChange",value:function(e,t,r){var o=this.props.role,n=o.getIdmRole();"applies"===e?n.AutoApplies=t.split(","):"roleLabel"===e?n.Label=t:"roleForceOverride"===e?n.ForceOverride=t:(e=this.getParameterByName(e)).aclKey&&o.setParameter(e.aclKey,t)}},{key:"getParameterByName",value:function(t){return this.state.parameters.filter(function(e){return e.name===t})[0]}},{key:"render",value:function(){var t=this.props.role,e=this.state.parameters;if(!e)return i.default.createElement("div",null,"Loading...");var r,o,n=[{name:"roleId",label:this.getPydioRoleMessage("31"),type:"string",readonly:!0,description:this.getPydioRoleMessage("role.id.description")},{name:"roleLabel",label:this.getPydioRoleMessage("32"),type:"string",description:this.getPydioRoleMessage("role.label.description")},{name:"applies",label:this.getPydioRoleMessage("33"),type:"select",multiple:!0,choices:"admin|Administrators,standard|Standard,shared|Shared Users,anon|Anonymous",description:this.getPydioRoleMessage("role.autoapply.description")},{name:"roleForceOverride",label:"Always Override",type:"boolean",description:this.getPydioRoleMessage("role.override.description")}].concat(u(e)),a={applies:[]};return t&&(o=(r=t.getIdmRole()).AutoApplies||[],a={roleId:r.Uuid,applies:o.filter(function(e){return!!e}),roleLabel:r.Label,roleForceOverride:r.ForceOverride||!1},e.map(function(e){e.aclKey&&t.getParameterValue(e.aclKey)&&(a[e.name]=t.getParameterValue(e.aclKey))})),i.default.createElement(m,{parameters:n,onParameterChange:this.onParameterChange.bind(this),values:a,depth:-2,variant:"v2"})}}])&&d(e.prototype,t),r&&d(e,r),n}();(r.default=e).PropTypes={pydio:o.default.instanceOf(a.default).isRequired,pluginsRegistry:o.default.instanceOf(XMLDocument),role:o.default.instanceOf(l.default)},t.exports=r.default},{"../model/Role":39,"prop-types":"prop-types",pydio:"pydio",react:"react"}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=i(e("react")),o=i(e("prop-types")),n=i(e("pydio")),a=i(e("../model/User")),p=e("material-ui"),y=i(e("../user/UserRolesPicker"));function i(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function s(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function h(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=b(r);return e=o?(e=b(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==g(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=n.default.requireLib("form").FormPanel,e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,f["default"].Component);var e,t,r,o=d(n);function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=o.call(this,e)).state={parameters:[]},AdminComponents.PluginsLoader.getInstance(e.pydio).formParameters('//global_param[contains(@scope,"user")]|//param[contains(@scope,"user")]').then(function(e){t.setState({parameters:e})}),t}return e=n,(t=[{key:"getBinaryContext",value:function(){var e=this.props.user;return"user_id="+e.getIdmUser().Login+(e.getIdmUser().Attributes&&e.getIdmUser().Attributes.avatar?"?"+e.getIdmUser().Attributes.avatar:"")}},{key:"getPydioRoleMessage",value:function(e){return this.props.pydio.MessageHash["role_editor."+e]||e}},{key:"onParameterChange",value:function(t,e,r){var o=this.props.user,n=this.state.parameters.filter(function(e){return e.name===t}),a=o.getIdmUser(),o=o.getRole();"displayName"===t||"email"===t||"profile"===t||"avatar"===t?a.Attributes[t]=e:n.length&&n[0].aclKey&&o.setParameter(n[0].aclKey,e)}},{key:"buttonCallback",value:function(e){var t,r,o,n,a=this.props.user;"update_user_pwd"===e?this.props.pydio.UI.openComponentInModal("AdminPeople","Editor.User.UserPasswordDialog",{user:a}):(t=a.getIdmUser(),r="user_set_lock-lock"===e?"logout":"pass_change",o=[],!t.Attributes.locks||(n=JSON.parse(t.Attributes.locks))&&"object"===g(n)&&(o=n),-1<o.indexOf(r)?(o=o.filter(function(e){return e!==r}),"user_set_lock-lock"===e&&delete t.Attributes.failedConnections):o.push(r),t.Attributes.locks=JSON.stringify(o),a.save())}},{key:"render",value:function(){var e=this,t=this.props,r=t.user,o=t.pydio,n=this.state,a=n.parameters,i=n.showLegends;if(!a)return f.default.createElement("div",null,"Loading...");var l,s,u,c={profiles:[]},d=[];r&&(t=r.getIdmUser(),l=r.getRole(),t.Attributes.locks&&"object"===g(d=JSON.parse(t.Attributes.locks)||[])&&void 0===d.length&&(s=[],Object.keys(d).forEach(function(e){!0===d[e]&&s.push(e)}),d=s),u=f.default.createElement(y.default,{profile:t.Attributes?t.Attributes.profile:"",roles:t.Roles,addRole:function(e){return r.addRole(e)},removeRole:function(e){return r.removeRole(e)},switchRoles:function(e,t){return r.switchRoles(e,t)}}),n=t.Attributes||{},c=h(h({},c),{},{avatar:n.avatar,displayName:n.displayName,email:n.email,profile:n.profile,login:t.Login}),a.map(function(e){e.aclKey&&l.getParameterValue(e.aclKey)&&(c[e.name]=l.getParameterValue(e.aclKey))}));a=[{name:"login",label:this.getPydioRoleMessage("21"),description:o.MessageHash["pydio_role.31"],type:"string",readonly:!0},{name:"profile",label:this.getPydioRoleMessage("22"),description:o.MessageHash["pydio_role.32"],type:"select",choices:"admin|Administrator,standard|Standard,shared|Shared"}].concat(m(a));return f.default.createElement("div",null,f.default.createElement("h3",{className:"paper-right-title",style:{display:"flex",alignItems:"center",paddingLeft:26,paddingRight:26}},f.default.createElement("div",{style:{flex:1}},o.MessageHash["pydio_role.24"],f.default.createElement("div",{className:"section-legend"},o.MessageHash["pydio_role.54"])),f.default.createElement("div",{style:{lineHeight:"24px"}},f.default.createElement(p.IconButton,{iconClassName:"mdi mdi-help-circle-outline",tooltip:"Show/hide form legends",tooltipPosition:"bottom-left",onClick:function(){e.setState({showLegends:!i})}}),f.default.createElement(p.IconMenu,{iconButtonElement:f.default.createElement(p.IconButton,{primary:!0,tooltip:"Security Actions",tooltipPosition:"bottom-left",iconClassName:"mdi mdi-lock"+(-1<d.indexOf("logout")?"-open":""),iconStyle:{color:-1<d.indexOf("logout")?"#e53935":""}}),anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},tooltip:"Actions"},f.default.createElement(p.MenuItem,{primaryText:this.getPydioRoleMessage("25"),onClick:function(){return e.buttonCallback("update_user_pwd")}}),f.default.createElement(p.MenuItem,{primaryText:this.getPydioRoleMessage(-1<d.indexOf("logout")?"27":"26"),onClick:function(){return e.buttonCallback("user_set_lock-lock")}}),f.default.createElement(p.MenuItem,{primaryText:this.getPydioRoleMessage(-1<d.indexOf("pass_change")?"28b":"28"),onClick:function(){return e.buttonCallback("user_set_lock-pass_change")}})))),f.default.createElement(v,{parameters:a,onParameterChange:this.onParameterChange.bind(this),values:c,depth:-2,variant:"v2",variantShowLegend:i,binary_context:this.getBinaryContext()}),u)}}])&&u(e.prototype,t),r&&u(e,r),n}();(r.default=e).PropTypes={pydio:o.default.instanceOf(n.default).isRequired,pluginsRegistry:o.default.instanceOf(XMLDocument),user:o.default.instanceOf(a.default)},t.exports=r.default},{"../model/User":40,"../user/UserRolesPicker":43,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio",react:"react"}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(e("./GroupInfo")),n=a(e("./RoleInfo")),e=a(e("./UserInfo"));function a(e){return e&&e.__esModule?e:{default:e}}e={GroupInfo:o.default,RoleInfo:n.default,UserInfo:e.default};r.default=e,t.exports=r.default},{"./GroupInfo":13,"./RoleInfo":14,"./UserInfo":15}],17:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("pydio/lang/observable")),l=o(e("pydio/http/api")),s=e("cells-sdk"),u=e("uuid");function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r);return e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,a["default"]);var e,t,r,o=p(i);function i(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).acls=[],t.dirty=!1,t.parentRoles=r,t.parentAcls={},e?t.idmRole=e:(t.idmRole=new s.IdmRole,t.idmRole.Uuid=(0,u.v4)()),t.makeSnapshot(),t}return e=i,r=[{key:"FormatPolicyAclFromStore",value:function(e){return e.map(function(e){return e.Action&&"policy"===e.Action.Name&&(e.Action.Name="policy:"+e.Action.Value,e.Action.Value="1"),e})}},{key:"FormatPolicyAclToStore",value:function(e){return e.map(function(e){if(e.Action&&0===e.Action.Name.indexOf("policy:")){var t=s.IdmACL.constructFromObject(JSON.parse(JSON.stringify(e)));return t.Action.Name="policy",t.Action.Value=e.Action.Name.split(":")[1],t}return e})}}],(t=[{key:"load",value:function(){return this.loadAcls()}},{key:"isDirty",value:function(){return this.dirty}},{key:"getIdmRole",value:function(){return this.buildProxy(this.idmRole)}},{key:"makeSnapshot",value:function(){var t=this;this.snapshot=s.IdmRole.constructFromObject(JSON.parse(JSON.stringify(this.idmRole))),this.aclSnapshot=[],this.acls.forEach(function(e){t.aclSnapshot.push(s.IdmACL.constructFromObject(JSON.parse(JSON.stringify(e))))})}},{key:"updateParentRoles",value:function(e){var t=this;this.parentRoles=e,this.loadAcls(!0).then(function(){t.notify("update")})}},{key:"loadAcls",value:function(){var e,o=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],r=new s.ACLServiceApi(l.default.getRestClient()),n=new s.RestSearchACLRequest;n.Queries=[];var a=new s.IdmACLSingleQuery;return a.RoleIDs=[],t||(a.RoleIDs=[this.idmRole.Uuid]),(e=a.RoleIDs).push.apply(e,c(this.parentRoles.map(function(e){return e.Uuid}))),n.Queries.push(a),r.searchAcls(n).then(function(e){var r=i.FormatPolicyAclFromStore(e.ACLs||[]);o.parentRoles.length?(t||(o.acls=r.filter(function(e){return e.RoleID===o.idmRole.Uuid})),o.parentRoles.forEach(function(t){o.parentAcls[t.Uuid]=r.filter(function(e){return e.RoleID===t.Uuid})})):o.acls=r,t||o.makeSnapshot()})}},{key:"revert",value:function(){this.idmRole=this.snapshot,this.acls=this.aclSnapshot,this.dirty=!1,this.makeSnapshot(),this.notify("update")}},{key:"save",value:function(){var n=this,e=new s.RoleServiceApi(l.default.getRestClient()),a=new s.ACLServiceApi(l.default.getRestClient());return e.setRole(this.idmRole.Uuid,this.idmRole).then(function(e){n.idmRole=e;var o=new s.RestSearchACLRequest;o.Queries=[];e=new s.IdmACLSingleQuery;return e.RoleIDs=[n.idmRole.Uuid],o.Queries.push(e),a.searchAcls(o).then(function(e){var t=e.ACLs||[],e=i.FormatPolicyAclToStore(n.acls),e=n.diffAcls(t,e),r=e.inserts,e=e.deletes;return Promise.all(e.map(function(e){return a.deleteAcl(e)})).then(function(){return Promise.all(r.map(function(e){return a.putAcl(e)})).then(function(e){return a.searchAcls(o).then(function(e){n.acls=i.FormatPolicyAclFromStore(e.ACLs||[]),n.makeSnapshot(),n.dirty=!1,n.notify("update")})})})})})}},{key:"diffAcls",value:function(e,r){var o=this,t=e.filter(function(t){return!r.find(function(e){return o.equals(t,e)})});return{inserts:r.filter(function(t){return!e.find(function(e){return o.equals(t,e)})}),deletes:t}}},{key:"equals",value:function(e,t){return e.NodeID===t.NodeID&&e.Action.Name===t.Action.Name&&e.Action.Value===t.Action.Value&&e.WorkspaceID===t.WorkspaceID}},{key:"setParameter",value:function(t,e){var r,o,n=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"PYDIO_REPO_SCOPE_ALL",i=this.acls.filter(function(e){return e.Action.Name===t&&e.WorkspaceID===a});i.length?(r=i[0],o=void 0,this.parentRoles.forEach(function(e){o=n.getAclValue(n.parentAcls[e.Uuid],t,a,o)}),void 0!==o&&o===e?this.acls=this.acls.filter(function(e){return e!==r}):r.Action.Value=JSON.stringify(e)):((i=new s.IdmACL).RoleID=this.idmRole.Uuid,i.WorkspaceID=a,i.Action=new s.IdmACLAction,i.Action.Name=t,i.Action.Value=JSON.stringify(e),this.acls.push(i)),this.dirty=!0,this.notify("update")}},{key:"deleteParameter",value:function(t){this.acls=this.acls.filter(function(e){return e!==t}),this.dirty=!0,this.notify("update")}},{key:"getParameterValue",value:function(t){var r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"PYDIO_REPO_SCOPE_ALL",n=void 0;return this.parentRoles.forEach(function(e){n=r.getAclValue(r.parentAcls[e.Uuid],t,o,n)}),this.getAclValue(this.acls,t,o,n)}},{key:"listParametersAndActions",value:function(){function t(e){return e.Action.Name&&(0===e.Action.Name.indexOf("parameter:")||0===e.Action.Name.indexOf("action:"))}var r=this,o=(o=this.acls||[]).filter(t);return this.parentRoles.forEach(function(e){e=(e=r.parentAcls[e.Uuid]||[]).filter(t).filter(function(t){return!o.filter(function(e){return e.Action.Name===t.Action.Name}).length}).map(function(e){e=s.IdmACL.constructFromObject(JSON.parse(JSON.stringify(e)));return e.INHERITED=!0,e});o=[].concat(c(o),c(e))}),o}},{key:"getAclValue",value:function(e,t,r,o){if(!e)return o;var n=e.filter(function(e){return e.Action.Name===t&&e.WorkspaceID===r});try{return JSON.parse(n[0].Action.Value)}catch(e){return o}}},{key:"getAclString",value:function(e,t){var r,o,n,a,i,l=this,s=!1;n=e?(r=(r=e.RootNodes)[Object.keys(r).shift()],o=e.UUID,r.Uuid):t,this.parentRoles.forEach(function(e){e=l._aclStringForAcls(l.parentAcls[e.Uuid],o,n);void 0!==e&&(i=e)});t=this._aclStringForAcls(this.acls,o,n);if(void 0!==t)a=t;else{if(void 0===i)return{aclString:""};a=i,s=!0}return{aclString:Object.keys(a).filter(function(e){return a[e]}).join(","),inherited:s}}},{key:"_aclStringForAcls",value:function(e,r,o){var n={read:!1,write:!1,deny:!1},t=e.filter(function(e){return e.Action.Name&&0===e.Action.Name.indexOf("policy:")&&(!r||e.WorkspaceID===r)&&e.NodeID===o&&"1"===e.Action.Value});return t.length?(n[t[0].Action.Name]=!0,n):(Object.keys(n).forEach(function(t){e.filter(function(e){return e.Action.Name===t&&(!r||e.WorkspaceID===r)&&e.NodeID===o&&"1"===e.Action.Value}).length&&(n[t]|=!0)}),n.read||n.write||n.deny?n:void 0)}},{key:"updateAcl",value:function(o,t,e){var n=this,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=[],l=!1;t?(i=[t],l=a&&-1<Object.keys(a.RootNodes).indexOf(t)):i=Object.keys(o.RootNodes),this.acls=o?this.acls.filter(function(e){return!(("read"===e.Action.Name||"write"===e.Action.Name||"deny"===e.Action.Name||e.Action.Name&&0===e.Action.Name.indexOf("policy:"))&&e.WorkspaceID===o.UUID&&-1<i.indexOf(e.NodeID)&&"1"===e.Action.Value)}):this.acls.filter(function(e){return!(("read"===e.Action.Name||"write"===e.Action.Name||"deny"===e.Action.Name||e.Action.Name&&0===e.Action.Name.indexOf("policy:"))&&e.NodeID===t&&"1"===e.Action.Value)}),""!==e&&e.split(",").forEach(function(r){i.forEach(function(e){var t=new s.IdmACL;t.NodeID=e,o?t.WorkspaceID=o.UUID:l&&(t.WorkspaceID=a.UUID),t.RoleID=n.idmRole.Uuid,t.Action=s.IdmACLAction.constructFromObject({Name:r,Value:"1"}),n.acls.push(t)})}),this.dirty=!0,this.notify("update")}},{key:"buildProxy",value:function(e){var o=this;return new Proxy(e,{set:function(e,t,r){return e[t]=r,o.dirty=!0,o.notify("update"),!0},get:function(e,t){t=e[t];return!(t instanceof Array)&&t instanceof Object?o.buildProxy(t):t}})}}])&&d(e.prototype,t),r&&d(e,r),i}();r.default=e,t.exports=r.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api","pydio/lang/observable":"pydio/lang/observable",uuid:53}],18:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("pydio/lang/observable")),i=e("cells-sdk"),l=e("uuid"),s=o(e("./Role"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r);return e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,a["default"]);var e,t,r,o=p(n);function n(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=o.call(this)).acls=[];var r=[];return e?(t.idmUser=e,t.idmUser.Roles&&(t.idmRole=t.idmUser.Roles.filter(function(e){return e.Uuid===t.idmUser.Uuid})[0],t.idmUser.IsGroup||(r=t.idmUser.Roles.filter(function(e){return e.Uuid!==t.idmUser.Uuid}))),t.idmUser.Attributes||(t.idmUser.Attributes={})):(t.idmUser=new i.IdmUser,t.idmUser.Uuid=(0,l.v4)(),t.idmRole=i.IdmRole.constructFromObject({Uuid:t.idmUser.Uuid}),t.idmUser.Roles=[t.idmRole],t.idmUser.Attributes={}),t.role=new s.default(t.idmRole,r),t.role.observe("update",function(){t.dirty|=t.role.isDirty(),t.notify("update")}),t.makeSnapshot(),t}return e=n,(t=[{key:"load",value:function(){var e=this;this.role.load().then(function(){e.notify("update")})}},{key:"isDirty",value:function(){return this.dirty}},{key:"save",value:function(){var t=this;return PydioApi.getRestClient().getIdmApi().updateIdmUser(this.idmUser).then(function(e){return t.idmUser=e,t.role.isDirty()?t.role.save().then(function(){t.makeSnapshot(),t.dirty=!1,t.notify("update")}):(t.makeSnapshot(),t.dirty=!1,t.notify("update"),Promise.resolve(t))})}},{key:"revert",value:function(){this.idmUser=this.snapshot,this.makeSnapshot(),this.dirty=!1,this.notify("update"),this.role.revert()}},{key:"makeSnapshot",value:function(){this.snapshot=i.IdmUser.constructFromObject(JSON.parse(JSON.stringify(this.idmUser)))}},{key:"getRole",value:function(){return this.role}},{key:"addRole",value:function(t){var r=this,e=this.idmUser.Roles.filter(function(e){return e.Uuid!==r.idmUser.Uuid}),e=[].concat(u(e.filter(function(e){return e.Uuid!==t.Uuid})),[t]);this.idmUser.Roles=[].concat(u(e),[this.idmRole]),this.dirty=!0,this.role.updateParentRoles(e)}},{key:"removeRole",value:function(t){var r=this,e=this.idmUser.Roles.filter(function(e){return e.Uuid!==r.idmUser.Uuid&&e.Uuid!==t.Uuid});this.idmUser.Roles=[].concat(u(e),[this.idmRole]),this.dirty=!0,this.role.updateParentRoles(e)}},{key:"switchRoles",value:function(e,t){for(var r,o,n,a=this,i=this.idmUser.Roles.filter(function(e){return e.Uuid!==a.idmUser.Uuid}),l=0;l<i.length;l++)i[l].Uuid===e?n=i[r=l]:i[l].Uuid===t&&(o=l);i[r]=i[o],i[o]=n,this.idmUser.Roles=[].concat(u(i),[this.idmRole]),this.dirty=!0,this.role.updateParentRoles(i)}},{key:"getIdmUser",value:function(){return this.buildProxy(this.idmUser)}},{key:"buildProxy",value:function(e){var o=this;return new Proxy(e,{set:function(e,t,r){return e[t]=r,o.dirty=!0,o.notify("update"),!0},get:function(e,t){t=e[t];return!(t instanceof Array)&&t instanceof Object?o.buildProxy(t):t}})}}])&&d(e.prototype,t),r&&d(e,r),n}();r.default=e,t.exports=r.default},{"./Role":17,"cells-sdk":"cells-sdk","pydio/lang/observable":"pydio/lang/observable",uuid:53}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Role")),e=n(e("./User"));function n(e){return e&&e.__esModule?e:{default:e}}e={Role:o.default,User:e.default};r.default=e,t.exports=r.default},{"./Role":17,"./User":18}],20:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=c(e("react")),o=c(e("create-react-class")),i=c(e("./ParametersPicker")),l=c(e("prop-types")),s=c(e("pydio")),u=e("material-ui/styles");function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r);return e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e=s.default.requireLib("boot"),s=e.ActionDialogMixin,e=e.CancelButtonProviderMixin,m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,a["default"].Component);var e,t,r,o=p(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.getMessage,e=e.muiTheme.palette.primary1Color;return a.default.createElement("div",{style:{backgroundColor:e,color:"white",padding:"0 24px 24px"}},a.default.createElement("h3",{style:{color:"white"}},t("14")),a.default.createElement("div",{className:"legend"},t("15")))}}])&&d(e.prototype,t),r&&d(e,r),n}(),m=(0,u.muiThemeable)()(m),l=(0,o.default)({displayName:"ParameterCreate",mixins:[s,e],propTypes:{workspaceScope:l.default.string,showModal:l.default.func,hideModal:l.default.func,pluginsFilter:l.default.func,roleType:l.default.oneOf(["user","group","role"]),createParameter:l.default.func},getDefaultProps:function(){return{dialogPadding:0,dialogTitle:"",dialogSize:"md"}},getInitialState:function(){return{step:1,workspaceScope:this.props.workspaceScope,pluginName:null,paramName:null,actions:{},parameters:{}}},setSelection:function(e,t,r,o){this.setState({pluginName:e,type:t,paramName:r,attributes:o},this.createParameter)},createParameter:function(){this.props.createParameter(this.state.type,this.state.pluginName,this.state.paramName,this.state.attributes),this.props.onDismiss()},render:function(){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pydio_role";return r.MessageHash[t+(t?".":"")+e]||e}var t=this.props,r=t.pydio,o=t.actions,t=t.parameters;return a.default.createElement("div",{className:"picker-list"},a.default.createElement(m,{getMessage:e}),a.default.createElement(i.default,{pydio:r,allActions:o,allParameters:t,onSelection:this.setSelection,getMessage:e}))}});r.default=l,t.exports=r.default},{"./ParametersPicker":23,"create-react-class":"create-react-class","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio",react:"react"}],21:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=a(e("react")),o=e("../util/MessagesMixin"),m=(e("cells-sdk"),a(e("pydio/util/xml"))),h=(e("../model/Role"),e("material-ui"));function a(e){return e&&e.__esModule?e:{default:e}}function i(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function g(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var o,n,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(r);return e=o?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=a(e("pydio")).default.requireLib("form"),e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,y["default"].Component);var e,t,r,o=c(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=o.call(this,e)).state={editMode:!1},e}return e=n,(t=[{key:"onChangeParameter",value:function(e,t){var r,o;e!==t&&(r=(o=this.props).role,o=(t=o.acl).Action.Name,r.setParameter(o,e,t.WorkspaceID))}},{key:"deleteParameter",value:function(){var e=this.props,t=e.role,e=e.acl;t.deleteParameter(e)}},{key:"overrideParameter",value:function(){var e=this.props,t=e.role,r=e.acl,o=r.Action.Name,n=v(o.split(":"),3),e=n[0],e=(n[1],n[2],"action"===e?!1:"");t.setParameter(o,e,r.WorkspaceID)}},{key:"onInputEditMode",value:function(e){this.setState({editMode:e})}},{key:"toggleEditMode",value:function(){this.refs.formElement&&this.refs.formElement.toggleEditMode()}},{key:"toggleActionStatus",value:function(e,t){var r=this.props,o=r.role,r=r.acl;o.setParameter(r.Action.Name,t,r.WorkspaceID)}},{key:"render",value:function(){var e,t,r=this.props,o=r.acl,n=r.actions,a=r.parameters,i=r.pydio,l=r.getMessage,s=r.getPydioRoleMessage,u=v(o.Action.Name.split(":"),3),c=u[0],d=u[1],f=u[2],r="DEFAULT_START_REPOSITORY"===f?o.Action.Value:JSON.parse(o.Action.Value),u=o.INHERITED,o=f;if("parameter"===c&&a[d]?(a=a[d].filter(function(e){return e.parameter===f})).length&&(e=a[0]):"action"!==c||!n[d]||(d=n[d].filter(function(e){return e.action===f})).length&&(e=d[0]),"parameter"===c){var p={type:"string",label:o,name:f};if("user"===(p=e?O.Manager.parameterNodeToHash(e.xmlNode):p).scope)return null;o=p.label,p=O.createFormElement({ref:"formElement",attributes:p,name:f,value:r,onChange:this.onChangeParameter.bind(this),disabled:u,onChangeEditMode:this.onInputEditMode.bind(this),displayContext:"grid"})}else e&&(o=m.default.XPathGetSingleNodeText(e.xmlNode,"gui/@text")||o,i.MessageHash[o]&&(o=i.MessageHash[o])),p=y.default.createElement("div",{className:"role-action-toggle"},y.default.createElement(h.Toggle,{name:this.props.name,onToggle:this.toggleActionStatus.bind(this),toggled:!!r,label:l(r?"2":"3"),labelPosition:"right"}));r={style:{opacity:.2},hoveredStyle:{opacity:1}};return"parameter"===c?this.state.editMode?t=y.default.createElement(h.IconButton,b({iconClassName:"mdi mdi-content-save",tooltip:l("6"),onClick:this.toggleEditMode.bind(this)},r)):(t=y.default.createElement(h.IconButton,b({iconClassName:"mdi mdi-close",tooltip:l("4"),onClick:this.deleteParameter.bind(this)},r)),u&&(t=y.default.createElement(h.IconButton,b({iconClassName:"mdi mdi-content-copy",tooltip:l("5"),onClick:this.overrideParameter.bind(this)},r)))):t=u?y.default.createElement("div",{style:{width:48,height:48}}):y.default.createElement(h.IconButton,b({iconClassName:"mdi mdi-close",tooltip:l("4"),onClick:this.deleteParameter.bind(this)},r)),y.default.createElement("tr",{className:(u?"inherited":"")+(this.state.editMode?" edit-mode":""),style:g({},this.props.style)},y.default.createElement("td",{style:{width:"40%",fontWeight:500}},u?"["+s("38")+"]":""," ",o),y.default.createElement("td",{style:{wordBreak:"break-all"}},p),y.default.createElement("td",{style:{width:50}},t))}}])&&s(e.prototype,t),r&&s(e,r),n}(),e=(0,o.withRoleMessages)(e);r.default=e,t.exports=r.default},{"../model/Role":39,"../util/MessagesMixin":45,"cells-sdk":"cells-sdk","material-ui":"material-ui",pydio:"pydio","pydio/util/xml":"pydio/util/xml",react:"react"}],22:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=o(e("react")),d=o(e("./ParameterEntry")),f=e("material-ui"),a=e("cells-sdk");function o(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var o,n,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function l(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=m(r);return e=o?(e=m(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,c["default"].Component);var e,t,r,o=u(n);function n(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=o.call(this,e)).state={actions:{},parameters:{},workspaces:{}};var t=new a.WorkspaceServiceApi(PydioApi.getRestClient()),e=new a.RestSearchWorkspaceRequest;return e.Queries=[a.IdmWorkspaceSingleQuery.constructFromObject({scope:"ADMIN"})],t.searchWorkspaces(e).then(function(e){var e=e.Workspaces||[],t={};e.forEach(function(e){t[e.UUID]=e}),r.setState({workspaces:t})}),r}return e=n,(t=[{key:"componentDidMount",value:function(){var t=this;AdminComponents.PluginsLoader.getInstance(this.props.pydio).allPluginsActionsAndParameters().then(function(e){t.setState({actions:e.ACTIONS,parameters:e.PARAMETERS})})}},{key:"onCreateParameter",value:function(e,t,r,o,n){var a,i=this.props.role,o=t+":"+r+":"+o;"action"===t?a=!1:n&&n.xmlNode&&(a=(n=n.xmlNode).getAttribute("default")?n.getAttribute("default"):"","boolean"===n.getAttribute("type")?a="true"===a:"integer"===n.getAttribute("type")&&(a=parseInt(a))),i.setParameter(o,a,e)}},{key:"addParameter",value:function(n){var a=this,e=this.props,t=e.pydio,r=e.roleType,o=this.state,e=o.actions,o=o.parameters;t.UI.openComponentInModal("AdminPeople","Editor.Params.ParameterCreate",{pydio:t,actions:e,parameters:o,workspaceScope:n,createParameter:function(e,t,r,o){a.onCreateParameter(n,e,t,r,o)},roleType:r})}},{key:"render",value:function(){var n=this,e=this.props,a=e.role,i=e.pydio;if(!a)return null;function l(e){return i.MessageHash["pydio_role."+e]||e}var s=this.state.workspaces,e=a.listParametersAndActions(),u={PYDIO_REPO_SCOPE_ALL:{},PYDIO_REPO_SCOPE_SHARED:{}};e.forEach(function(e){u[e.WorkspaceID]||(u[e.WorkspaceID]={});var t=y(e.Action.Name.split(":"),3),t=(t[0],t[1],t[2]);u[e.WorkspaceID][t]=e});e=[c.default.createElement(f.MenuItem,{primaryText:l("parameters.scope.selector.title"),value:1}),c.default.createElement(f.MenuItem,{primaryText:l("parameters.scope.all"),onClick:function(){n.addParameter("PYDIO_REPO_SCOPE_ALL")}}),c.default.createElement(f.MenuItem,{primaryText:l("parameters.scope.shared"),onClick:function(){n.addParameter("PYDIO_REPO_SCOPE_SHARED")}}),c.default.createElement(f.Divider,null)].concat(Object.keys(s).map(function(e){return c.default.createElement(f.MenuItem,{primaryText:s[e].Label,onClick:function(){n.addParameter(e)}})}));return c.default.createElement("div",null,c.default.createElement("h3",{className:"paper-right-title",style:{display:"flex"}},c.default.createElement("span",{style:{flex:1,paddingRight:20}},l("46"),c.default.createElement("div",{className:"section-legend"},l("47"))),c.default.createElement("div",{style:{width:160}},c.default.createElement(f.SelectField,{fullWidth:!0,value:1},e))),c.default.createElement("div",{style:{padding:"0 20px",backgroundColor:"white"}},Object.keys(u).map(function(r){var o=!1,e="PYDIO_REPO_SCOPE_ALL"===r?l("parameters.scope.all"):"PYDIO_REPO_SCOPE_SHARED"===r?l("parameters.scope.shared"):s[r]?l("parameters.scope.workspace").replace("%s",s[r].Label):l("parameters.scope.workspace").replace("%s",r),t=Object.keys(u[r]).length?Object.keys(u[r]).map(function(e){var t={backgroundColor:o?"#FAFAFA":"white"};return o=!o,c.default.createElement(d.default,p({pydio:i,acl:u[r][e],role:a},n.state,{style:t}))}):c.default.createElement("tr",null,c.default.createElement("td",{colSpan:3,style:{padding:"14px 0"}},l("parameters.empty")));return c.default.createElement("table",{style:{width:"100%",marginBottom:20}},c.default.createElement("tr",{style:{borderBottom:"1px solid #e0e0e0"}},c.default.createElement("td",{colSpan:2,style:{fontSize:15,paddingTop:10}},e),c.default.createElement("td",{style:{width:50}},c.default.createElement(f.IconButton,{iconClassName:"mdi mdi-plus",onClick:function(){n.addParameter(r)},tooltip:l("parameters.custom.add")}))),t)})))}}])&&l(e.prototype,t),r&&l(e,r),n}();r.default=e,t.exports=r.default},{"./ParameterEntry":21,"cells-sdk":"cells-sdk","material-ui":"material-ui",react:"react"}],23:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var b=o(e("react")),i=o(e("pydio/util/lang")),v=o(e("pydio/util/xml")),l=e("material-ui");function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function u(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function c(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(r);return e=o?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,b["default"].Component);var e,t,r,o=p(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=o.call(this,c({actionsPrefix:"[a] ",parametersPrefix:""},e))).state={filter:null},e.props.initialSelection&&(e.state=c({filter:e.props.initialSelection.paramName},e.props.initialSelection)),e}return e=n,(t=[{key:"filter",value:function(e){this.setState({filter:e.target.value.toLowerCase()})}},{key:"select",value:function(e,t,r,o){this.props.onSelection(e,t,r,o),this.setState({pluginName:e,type:t,paramName:r})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.refs.input.focus()},150)}},{key:"render",value:function(){function d(e){return!n||-1!==e.toLowerCase().indexOf(n)}function f(e){if(!n)return e;var t=e.toLowerCase().indexOf(n),r=e.substr(0,t),o=e.substr(t,n.length),t=e.substr(t+n.length);return b.default.createElement("span",null,r,b.default.createElement("span",{className:"highlight"},o),t)}var p=this,e=this.props,y=e.pydio,r=e.allParameters,o=e.allActions,n=this.state.filter,m=this.state.paramName,h=this.state.pluginName,g=this.state.type,t=[],a={};return Object.keys(r).forEach(function(e){var t;a[e]||(a[e]={name:e,label:e,actions:[],params:[]}),(t=a[e].params).push.apply(t,s(r[e]))}),Object.keys(o).forEach(function(e){var t;a[e]||(a[e]={name:e,label:e,actions:[],params:[]}),(t=a[e].actions).push.apply(t,s(o[e]))}),i.default.objectValues(a).map(function(s){var u=[],c=!1,e=s.label||s.name;(d(e)||d(s.name))&&(c=!0,d(e)?e=f(e):d(s.name)&&(e=b.default.createElement("span",null,e," (",f(s.name),")"))),s.params.concat(s.actions).map(function(e){var t=e.action||e.parameter,r=e.label||t,o="";e.action?(r=v.default.XPathGetSingleNodeText(e.xmlNode,"gui/@text")||r,o=p.props.actionsPrefix):(r=e.xmlNode.getAttribute("label")||r,p.props.parametersPrefix&&(o=p.props.parametersPrefix)),y.MessageHash[r]&&(r=y.MessageHash[r]);var n,a,i=d(r),l=d(t);(i||l||c)&&(n=("*"===h||h===s.name)&&e[g]&&m===t,a=r,i?a=f(r):l&&(a=b.default.createElement("span",null,r," (",f(t),") ")),u.push(b.default.createElement("li",{onClick:function(){return p.select(s.name,e.action?"action":"parameter",t,e)},className:(n?"selected ":"")+"parameters-param",key:s.name+"-"+(e.action?"action":"parameter")+"-"+t},o," ",a)))}),u.length&&t.push(b.default.createElement("li",{className:"parameters-plugin",key:s.name},e,b.default.createElement("ul",null,u)))}),b.default.createElement("div",null,b.default.createElement("div",{style:{padding:"0 24px",borderBottom:"1px solid #e0e0e0"}},b.default.createElement(l.TextField,{ref:"input",floatingLabelText:this.props.getMessage("13"),onChange:this.filter.bind(this),fullWidth:!0,underlineShow:!1})),b.default.createElement("div",{className:"parameters-tree-scroller"},b.default.createElement("ul",{className:"parameters-tree"},t)))}}])&&d(e.prototype,t),r&&d(e,r),n}();r.default=e,t.exports=r.default},{"material-ui":"material-ui","pydio/util/lang":"pydio/util/lang","pydio/util/xml":"pydio/util/xml",react:"react"}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("./ParameterEntry")),n=i(e("./ParameterCreate")),a=i(e("./ParametersPanel"));function i(e){return e&&e.__esModule?e:{default:e}}o={ParametersPicker:i(e("./ParametersPicker")).default,ParameterCreate:n.default,ParametersPanel:a.default,ParameterEntry:o.default};r.default=o,t.exports=r.default},{"./ParameterCreate":20,"./ParameterEntry":21,"./ParametersPanel":22,"./ParametersPicker":23}],25:[function(y,m,h){!function(p){!function(){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var t=i(y("react")),e=i(y("create-react-class")),r=i(y("prop-types")),o=i(y("pydio")),n=i(y("../model/User")),a=i(y("pydio/util/pass"));function i(e){return e&&e.__esModule?e:{default:e}}function l(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function s(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}var u=o.default.requireLib("boot"),c=u.ActionDialogMixin,d=u.CancelButtonProviderMixin,u=u.SubmitButtonProviderMixin,f=o.default.requireLib("hoc").ModernTextField,n=(0,e.default)({displayName:"UserPasswordDialog",mixins:[AdminComponents.MessagesConsumerMixin,c,d,u],propTypes:{pydio:r.default.instanceOf(o.default),user:r.default.instanceOf(n.default)},getDefaultProps:function(){return{dialogTitle:pydio.MessageHash["role_editor.25"],dialogSize:"sm"}},getInitialState:function(){return s({},a.default.getState())},onChange:function(e,t){var r=this.refs.pass.getValue(),o=this.refs.confirm.getValue(),o=a.default.getState(r,o,this.state);this.setState(o)},submit:function(){var e,t,r=this;this.state.valid?(e=this.refs.pass.getValue(),(t=this.props.user).getIdmUser().Password=e,t.save().then(function(){r.dismiss()})):this.props.pydio.UI.displayMessage("ERROR",this.state.passErrorText||this.state.confirmErrorText)},render:function(){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return p.pydio.MessageHash[t+(t?".":"")+e]||e}return t.default.createElement("div",{style:{width:"100%"}},t.default.createElement(f,{ref:"pass",type:"password",fullWidth:!0,onChange:this.onChange,floatingLabelText:e("523"),errorText:this.state.passErrorText,hintText:this.state.passHintText}),t.default.createElement(f,{ref:"confirm",type:"password",fullWidth:!0,onChange:this.onChange,floatingLabelText:e("199"),errorText:this.state.confirmErrorText}))}});h.default=n,m.exports=h.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../model/User":40,"create-react-class":"create-react-class","prop-types":"prop-types",pydio:"pydio","pydio/util/pass":"pydio/util/pass",react:"react"}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("react")),o=l(e("create-react-class")),c=e("material-ui"),n=e("../util/MessagesMixin"),a=l(e("prop-types")),i=l(e("pydio/http/api"));function l(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}a=(0,o.default)({displayName:"UserRolesPicker",mixins:[n.RoleMessagesConsumerMixin],propTypes:{profile:a.default.string,roles:a.default.array,addRole:a.default.func,removeRole:a.default.func,switchRoles:a.default.func},getInitialState:function(){return{availableRoles:[]}},componentDidMount:function(){var t=this;i.default.getRestClient().getIdmApi().listRoles().then(function(e){t.setState({availableRoles:e})})},onChange:function(e,t,r){-1!==r&&this.props.addRole(r)},remove:function(t){var e=this.state.availableRoles.filter(function(e){return e.Uuid===t})[0];this.props.removeRole(e)},orderUpdated:function(e,t,r){this.props.switchRoles(e,t)},render:function(){var t=[],r=[],o=[],n=this.context,e=this.props,a=e.roles,i=e.loadingMessage,l=e.profile,e=this.state.availableRoles;a.map(function(e){e.GroupRole?"ROOT_GROUP"===e.Uuid?t.push("/ "+n.getMessage("user.25","ajxp_admin")):t.push(n.getMessage("user.26","ajxp_admin").replace("%s",e.Label||e.Uuid)):e.UserRole?o.push(n.getMessage("user.27","ajxp_admin")):e.AutoApplies&&-1!==e.AutoApplies.indexOf(l)?t.push(e.Label+" [auto]"):r.push({payload:e.Uuid,text:e.Label})}.bind(this));var e=[u.default.createElement(c.MenuItem,{value:-1,primaryText:n.getMessage("20")})].concat(d(e.filter(function(e){return-1===a.indexOf(e)}).map(function(e){return u.default.createElement(c.MenuItem,{value:e,primaryText:e.Label||e.Uuid})}))),s={padding:10,fontSize:14,backgroundColor:"rgb(246 246 248)",borderRadius:2,margin:"8px 0"};return u.default.createElement("div",{className:"user-roles-picker",style:{padding:0,paddingBottom:12,margin:"-30px 20px 40px",backgroundColor:"white",borderRadius:6,border:"1px solid #dfe3e5"}},u.default.createElement("div",{style:{paddingLeft:16,display:"flex",alignItems:"center"}},u.default.createElement("div",{style:{flex:1,fontSize:16}},n.getMessage("roles.picker.title")," ",i?" ("+n.getMessage("21")+")":""),u.default.createElement("div",{className:"roles-picker-menu",style:{marginBottom:-12}},u.default.createElement(c.DropDownMenu,{underlineStyle:{display:"none"},onChange:this.onChange,value:-1},e))),u.default.createElement("div",{className:"roles-list",style:{margin:"0 16px",paddingBottom:1}},t.map(function(e){return u.default.createElement("div",{key:"group-"+e,style:s},e)}),u.default.createElement(PydioComponents.SortableList,{key:"sortable",values:r,removable:!0,onRemove:this.remove,onOrderUpdated:this.orderUpdated,itemClassName:"role-item role-item-sortable"}),o.map(function(e){return u.default.createElement("div",{key:"user-"+e,style:s},e)})))}});r.default=a,t.exports=r.default},{"../util/MessagesMixin":45,"create-react-class":"create-react-class","material-ui":"material-ui","prop-types":"prop-types","pydio/http/api":"pydio/http/api",react:"react"}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./UserPasswordDialog")),e=n(e("./UserRolesPicker"));function n(e){return e&&e.__esModule?e:{default:e}}e={UserPasswordDialog:o.default,UserRolesPicker:e.default};r.default=e,t.exports=r.default},{"./UserPasswordDialog":25,"./UserRolesPicker":26}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadEditorClass=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length?arguments[1]:void 0;if(!r)return Promise.resolve(o);var e=r.split("."),n=e.shift(),a=e.join(".");return l.default.loadClass(n).then(function(e){var t=i.default.getFunctionByName(a,e);if(t)return t;if("object"===s(e)&&e[n]){e=i.default.getFunctionByName(a,e[n]);if(e)return e}if(o)return console.error("Cannot find editor component, using default instead",r,o),o;throw new Error("cannot find editor component")}).catch(function(e){if(o)return console.error("Cannot find editor component, using default instead",r,o),o;throw e})};var i=o(e("pydio/util/func")),l=o(e("pydio/http/resources-manager"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"pydio/http/resources-manager":"pydio/http/resources-manager","pydio/util/func":"pydio/util/func"}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={CACHE:null},t.exports=r.default},{}],30:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.withRoleMessages=function(n){return function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,a.Component);var r,o,e=(r=t,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=f(r);return e=o?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e});function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return function(e,t,r){t&&c(e.prototype,t);r&&c(e,r)}(t,[{key:"render",value:function(){var r=(this.props.pydio||l.default.getInstance()).MessageHash;return a.default.createElement(n,u({},this.props,{getMessage:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pydio_role";return r[t+(t?".":"")+e]||e},getPydioRoleMessage:function(e){return r["role_editor."+e]||e},getRootMessage:function(e){return r[e]||e},getAdminMessage:function(e){return r["ajxp_admin."+e]||e}}))}}]),t}()},r.RoleMessagesProviderMixin=r.RoleMessagesConsumerMixin=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var a;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((a=n?Object.getOwnPropertyDescriptor(e,r):null)&&(a.get||a.set)?Object.defineProperty(o,r,a):o[r]=e[r])}o.default=e,t&&t.set(e,o);return o}(e("react")),o=n(e("prop-types")),l=n(e("pydio"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e={contextTypes:{messages:o.default.object,getMessage:o.default.func,getPydioRoleMessage:o.default.func,getRootMessage:o.default.func}};r.RoleMessagesConsumerMixin=e;o={childContextTypes:{messages:o.default.object,getMessage:o.default.func,getPydioRoleMessage:o.default.func,getRootMessage:o.default.func},getChildContext:function(){var r=this.context.pydio.MessageHash;return{messages:r,getMessage:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pydio_role";return r[t+(t?".":"")+e]||e},getPydioRoleMessage:function(e){return r["role_editor."+e]||e},getRootMessage:function(e){return r[e]||e}}}};r.RoleMessagesProviderMixin=o},{"prop-types":"prop-types",pydio:"pydio",react:"react"}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,n=(o=e("./EditorCache"))&&o.__esModule?o:{default:o},a=e("./MessagesMixin"),i=e("./ClassLoader");i={EditorCache:n.default,RoleMessagesConsumerMixin:a.RoleMessagesConsumerMixin,withRoleMessages:a.withRoleMessages,loadEditorClass:i.loadEditorClass};r.default=i,t.exports=r.default},{"./ClassLoader":28,"./EditorCache":29,"./MessagesMixin":30}],32:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{"./WorkspaceAcl":34,"cells-sdk":"cells-sdk",dup:6,"pydio/util/lang":"pydio/util/lang",react:"react"}],33:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{"../util/MessagesMixin":45,dup:7,"material-ui":"material-ui",react:"react"}],34:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{"../util/MessagesMixin":45,"./RightsSelector":33,"cells-sdk":"cells-sdk",dup:9,"material-ui":"material-ui",react:"react"}],35:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{"./WorkspaceAcl":34,"cells-sdk":"cells-sdk",dup:10,pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/lang":"pydio/util/lang",react:"react"}],36:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"../model/User":40,dup:13,"prop-types":"prop-types",pydio:"pydio",react:"react"}],37:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{"../model/Role":39,dup:14,"prop-types":"prop-types",pydio:"pydio",react:"react"}],38:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"../model/User":40,"../user/UserRolesPicker":43,dup:15,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio",react:"react"}],39:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"cells-sdk":"cells-sdk",dup:17,"pydio/http/api":"pydio/http/api","pydio/lang/observable":"pydio/lang/observable",uuid:53}],40:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{"./Role":39,"cells-sdk":"cells-sdk",dup:18,"pydio/lang/observable":"pydio/lang/observable",uuid:53}],41:[function(e,t,r){arguments[4][21][0].apply(r,arguments)},{"../model/Role":39,"../util/MessagesMixin":45,"cells-sdk":"cells-sdk",dup:21,"material-ui":"material-ui",pydio:"pydio","pydio/util/xml":"pydio/util/xml",react:"react"}],42:[function(e,t,r){arguments[4][22][0].apply(r,arguments)},{"./ParameterEntry":41,"cells-sdk":"cells-sdk",dup:22,"material-ui":"material-ui",react:"react"}],43:[function(e,t,r){arguments[4][26][0].apply(r,arguments)},{"../util/MessagesMixin":45,"create-react-class":"create-react-class",dup:26,"material-ui":"material-ui","prop-types":"prop-types","pydio/http/api":"pydio/http/api",react:"react"}],44:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{dup:28,"pydio/http/resources-manager":"pydio/http/resources-manager","pydio/util/func":"pydio/util/func"}],45:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{dup:30,"prop-types":"prop-types",pydio:"pydio",react:"react"}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=s(e("react")),o=s(e("create-react-class")),n=s(e("prop-types")),a=s(e("pydio")),m=s(e("pydio/http/api")),i=s(e("pydio/model/node")),l=s(e("pydio/util/lang"));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.requireLib("hoc").ModernTextField,n=(0,o.default)({displayName:"CreateRoleOrGroupForm",mixins:[AdminComponents.MessagesConsumerMixin,PydioReactUI.CancelButtonProviderMixin,PydioReactUI.SubmitButtonProviderMixin],propTypes:{type:n.default.oneOf(["group","user","role"]),roleNode:n.default.instanceOf(i.default),openRoleEditor:n.default.func},getTitle:function(){return"group"===this.props.type?this.context.getMessage("ajxp_admin.user.15"):this.context.getMessage("ajxp_admin.user.14")},getPadding:function(){return!0},getSize:function(){return"sm"},dismiss:function(){return this.props.onDismiss()},getInitialState:function(){return{groupId:"",groupIdError:this.context.getMessage("ajxp_admin.user.16.empty"),groupLabel:"",groupLabelError:this.context.getMessage("ajxp_admin.user.17.empty"),roleId:"",roleLabel:"",roleLabelError:this.context.getMessage("ajxp_admin.user.18.empty")}},submit:function(){var t,r,o,n=this,e=this.props,a=e.type,i=e.pydio,l=e.reload,s=this.state,u=s.groupId,c=s.groupIdError,d=s.groupLabel,f=s.groupLabelError,p=s.roleId,y=s.roleIdError,e=s.roleLabel,s=s.roleLabelError;"group"===a?c||f||(r=(t=i.getContextHolder().getSelectedNodes().length?i.getContextHolder().getSelectedNodes()[0]:i.getContextNode()).getPath().replace("/idm/users",""),(o=m.default.getRestClient().getIdmApi()).userOrGroupByIdentifier(r,u).then(function(e){e?n.setState({groupIdError:"Found group or user with same identifier!"}):o.createGroup(r||"/",u,d).then(function(){n.dismiss(),t.reload()})})):"role"===a&&(s||y||m.default.getRestClient().getIdmApi().createRole(e,p).then(function(){n.dismiss(),l&&l()}))},update:function(t){var e,r;void 0!==t.groupId?new RegExp(/^[0-9A-Z\-_.:\+]+$/i).test(t.groupId)?""===t.groupId?t.groupIdError=this.context.getMessage("ajxp_admin.user.16.empty"):t.groupIdError="":t.groupIdError=this.context.getMessage("ajxp_admin.user.16.format"):void 0!==t.groupLabel?""===t.groupLabel?t.groupLabelError=this.context.getMessage("ajxp_admin.user.17.empty"):(t.groupLabelError="",r=(e=this.state).groupId,e=e.groupLabel,""!==r&&l.default.computeStringSlug(e)!==r||(t.groupId=l.default.computeStringSlug(t.groupLabel),t.groupIdError="")):void 0!==t.roleLabel?""===t.roleLabel?t.roleLabelError=this.context.getMessage("ajxp_admin.user.18.empty"):t.roleLabelError="":t.roleId&&(0<(void 0===(r=this.props.roles)?[]:r).filter(function(e){return e.Uuid===t.roleId}).length?t.roleIdError=this.context.getMessage("role_editor.31.exists"):t.roleIdError="",t.roleId=l.default.computeStringSlug(t.roleId)),this.setState(t)},render:function(){var r=this,e=this.state,t=e.groupId,o=e.groupIdError,n=e.groupLabel,a=e.groupLabelError,i=e.roleId,l=e.roleIdError,s=e.roleLabel,e=e.roleLabelError;return"group"===this.props.type?u.default.createElement("div",{style:{width:"100%"}},u.default.createElement(c,{value:n,errorText:a,onChange:function(e,t){r.update({groupLabel:t})},fullWidth:!0,floatingLabelText:this.context.getMessage("ajxp_admin.user.17"),onKeyPress:function(e){"Enter"===e.key&&r.submit()}}),u.default.createElement(c,{value:t,errorText:o,onChange:function(e,t){r.update({groupId:t})},fullWidth:!0,floatingLabelText:this.context.getMessage("ajxp_admin.user.16"),onKeyDown:function(e){"Enter"===e.key&&r.submit()}})):u.default.createElement("div",{style:{width:"100%"}},u.default.createElement(c,{value:s,errorText:e,onChange:function(e,t){r.update({roleLabel:t})},floatingLabelText:this.context.getMessage("role_editor.32"),onKeyDown:function(e){"Enter"===e.key&&r.submit()}}),u.default.createElement(c,{value:i,errorText:l,floatingLabelText:this.context.getMessage("role_editor.31.hint"),onChange:function(e,t){r.update({roleId:t})},onKeyDown:function(e){"Enter"===e.key&&r.submit()}}))}});r.default=n,t.exports=r.default},{"create-react-class":"create-react-class","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react"}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(e("react")),n=c(e("create-react-class")),a=c(e("prop-types")),i=c(e("pydio")),l=c(e("pydio/http/api")),s=c(e("pydio/util/pass")),u=c(e("pydio/model/node"));function c(e){return e&&e.__esModule?e:{default:e}}function d(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function f(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}var p=i.default.requireLib("hoc").ModernTextField,a=(0,n.default)({displayName:"CreateUserForm",propTypes:{dataModel:a.default.instanceOf(PydioDataModel),openRoleEditor:a.default.func},mixins:[AdminComponents.MessagesConsumerMixin,PydioReactUI.ActionDialogMixin,PydioReactUI.CancelButtonProviderMixin,PydioReactUI.SubmitButtonProviderMixin],getDefaultProps:function(){return{dialogSize:"sm",dialogTitleId:"ajxp_admin.user.19"}},getInitialState:function(){return f({step:1},s.default.getState())},checkPassword:function(){var e=this.refs.pass.getValue(),t=this.refs.passconf.getValue();this.setState(s.default.getState(e,t,this.state))},checkLogin:function(e,t){t=s.default.isValidLogin(t);this.setState({loginErrorText:t})},submit:function(){var r,o,n,e,a=this;this.state.valid&&!this.state.loginErrorText?(r=this.props.dataModel.getUniqueNode()||this.props.dataModel.getContextNode(),(o=r.getPath()).startsWith("/idm/users")&&(o=o.substr("/idm/users".length)),n=this.refs.user_id.getValue(),e=this.refs.pass.getValue(),l.default.getRestClient().getIdmApi().createUser(o,n,e).then(function(e){a.dismiss(),r.reload();var t=new u.default(o+"/"+n,!0);t.getMetadata().set("ajxp_mime","user"),t.getMetadata().set("IdmUser",e),a.props.openRoleEditor(t)})):this.props.pydio.UI.displayMessage("ERROR",this.state.passErrorText||this.state.confirmErrorText||this.state.loginErrorText)},render:function(){var e,t=(this.props.dataModel.getUniqueNode()||this.props.dataModel.getContextNode()).getPath();return t.startsWith("/idm/users")&&(e=(e=t.substr("/idm/users".length))&&o.default.createElement("div",null,this.context.getMessage("ajxp_admin.user.20").replace("%s",e))),o.default.createElement("div",{style:{width:"100%"}},e,o.default.createElement("form",{autoComplete:"off"},o.default.createElement("div",{style:{width:"100%"}},o.default.createElement(p,{ref:"user_id",onChange:this.checkLogin,fullWidth:!0,floatingLabelText:this.context.getMessage("ajxp_admin.user.21"),errorText:this.state.loginErrorText,autoComplete:"nope"})),o.default.createElement("div",null,o.default.createElement(p,{ref:"pass",type:"password",floatingLabelText:this.context.getMessage("ajxp_admin.user.22"),onChange:this.checkPassword,fullWidth:!0,errorText:this.state.passErrorText||this.state.passHintText,autoComplete:"new-password"})),o.default.createElement("div",null,o.default.createElement(p,{ref:"passconf",type:"password",floatingLabelText:this.context.getMessage("ajxp_admin.user.23"),onChange:this.checkPassword,fullWidth:!0,errorText:this.state.confirmErrorText,autoComplete:"confirm-password"}))))}});r.default=a,t.exports=r.default},{"create-react-class":"create-react-class","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/node":"pydio/model/node","pydio/util/pass":"pydio/util/pass",react:"react"}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=u(e("react")),n=u(e("pydio")),a=u(e("prop-types")),i=u(e("create-react-class")),l=u(e("pydio/model/data-model")),s=e("material-ui");function u(e){return e&&e.__esModule?e:{default:e}}var c=n.default.requireLib("hoc"),d=c.ModernTextField,f=(c.ModernSelectField,n.default.requireLib("components").FoldersTree),p=n.default.requireLib("boot"),e=p.ActionDialogMixin,c=p.CancelButtonProviderMixin,p=p.SubmitButtonProviderMixin,p=(0,i.default)({displayName:"TreeGroupsDialog",propTypes:{dataModel:a.default.instanceOf(l.default),submitValue:a.default.func.isRequired},mixins:[e,c,p],getDefaultProps:function(){return{dialogTitle:"Move",dialogIsModal:!0,dialogScrollBody:!0}},submit:function(){var e=this.state,t=e.selectedNode,e=e.selectedPath;this.props.submitValue(e,t),this.dismiss()},getInitialState:function(){return{selectedNode:this.props.dataModel.getContextNode(),selectedPath:"/"}},onNodeSelected:function(e){var t=this.props.dataModel;e.load(t.getAjxpNodeProvider());t=t.getContextNode().getPath(),t=new RegExp("^"+t),t=e.getPath().replace(t,"");this.setState({selectedNode:e,selectedPath:t})},render:function(){var e=this.state.selectedPath;return o.default.createElement("div",{style:{width:"100%"}},o.default.createElement("div",{style:{fontSize:13}},n.default.getMessages()["ajxp_admin.user.moveto.hint"]),o.default.createElement(s.Paper,{zDepth:0,style:{height:300,overflowX:"auto",color:"#546E7A",fontSize:14,padding:"6px 0px",backgroundColor:"rgb(246, 246, 248)",marginTop:4}},o.default.createElement("div",{style:{marginTop:-41,marginLeft:-21}},o.default.createElement(f,{pydio:this.props.pydio,dataModel:this.props.dataModel,rootNode:this.props.dataModel.getContextNode(),onNodeSelected:this.onNodeSelected,showRoot:!0,draggable:!1}))),o.default.createElement("div",null,o.default.createElement(d,{variant:"v2",fullWidth:!0,hintText:this.props.pydio.MessageHash[373],ref:"input",value:e,disabled:!1,onChange:function(){}})))}});r.default=p,t.exports=r.default},{"create-react-class":"create-react-class","material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model",react:"react"}],49:[function(e,t,r){"use strict";var o=m(e("./board/Dashboard")),n=m(e("./board/RolesDashboard")),a=m(e("./board/PoliciesBoard")),i=m(e("./board/Callbacks")),l=m(e("./forms/CreateUserForm")),s=m(e("./forms/CreateRoleOrGroupForm")),u=m(e("./forms/TreeGroupsDialog")),c=m(e("./editor/ACL")),d=m(e("./editor/Info")),f=m(e("./editor/Model")),p=m(e("./editor/Params")),y=m(e("./editor/User")),e=m(e("./editor/Util"));function m(e){return e&&e.__esModule?e:{default:e}}window.AdminPeople={Callbacks:i.default,Dashboard:o.default,RolesDashboard:n.default,PoliciesBoard:a.default,Editor:{Model:f.default,Info:d.default,ACL:c.default,Params:p.default,User:y.default,Util:e.default},Forms:{CreateUserForm:l.default,CreateRoleOrGroupForm:s.default},TreeGroupsDialog:u.default}},{"./board/Callbacks":1,"./board/Dashboard":2,"./board/PoliciesBoard":3,"./board/RolesDashboard":4,"./editor/ACL":11,"./editor/Info":16,"./editor/Model":19,"./editor/Params":24,"./editor/User":27,"./editor/Util":31,"./forms/CreateRoleOrGroupForm":46,"./forms/CreateUserForm":47,"./forms/TreeGroupsDialog":48}],50:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(e("pydio")),f=a(e("react")),p=a(e("./Rule")),y=e("material-ui"),l=e("uuid");function a(e){return e&&e.__esModule?e:{default:e}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function i(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function s(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=h(r);return e=o?(e=h(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=o.default.requireLib("hoc").ModernTextField,o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,f["default"].Component);var e,t,r,o=d(n);function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=o.call(this,e)).state={policy:e.policy,pName:null,pDesc:null},t}return e=n,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({policy:e.policy})}},{key:"componentDidMount",value:function(){this.props.newPolicyWithRule&&this.onAddRule(null,this.props.newPolicyWithRule)}},{key:"onNameChange",value:function(e){var t=s({},this.state.policy);t.Name=e,this.props.savePolicy(t)}},{key:"onDescriptionChange",value:function(e){var t=s({},this.state.policy);t.Description=e,this.props.savePolicy(t)}},{key:"saveLabels",value:function(){var e=this.state,t=e.pName,r=e.pDesc,e=e.policy;null!==t&&(e.Name=t),null!==r&&(e.Description=r),this.setState({pName:null,pDesc:null}),this.props.savePolicy(e)}},{key:"onRuleChange",value:function(t){var e=s({},this.state.policy);e.Policies?(e.Policies=e.Policies.filter(function(e){return e.id!==t.id}),e.Policies.push(t)):e.Policies=[t],this.props.savePolicy(e)}},{key:"onRemoveRule",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=s({},this.state.policy);r.Policies=r.Policies.filter(function(e){return e.id!==t.id}),this.props.savePolicy(r,e)}},{key:"onAddRule",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o=s({},this.state.policy);o.Policies||(o.Policies=[]);var n=(0,l.v4)(),a=[],i=[];"acl"===o.ResourceGroup?(a=["policy:"+o.Uuid],i=["acl"]):"oidc"===o.ResourceGroup&&(i=["oidc"]),o.Policies.push({id:n,description:r,actions:[],subjects:a,resources:i,effect:"deny"}),this.setState({policy:o,openRule:n},function(){t.setState({openRule:null})})}},{key:"render",value:function(){function e(e){return i.MessageHash["ajxp_admin.policies."+e]||e}var t,r,o=this,n=this.props,a=n.readonly,i=n.pydio,l=this.state,s=l.policy,u=l.openRule,c=s.Policies.map(function(e,t){return f.default.createElement(p.default,m({},o.props,{key:e.description,rule:e,isLast:t===s.Policies.length-1,create:u===e.id,onRuleChange:o.onRuleChange.bind(o),onRemoveRule:o.onRemoveRule.bind(o)}))}),d={iconStyle:{fontSize:18,color:"rgba(0,0,0,.33)"},style:{padding:8,width:36,height:36},tooltipPosition:"top-right"},n=f.default.createElement("div",{style:{display:"flex",alignItems:"center"}},f.default.createElement("div",{style:{fontSize:14,fontWeight:500}},"Rules"),!a&&f.default.createElement(y.IconButton,m({iconClassName:"mdi mdi-plus",tooltip:e("rule.create"),onClick:this.onAddRule.bind(this)},d,{tooltipPosition:"bottom-right"})));return a||(r=this.state,t=r.showLabels,l=r.pName,a=r.pDesc,r=!(null!==l&&l!==s.Name||null!==a&&a!==s.Description)||""===l,r=f.default.createElement("div",{style:{marginTop:10,paddingTop:10}},f.default.createElement("div",{style:{display:"flex",alignItems:"center"}},f.default.createElement("div",{style:{fontSize:14,fontWeight:500}},"Edit Labels"),f.default.createElement(y.IconButton,m({iconClassName:"mdi mdi-chevron-"+(t?"down":"right"),tooltip:e("policy.editLabels"),onClick:function(){return o.setState({showLabels:!t})}},d))),f.default.createElement("div",{style:{display:t?"flex":"none"}},f.default.createElement("div",{style:{marginRight:6,flex:1}},f.default.createElement(g,{value:null===l?s.Name:l,fullWidth:!0,onChange:function(e,t){o.setState({pName:t})}})),f.default.createElement("div",{style:{marginLeft:6,flex:1}},f.default.createElement(g,{value:null===a?s.Description:a,fullWidth:!0,onChange:function(e,t){o.setState({pDesc:t})}})),f.default.createElement("div",{style:{width:80}},f.default.createElement(y.IconButton,{disabled:r,iconClassName:"mdi mdi-content-save",tooltip:e("policy.saveLabels"),tooltipPosition:"top-center",onClick:function(){o.saveLabels()},iconStyle:{fontSize:20,color:"rgba(0,0,0,"+(r?".10":".43")+")"},style:{padding:14}}))))),f.default.createElement("div",{style:{padding:"12px 24px",backgroundColor:"#f5f5f5"}},n,c,r)}}])&&u(e.prototype,t),r&&u(e,r),n}();r.default=o,t.exports=r.default},{"./Rule":51,"material-ui":"material-ui",pydio:"pydio",react:"react",uuid:53}],51:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("react")),i=e("material-ui"),l=(o(e("pydio/util/func")),o(e("pydio/http/resources-manager")),e("../editor/util/ClassLoader"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(r);return e=o?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,a["default"].Component);var e,t,r,o=c(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o.apply(this,arguments)}return e=n,(t=[{key:"componentDidMount",value:function(){this.props.create&&this.openEditor()}},{key:"openEditor",value:function(){var t=this,e=this.props,r=e.pydio,o=e.policy,n=e.rule,a=e.openRightPane,e=e.rulesEditorClass;return!(this.refs.editor&&this.refs.editor.isDirty()&&!window.confirm(r.MessageHash["role_editor.19"]))&&(!!e&&((0,l.loadEditorClass)(e,null).then(function(e){a({COMPONENT:e,PROPS:{ref:"editor",policy:o,rule:n,pydio:r,saveRule:t.props.onRuleChange,create:t.props.create,onRequestTabClose:t.closeEditor.bind(t)}})}).catch(function(e){console.error(e)}),!0))}},{key:"closeEditor",value:function(e){var t=this.props,r=t.pydio,t=t.closeRightPane;if(e&&e.isDirty()){if(e.isCreate())return this.props.onRemoveRule(this.props.rule,!0),t(),!0;if(!window.confirm(r.MessageHash["role_editor.19"]))return!1}return t(),!0}},{key:"removeRule",value:function(){var e=this.props,t=e.pydio,r=e.onRemoveRule,o=e.rule;t.UI.openConfirmDialog({message:t.MessageHash["ajxp_admin.policies.rule.delete.confirm"],destructive:[o.description],validCallback:function(){r(o)}})}},{key:"render",value:function(){var e=this.props,t=e.rule,r=e.readonly,o=e.isLast,n="allow"===t.effect?"#33691e":"#d32f2f",e=[];r||(e=[a.default.createElement("span",{className:"mdi mdi-pencil",style:{fontSize:16,color:"rgba(0,0,0,.33)",cursor:"pointer",marginLeft:12},onClick:this.openEditor.bind(this)}),a.default.createElement("span",{className:"mdi mdi-delete",style:{fontSize:16,color:"rgba(0,0,0,.33)",cursor:"pointer",marginLeft:12},onClick:this.removeRule.bind(this)})]);t.description;return a.default.createElement("div",{style:{display:"flex",padding:"6px 0 5px",borderBottom:o?null:"1px solid white"}},a.default.createElement(i.FontIcon,{className:"mdi mdi-traffic-light",color:n,style:{fontSize:16,marginRight:10}}),a.default.createElement("div",{style:{flex:1}},t.description,e))}}])&&s(e.prototype,t),r&&s(e,r),n}();r.default=e,t.exports=r.default},{"../editor/util/ClassLoader":44,"material-ui":"material-ui","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/util/func":"pydio/util/func",react:"react"}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);function a(e,t){return t=t||0,[o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]]].join("")}r.default=a,t.exports=r.default},{}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return i.default}});var o=l(e("./v1.js")),n=l(e("./v3.js")),a=l(e("./v4.js")),i=l(e("./v5.js"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./v1.js":57,"./v3.js":58,"./v4.js":60,"./v5.js":61}],54:[function(e,t,r){"use strict";function d(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function l(e,t,r,o,n,a){return d((a=d(d(t,e),d(o,a)))<<(n=n)|a>>>32-n,r)}function f(e,t,r,o,n,a,i){return l(t&r|~t&o,e,t,n,a,i)}function p(e,t,r,o,n,a,i){return l(t&o|r&~o,e,t,n,a,i)}function y(e,t,r,o,n,a,i){return l(t^r^o,e,t,n,a,i)}function m(e,t,r,o,n,a,i){return l(r^(t|~o),e,t,n,a,i)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function o(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Array(t.length);for(var r=0;r<t.length;r++)e[r]=t.charCodeAt(r)}return function(e){var t,r,o=[],n=32*e.length,a="0123456789abcdef";for(t=0;t<n;t+=8)r=e[t>>5]>>>t%32&255,r=parseInt(a.charAt(r>>>4&15)+a.charAt(15&r),16),o.push(r);return o}(function(e,t){var r,o,n,a,i;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var l=1732584193,s=-271733879,u=-1732584194,c=271733878;for(r=0;r<e.length;r+=16)l=f(o=l,n=s,a=u,i=c,e[r],7,-680876936),c=f(c,l,s,u,e[r+1],12,-389564586),u=f(u,c,l,s,e[r+2],17,606105819),s=f(s,u,c,l,e[r+3],22,-1044525330),l=f(l,s,u,c,e[r+4],7,-176418897),c=f(c,l,s,u,e[r+5],12,1200080426),u=f(u,c,l,s,e[r+6],17,-1473231341),s=f(s,u,c,l,e[r+7],22,-45705983),l=f(l,s,u,c,e[r+8],7,1770035416),c=f(c,l,s,u,e[r+9],12,-1958414417),u=f(u,c,l,s,e[r+10],17,-42063),s=f(s,u,c,l,e[r+11],22,-1990404162),l=f(l,s,u,c,e[r+12],7,1804603682),c=f(c,l,s,u,e[r+13],12,-40341101),u=f(u,c,l,s,e[r+14],17,-1502002290),s=f(s,u,c,l,e[r+15],22,1236535329),l=p(l,s,u,c,e[r+1],5,-165796510),c=p(c,l,s,u,e[r+6],9,-1069501632),u=p(u,c,l,s,e[r+11],14,643717713),s=p(s,u,c,l,e[r],20,-373897302),l=p(l,s,u,c,e[r+5],5,-701558691),c=p(c,l,s,u,e[r+10],9,38016083),u=p(u,c,l,s,e[r+15],14,-660478335),s=p(s,u,c,l,e[r+4],20,-405537848),l=p(l,s,u,c,e[r+9],5,568446438),c=p(c,l,s,u,e[r+14],9,-1019803690),u=p(u,c,l,s,e[r+3],14,-187363961),s=p(s,u,c,l,e[r+8],20,1163531501),l=p(l,s,u,c,e[r+13],5,-1444681467),c=p(c,l,s,u,e[r+2],9,-51403784),u=p(u,c,l,s,e[r+7],14,1735328473),s=p(s,u,c,l,e[r+12],20,-1926607734),l=y(l,s,u,c,e[r+5],4,-378558),c=y(c,l,s,u,e[r+8],11,-2022574463),u=y(u,c,l,s,e[r+11],16,1839030562),s=y(s,u,c,l,e[r+14],23,-35309556),l=y(l,s,u,c,e[r+1],4,-1530992060),c=y(c,l,s,u,e[r+4],11,1272893353),u=y(u,c,l,s,e[r+7],16,-155497632),s=y(s,u,c,l,e[r+10],23,-1094730640),l=y(l,s,u,c,e[r+13],4,681279174),c=y(c,l,s,u,e[r],11,-358537222),u=y(u,c,l,s,e[r+3],16,-722521979),s=y(s,u,c,l,e[r+6],23,76029189),l=y(l,s,u,c,e[r+9],4,-640364487),c=y(c,l,s,u,e[r+12],11,-421815835),u=y(u,c,l,s,e[r+15],16,530742520),s=y(s,u,c,l,e[r+2],23,-995338651),l=m(l,s,u,c,e[r],6,-198630844),c=m(c,l,s,u,e[r+7],10,1126891415),u=m(u,c,l,s,e[r+14],15,-1416354905),s=m(s,u,c,l,e[r+5],21,-57434055),l=m(l,s,u,c,e[r+12],6,1700485571),c=m(c,l,s,u,e[r+3],10,-1894986606),u=m(u,c,l,s,e[r+10],15,-1051523),s=m(s,u,c,l,e[r+1],21,-2054922799),l=m(l,s,u,c,e[r+8],6,1873313359),c=m(c,l,s,u,e[r+15],10,-30611744),u=m(u,c,l,s,e[r+6],15,-1560198380),s=m(s,u,c,l,e[r+13],21,1309151649),l=m(l,s,u,c,e[r+4],6,-145523070),c=m(c,l,s,u,e[r+11],10,-1120210379),u=m(u,c,l,s,e[r+2],15,718787259),s=m(s,u,c,l,e[r+9],21,-343485551),l=d(l,o),s=d(s,n),u=d(u,a),c=d(c,i);return[l,s,u,c]}(function(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)r[t>>5]|=(255&e[t/8])<<t%32;return r}(e),8*e.length))}r.default=o,t.exports=r.default},{}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(o)return o(n);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")};var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),n=new Uint8Array(16);t.exports=r.default},{}],56:[function(e,t,r){"use strict";function g(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function o(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=new Array(o.length);for(var n=0;n<o.length;n++)e[n]=o.charCodeAt(n)}e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),l=new Array(i),n=0;n<i;n++){l[n]=new Array(16);for(var s=0;s<16;s++)l[n][s]=e[64*n+4*s]<<24|e[64*n+4*s+1]<<16|e[64*n+4*s+2]<<8|e[64*n+4*s+3]}for(l[i-1][14]=8*(e.length-1)/Math.pow(2,32),l[i-1][14]=Math.floor(l[i-1][14]),l[i-1][15]=8*(e.length-1)&4294967295,n=0;n<i;n++){for(var u=new Array(80),c=0;c<16;c++)u[c]=l[n][c];for(c=16;c<80;c++)u[c]=g(u[c-3]^u[c-8]^u[c-14]^u[c-16],1);for(var d=r[0],f=r[1],p=r[2],y=r[3],m=r[4],c=0;c<80;c++)var h=Math.floor(c/20),h=g(d,5)+function(e,t,r,o){switch(e){case 0:return t&r^~t&o;case 1:return t^r^o;case 2:return t&r^t&o^r&o;case 3:return t^r^o}}(h,f,p,y)+m+t[h]+u[c]>>>0,m=y,y=p,p=g(f,30)>>>0,f=d,d=h;r[0]=r[0]+d>>>0,r[1]=r[1]+f>>>0,r[2]=r[2]+p>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+m>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}r.default=o,t.exports=r.default},{}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,d,f=o(e("./rng.js")),p=o(e("./bytesToUuid.js"));function o(e){return e&&e.__esModule?e:{default:e}}var y=0,m=0;e=function(e,t,r){var o=t&&r||0,n=t||[],a=(e=e||{}).node||c,i=void 0!==e.clockseq?e.clockseq:d;null!=a&&null!=i||(s=e.random||(e.rng||f.default)(),null==a&&(a=c=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==i&&(i=d=16383&(s[6]<<8|s[7])));var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),r=void 0!==e.nsecs?e.nsecs:m+1,s=l-y+(r-m)/1e4;if(s<0&&void 0===e.clockseq&&(i=i+1&16383),1e4<=(r=(s<0||y<l)&&void 0===e.nsecs?0:r))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=l,d=i,r=(1e4*(268435455&(l+=122192928e5))+(m=r))%4294967296,n[o++]=r>>>24&255,n[o++]=r>>>16&255,n[o++]=r>>>8&255,n[o++]=255&r,l=l/4294967296*1e4&268435455,n[o++]=l>>>8&255,n[o++]=255&l,n[o++]=l>>>24&15|16,n[o++]=l>>>16&255,n[o++]=i>>>8|128,n[o++]=255&i;for(var u=0;u<6;++u)n[o+u]=a[u];return t||(0,p.default)(n)};r.default=e,t.exports=r.default},{"./bytesToUuid.js":52,"./rng.js":55}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./v35.js")),e=n(e("./md5.js"));function n(e){return e&&e.__esModule?e:{default:e}}e=(0,o.default)("v3",48,e.default);r.default=e,t.exports=r.default},{"./md5.js":54,"./v35.js":59}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,s,u){function t(e,t,r,o){var n,a=r&&o||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e)),"string"==typeof t&&(n=[],t.replace(/[a-fA-F0-9]{2}/g,function(e){n.push(parseInt(e,16))}),t=n),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(t)||16!==t.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var i=u(t.concat(e));if(i[6]=15&i[6]|s,i[8]=63&i[8]|128,r)for(var l=0;l<16;++l)r[a+l]=i[l];return r||(0,c.default)(i)}try{t.name=e}catch(e){}return t.DNS=n,t.URL=a,t},r.URL=r.DNS=void 0;var o,c=(o=e("./bytesToUuid.js"))&&o.__esModule?o:{default:o};const n="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=n;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a},{"./bytesToUuid.js":52}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("./rng.js")),l=o(e("./bytesToUuid.js"));function o(e){return e&&e.__esModule?e:{default:e}}e=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||i.default)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var a=0;a<16;++a)t[o+a]=n[a];return t||(0,l.default)(n)};r.default=e,t.exports=r.default},{"./bytesToUuid.js":52,"./rng.js":55}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./v35.js")),e=n(e("./sha1.js"));function n(e){return e&&e.__esModule?e:{default:e}}e=(0,o.default)("v5",80,e.default);r.default=e,t.exports=r.default},{"./sha1.js":56,"./v35.js":59}]},{},[49]);